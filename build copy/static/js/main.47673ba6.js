/*! For license information please see main.47673ba6.js.LICENSE.txt */
(()=>{"use strict";var t={4:(t,e,n)=>{var i=n(853),r=n(43),s=n(950);function a(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function l(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function c(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function u(t){if(l(t)!==t)throw Error(a(188))}function h(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t;for(t=t.child;null!==t;){if(null!==(e=h(t)))return e;t=t.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var M=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function P(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=T&&t[T]||t["@@iterator"])?t:null}var R=Symbol.for("react.client.reference");function N(t){if(null==t)return null;if("function"===typeof t)return t.$$typeof===R?null:t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case m:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList";case C:return"Activity"}if("object"===typeof t)switch(t.$$typeof){case g:return"Portal";case _:return(t.displayName||"Context")+".Provider";case w:return(t._context.displayName||"Context")+".Consumer";case x:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case S:return null!==(e=t.displayName||null)?e:N(t.type)||"Memo";case E:e=t._payload,t=t._init;try{return N(t(e))}catch(nt){}}return null}var D=Array.isArray,L=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},F=[],j=-1;function W(t){return{current:t}}function z(t){0>j||(t.current=F[j],F[j]=null,j--)}function B(t,e){j++,F[j]=t.current,t.current=e}var U=W(null),H=W(null),V=W(null),G=W(null);function q(t,e){switch(B(V,e),B(H,t),B(U,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?sh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)t=ah(e=sh(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(U),B(U,t)}function X(){z(U),z(H),z(V)}function K(t){null!==t.memoizedState&&B(G,t);var e=U.current,n=ah(e,t.type);e!==n&&(B(H,t),B(U,n))}function Y(t){H.current===t&&(z(U),z(H)),G.current===t&&(z(G),Yh._currentValue=O)}var Q=Object.prototype.hasOwnProperty,$=i.unstable_scheduleCallback,J=i.unstable_cancelCallback,Z=i.unstable_shouldYield,tt=i.unstable_requestPaint,et=i.unstable_now,it=i.unstable_getCurrentPriorityLevel,rt=i.unstable_ImmediatePriority,st=i.unstable_UserBlockingPriority,at=i.unstable_NormalPriority,ot=i.unstable_LowPriority,lt=i.unstable_IdlePriority,ct=i.log,ut=i.unstable_setDisableYieldValue,ht=null,dt=null;function ft(t){if("function"===typeof ct&&ut(t),dt&&"function"===typeof dt.setStrictMode)try{dt.setStrictMode(ht,t)}catch(e){}}var pt=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(gt(t)/mt|0)|0},gt=Math.log,mt=Math.LN2;var vt=256,bt=4194304;function yt(t){var e=42&t;if(0!==e)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&t;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&t;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wt(t,e,n){var i=t.pendingLanes;if(0===i)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~s)?r=yt(i):0!==(a&=o)?r=yt(a):n||0!==(n=o&~t)&&(r=yt(n)):0!==(o=i&~s)?r=yt(o):0!==a?r=yt(a):n||0!==(n=i&~t)&&(r=yt(n)),0===r?0:0!==e&&e!==r&&0===(e&s)&&((s=r&-r)>=(n=e&-e)||32===s&&0!==(4194048&n))?e:r}function _t(t,e){return 0===(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)}function xt(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function kt(){var t=vt;return 0===(4194048&(vt<<=1))&&(vt=256),t}function At(){var t=bt;return 0===(62914560&(bt<<=1))&&(bt=4194304),t}function St(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Et(t,e){t.pendingLanes|=e,268435456!==e&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ct(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-pt(e);t.entangledLanes|=e,t.entanglements[i]=1073741824|t.entanglements[i]|4194090&n}function Mt(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Tt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pt(t){return 2<(t&=-t)?8<t?0!==(134217727&t)?32:268435456:8:2}function Rt(){var t=I.p;return 0!==t?t:void 0===(t=window.event)?32:ud(t.type)}var Nt=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Nt,Lt="__reactProps$"+Nt,It="__reactContainer$"+Nt,Ot="__reactEvents$"+Nt,Ft="__reactListeners$"+Nt,jt="__reactHandles$"+Nt,Wt="__reactResources$"+Nt,zt="__reactMarker$"+Nt;function Bt(t){delete t[Dt],delete t[Lt],delete t[Ot],delete t[Ft],delete t[jt]}function Ut(t){var e=t[Dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[It]||n[Dt]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=wh(t);null!==t;){if(n=t[Dt])return n;t=wh(t)}return e}n=(t=n).parentNode}return null}function Ht(t){if(t=t[Dt]||t[It]){var e=t.tag;if(5===e||6===e||13===e||26===e||27===e||3===e)return t}return null}function Vt(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t.stateNode;throw Error(a(33))}function Gt(t){var e=t[Wt];return e||(e=t[Wt]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function qt(t){t[zt]=!0}var Xt=new Set,Kt={};function Yt(t,e){Qt(t,e),Qt(t+"Capture",e)}function Qt(t,e){for(Kt[t]=e,t=0;t<e.length;t++)Xt.add(e[t])}var $t,Jt,Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),te={},ee={};function ne(t,e,n){if(r=e,Q.call(ee,r)||!Q.call(te,r)&&(Zt.test(r)?ee[r]=!0:(te[r]=!0,0)))if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":return void t.removeAttribute(e);case"boolean":var i=e.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void t.removeAttribute(e)}t.setAttribute(e,""+n)}var r}function ie(t,e,n){if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(e)}t.setAttribute(e,""+n)}}function re(t,e,n,i){if(null===i)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(n)}t.setAttributeNS(e,n,""+i)}}function se(t){if(void 0===$t)try{throw Error()}catch(nt){var e=nt.stack.trim().match(/\n( *(at )?)/);$t=e&&e[1]||"",Jt=-1<nt.stack.indexOf("\n    at")?" (<anonymous>)":-1<nt.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$t+t+Jt}var ae=!1;function oe(t,e){if(!t||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(nt){var i=nt}Reflect.construct(t,[],n)}else{try{n.call()}catch(r){i=r}t.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=t())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&i&&"string"===typeof a.stack)return[a.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}}while(1<=i&&0<=r);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?se(n):""}function le(t){switch(t.tag){case 26:case 27:case 5:return se(t.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return se("Activity");default:return""}}function ce(t){try{var e="";do{e+=le(t),t=t.return}while(t);return e}catch(nt){return"\nError generating stack: "+nt.message+"\n"+nt.stack}}function ue(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function he(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function de(t){t._valueTracker||(t._valueTracker=function(t){var e=he(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function fe(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=he(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function pe(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}var ge=/[\n"\\]/g;function me(t){return t.replace(ge,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ve(t,e,n,i,r,s,a,o){t.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?t.type=a:t.removeAttribute("type"),null!=e?"number"===a?(0===e&&""===t.value||t.value!=e)&&(t.value=""+ue(e)):t.value!==""+ue(e)&&(t.value=""+ue(e)):"submit"!==a&&"reset"!==a||t.removeAttribute("value"),null!=e?ye(t,a,ue(e)):null!=n?ye(t,a,ue(n)):null!=i&&t.removeAttribute("value"),null==r&&null!=s&&(t.defaultChecked=!!s),null!=r&&(t.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?t.name=""+ue(o):t.removeAttribute("name")}function be(t,e,n,i,r,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(t.type=s),null!=e||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==e&&null!==e))return;n=null!=n?""+ue(n):"",e=null!=e?""+ue(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(t.name=a)}function ye(t,e,n){"number"===e&&pe(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function we(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ue(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function _e(t,e,n){null==e||((e=""+ue(e))!==t.value&&(t.value=e),null!=n)?t.defaultValue=null!=n?""+ue(n):"":t.defaultValue!==e&&(t.defaultValue=e)}function xe(t,e,n,i){if(null==e){if(null!=i){if(null!=n)throw Error(a(92));if(D(i)){if(1<i.length)throw Error(a(93));i=i[0]}n=i}null==n&&(n=""),e=n}n=ue(e),t.defaultValue=n,(i=t.textContent)===n&&""!==i&&null!==i&&(t.value=i)}function ke(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Ae=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Se(t,e,n){var i=0===e.indexOf("--");null==n||"boolean"===typeof n||""===n?i?t.setProperty(e,""):"float"===e?t.cssFloat="":t[e]="":i?t.setProperty(e,n):"number"!==typeof n||0===n||Ae.has(e)?"float"===e?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Ee(t,e,n){if(null!=e&&"object"!==typeof e)throw Error(a(62));if(t=t.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=e&&e.hasOwnProperty(i)||(0===i.indexOf("--")?t.setProperty(i,""):"float"===i?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Se(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Se(t,s,e[s])}function Ce(t){if(-1===t.indexOf("-"))return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Me=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Te=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pe(t){return Te.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Re=null;function Ne(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var De=null,Le=null;function Ie(t){var e=Ht(t);if(e&&(t=e.stateNode)){var n=t[Lt]||null;t:switch(t=e.stateNode,e.type){case"input":if(ve(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+me(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Lt]||null;if(!r)throw Error(a(90));ve(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)(i=n[e]).form===t.form&&fe(i)}break t;case"textarea":_e(t,n.value,n.defaultValue);break t;case"select":null!=(e=n.value)&&we(t,!!n.multiple,e,!1)}}}var Oe=!1;function Fe(t,e,n){if(Oe)return t(e,n);Oe=!0;try{return t(e)}finally{if(Oe=!1,(null!==De||null!==Le)&&(Uc(),De&&(e=De,t=Le,Le=De=null,Ie(e),t)))for(e=0;e<t.length;e++)Ie(t[e])}}function je(t,e){var n=t.stateNode;if(null===n)return null;var i=n[Lt]||null;if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var We=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ze=!1;if(We)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(Ld){ze=!1}var Ue=null,He=null,Ve=null;function Ge(){if(Ve)return Ve;var t,e,n=He,i=n.length,r="value"in Ue?Ue.value:Ue.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[s-e];e++);return Ve=r.slice(t,1<e?1-e:void 0)}function qe(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Xe(){return!0}function Ke(){return!1}function Ye(t){function e(e,n,i,r,s){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Xe:Ke,this.isPropagationStopped=Ke,this}return d(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Xe)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Xe)},persist:function(){},isPersistent:Xe}),e}var Qe,$e,Je,Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Ye(Ze),en=d({},Ze,{view:0,detail:0}),nn=Ye(en),rn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Je&&(Je&&"mousemove"===t.type?(Qe=t.screenX-Je.screenX,$e=t.screenY-Je.screenY):$e=Qe=0,Je=t),Qe)},movementY:function(t){return"movementY"in t?t.movementY:$e}}),sn=Ye(rn),an=Ye(d({},rn,{dataTransfer:0})),on=Ye(d({},en,{relatedTarget:0})),ln=Ye(d({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=Ye(d({},Ze,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),un=Ye(d({},Ze,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=fn[t])&&!!e[t]}function gn(){return pn}var mn=Ye(d({},en,{key:function(t){if(t.key){var e=hn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=qe(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?dn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(t){return"keypress"===t.type?qe(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?qe(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),vn=Ye(d({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Ye(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),yn=Ye(d({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Ye(d({},rn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=Ye(d({},Ze,{newState:0,oldState:0})),xn=[9,13,27,32],kn=We&&"CompositionEvent"in window,An=null;We&&"documentMode"in document&&(An=document.documentMode);var Sn=We&&"TextEvent"in window&&!An,En=We&&(!kn||An&&8<An&&11>=An),Cn=String.fromCharCode(32),Mn=!1;function Tn(t,e){switch(t){case"keyup":return-1!==xn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Rn=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Nn[t.type]:"textarea"===e}function Ln(t,e,n,i){De?Le?Le.push(i):Le=[i]:De=i,0<(e=Gu(e,"onChange")).length&&(n=new tn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var In=null,On=null;function Fn(t){Fu(t,0)}function jn(t){if(fe(Vt(t)))return t}function Wn(t,e){if("change"===t)return e}var zn=!1;if(We){var Bn;if(We){var Un="oninput"in document;if(!Un){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Un="function"===typeof Hn.oninput}Bn=Un}else Bn=!1;zn=Bn&&(!document.documentMode||9<document.documentMode)}function Vn(){In&&(In.detachEvent("onpropertychange",Gn),On=In=null)}function Gn(t){if("value"===t.propertyName&&jn(On)){var e=[];Ln(e,On,t,Ne(t)),Fe(Fn,e)}}function qn(t,e,n){"focusin"===t?(Vn(),On=n,(In=e).attachEvent("onpropertychange",Gn)):"focusout"===t&&Vn()}function Xn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return jn(On)}function Kn(t,e){if("click"===t)return jn(e)}function Yn(t,e){if("input"===t||"change"===t)return jn(e)}var Qn="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function $n(t,e){if(Qn(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Q.call(e,r)||!Qn(t[r],e[r]))return!1}return!0}function Jn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zn(t,e){var n,i=Jn(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Jn(i)}}function ti(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ti(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ei(t){for(var e=pe((t=null!=t&&null!=t.ownerDocument&&null!=t.ownerDocument.defaultView?t.ownerDocument.defaultView:window).document);e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=pe((t=e.contentWindow).document)}return e}function ni(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var ii=We&&"documentMode"in document&&11>=document.documentMode,ri=null,si=null,ai=null,oi=!1;function li(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;oi||null==ri||ri!==pe(i)||("selectionStart"in(i=ri)&&ni(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ai&&$n(ai,i)||(ai=i,0<(i=Gu(si,"onSelect")).length&&(e=new tn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ri)))}function ci(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionrun:ci("Transition","TransitionRun"),transitionstart:ci("Transition","TransitionStart"),transitioncancel:ci("Transition","TransitionCancel"),transitionend:ci("Transition","TransitionEnd")},hi={},di={};function fi(t){if(hi[t])return hi[t];if(!ui[t])return t;var e,n=ui[t];for(e in n)if(n.hasOwnProperty(e)&&e in di)return hi[t]=n[e];return t}We&&(di=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);var pi=fi("animationend"),gi=fi("animationiteration"),mi=fi("animationstart"),vi=fi("transitionrun"),bi=fi("transitionstart"),yi=fi("transitioncancel"),wi=fi("transitionend"),_i=new Map,xi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){_i.set(t,e),Yt(e,[t])}xi.push("scrollEnd");var Ai=new WeakMap;function Si(t,e){if("object"===typeof t&&null!==t){var n=Ai.get(t);return void 0!==n?n:(e={value:t,source:e,stack:ce(e)},Ai.set(t,e),e)}return{value:t,source:e,stack:ce(e)}}var Ei=[],Ci=0,Mi=0;function Ti(){for(var t=Ci,e=Mi=Ci=0;e<t;){var n=Ei[e];Ei[e++]=null;var i=Ei[e];Ei[e++]=null;var r=Ei[e];Ei[e++]=null;var s=Ei[e];if(Ei[e++]=null,null!==i&&null!==r){var a=i.pending;null===a?r.next=r:(r.next=a.next,a.next=r),i.pending=r}0!==s&&Di(n,r,s)}}function Pi(t,e,n,i){Ei[Ci++]=t,Ei[Ci++]=e,Ei[Ci++]=n,Ei[Ci++]=i,Mi|=i,t.lanes|=i,null!==(t=t.alternate)&&(t.lanes|=i)}function Ri(t,e,n,i){return Pi(t,e,n,i),Li(t)}function Ni(t,e){return Pi(t,null,null,e),Li(t)}function Di(t,e,n){t.lanes|=n;var i=t.alternate;null!==i&&(i.lanes|=n);for(var r=!1,s=t.return;null!==s;)s.childLanes|=n,null!==(i=s.alternate)&&(i.childLanes|=n),22===s.tag&&(null===(t=s.stateNode)||1&t._visibility||(r=!0)),t=s,s=s.return;return 3===t.tag?(s=t.stateNode,r&&null!==e&&(r=31-pt(n),null===(i=(t=s.hiddenUpdates)[r])?t[r]=[e]:i.push(e),e.lane=536870912|n),s):null}function Li(t){if(50<Dc)throw Dc=0,Lc=null,Error(a(185));for(var e=t.return;null!==e;)e=(t=e).return;return 3===t.tag?t.stateNode:null}var Ii={};function Oi(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(t,e,n,i){return new Oi(t,e,n,i)}function ji(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Wi(t,e){var n=t.alternate;return null===n?((n=Fi(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function zi(t,e){t.flags&=65011714;var n=t.alternate;return null===n?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Bi(t,e,n,i,r,s){var o=0;if(i=t,"function"===typeof t)ji(t)&&(o=1);else if("string"===typeof t)o=function(t,e,n){if(1===n||null!=e.itemProp)return!1;switch(t){case"meta":case"title":return!0;case"style":if("string"!==typeof e.precedence||"string"!==typeof e.href||""===e.href)break;return!0;case"link":if("string"!==typeof e.rel||"string"!==typeof e.href||""===e.href||e.onLoad||e.onError)break;return"stylesheet"!==e.rel||(t=e.disabled,"string"===typeof e.precedence&&null==t);case"script":if(e.async&&"function"!==typeof e.async&&"symbol"!==typeof e.async&&!e.onLoad&&!e.onError&&e.src&&"string"===typeof e.src)return!0}return!1}(t,n,U.current)?26:"html"===t||"head"===t||"body"===t?27:5;else t:switch(t){case C:return(t=Fi(31,n,e,r)).elementType=C,t.lanes=s,t;case m:return Ui(n.children,r,s,e);case v:o=8,r|=24;break;case b:return(t=Fi(12,n,e,2|r)).elementType=b,t.lanes=s,t;case k:return(t=Fi(13,n,e,r)).elementType=k,t.lanes=s,t;case A:return(t=Fi(19,n,e,r)).elementType=A,t.lanes=s,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case y:case _:o=10;break t;case w:o=9;break t;case x:o=11;break t;case S:o=14;break t;case E:o=16,i=null;break t}o=29,n=Error(a(130,null===t?"null":typeof t,"")),i=null}return(e=Fi(o,n,e,r)).elementType=t,e.type=i,e.lanes=s,e}function Ui(t,e,n,i){return(t=Fi(7,t,i,e)).lanes=n,t}function Hi(t,e,n){return(t=Fi(6,t,null,e)).lanes=n,t}function Vi(t,e,n){return(e=Fi(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Gi=[],qi=0,Xi=null,Ki=0,Yi=[],Qi=0,$i=null,Ji=1,Zi="";function tr(t,e){Gi[qi++]=Ki,Gi[qi++]=Xi,Xi=t,Ki=e}function er(t,e,n){Yi[Qi++]=Ji,Yi[Qi++]=Zi,Yi[Qi++]=$i,$i=t;var i=Ji;t=Zi;var r=32-pt(i)-1;i&=~(1<<r),n+=1;var s=32-pt(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ji=1<<32-pt(e)+r|n<<r|i,Zi=s+t}else Ji=1<<s|n<<r|i,Zi=t}function nr(t){null!==t.return&&(tr(t,1),er(t,1,0))}function ir(t){for(;t===Xi;)Xi=Gi[--qi],Gi[qi]=null,Ki=Gi[--qi],Gi[qi]=null;for(;t===$i;)$i=Yi[--Qi],Yi[Qi]=null,Zi=Yi[--Qi],Yi[Qi]=null,Ji=Yi[--Qi],Yi[Qi]=null}var rr=null,sr=null,ar=!1,or=null,lr=!1,cr=Error(a(519));function ur(t){throw mr(Si(Error(a(418,"")),t)),cr}function hr(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Dt]=t,e[Lt]=i,n){case"dialog":ju("cancel",e),ju("close",e);break;case"iframe":case"object":case"embed":ju("load",e);break;case"video":case"audio":for(n=0;n<Iu.length;n++)ju(Iu[n],e);break;case"source":ju("error",e);break;case"img":case"image":case"link":ju("error",e),ju("load",e);break;case"details":ju("toggle",e);break;case"input":ju("invalid",e),be(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),de(e);break;case"select":ju("invalid",e);break;case"textarea":ju("invalid",e),xe(e,i.value,i.defaultValue,i.children),de(e)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||e.textContent===""+n||!0===i.suppressHydrationWarning||$u(e.textContent,n)?(null!=i.popover&&(ju("beforetoggle",e),ju("toggle",e)),null!=i.onScroll&&ju("scroll",e),null!=i.onScrollEnd&&ju("scrollend",e),null!=i.onClick&&(e.onclick=Ju),e=!0):e=!1,e||ur(t)}function dr(t){for(rr=t.return;rr;)switch(rr.tag){case 5:case 13:return void(lr=!1);case 27:case 3:return void(lr=!0);default:rr=rr.return}}function fr(t){if(t!==rr)return!1;if(!ar)return dr(t),ar=!0,!1;var e,n=t.tag;if((e=3!==n&&27!==n)&&((e=5===n)&&(e=!("form"!==(e=t.type)&&"button"!==e)||oh(t.type,t.memoizedProps)),e=!e),e&&sr&&ur(t),dr(t),13===n){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(8===t.nodeType)if("/$"===(e=t.data)){if(0===n){sr=bh(t.nextSibling);break t}n--}else"$"!==e&&"$!"!==e&&"$?"!==e||n++;t=t.nextSibling}sr=null}}else 27===n?(n=sr,ph(t.type)?(t=yh,yh=null,sr=t):sr=n):sr=rr?bh(t.stateNode.nextSibling):null;return!0}function pr(){sr=rr=null,ar=!1}function gr(){var t=or;return null!==t&&(null===wc?wc=t:wc.push.apply(wc,t),or=null),t}function mr(t){null===or?or=[t]:or.push(t)}var vr=W(null),br=null,yr=null;function wr(t,e,n){B(vr,e._currentValue),e._currentValue=n}function _r(t){t._currentValue=vr.current,z(vr)}function xr(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function kr(t,e,n,i){var r=t.child;for(null!==r&&(r.return=t);null!==r;){var s=r.dependencies;if(null!==s){var o=r.child;s=s.firstContext;t:for(;null!==s;){var l=s;s=r;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xr(s.return,n,t),i||(o=null);break t}s=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),xr(o,n,t),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Ar(t,e,n,i){t=null;for(var r=e,s=!1;null!==r;){if(!s)if(0!==(524288&r.flags))s=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;Qn(r.pendingProps.value,o.value)||(null!==t?t.push(l):t=[l])}}else if(r===G.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==t?t.push(Yh):t=[Yh])}r=r.return}null!==t&&kr(e,t,n,i),e.flags|=262144}function Sr(t){for(t=t.firstContext;null!==t;){if(!Qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Er(t){br=t,yr=null,null!==(t=t.dependencies)&&(t.firstContext=null)}function Cr(t){return Tr(br,t)}function Mr(t,e){return null===br&&Er(t),Tr(t,e)}function Tr(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},null===yr){if(null===t)throw Error(a(308));yr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else yr=yr.next=e;return n}var Pr="undefined"!==typeof AbortController?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(e,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(t){return t()})}},Rr=i.unstable_scheduleCallback,Nr=i.unstable_NormalPriority,Dr={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lr(){return{controller:new Pr,data:new Map,refCount:0}}function Ir(t){t.refCount--,0===t.refCount&&Rr(Nr,function(){t.controller.abort()})}var Or=null,Fr=0,jr=0,Wr=null;function zr(){if(0===--Fr&&null!==Or){null!==Wr&&(Wr.status="fulfilled");var t=Or;Or=null,jr=0,Wr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}var Br=L.S;L.S=function(t,e){"object"===typeof e&&null!==e&&"function"===typeof e.then&&function(t,e){if(null===Or){var n=Or=[];Fr=0,jr=Pu(),Wr={status:"pending",value:void 0,then:function(t){n.push(t)}}}Fr++,e.then(zr,zr)}(0,e),null!==Br&&Br(t,e)};var Ur=W(null);function Hr(){var t=Ur.current;return null!==t?t:rc.pooledCache}function Vr(t,e){B(Ur,null===e?Ur.current:e.pool)}function Gr(){var t=Hr();return null===t?null:{parent:Dr._currentValue,pool:t}}var qr=Error(a(460)),Xr=Error(a(474)),Kr=Error(a(542)),Yr={then:function(){}};function Qr(t){return"fulfilled"===(t=t.status)||"rejected"===t}function $r(){}function Jr(t,e,n){switch(void 0===(n=t[n])?t.push(e):n!==e&&(e.then($r,$r),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw es(t=e.reason),t;default:if("string"===typeof e.status)e.then($r,$r);else{if(null!==(t=rc)&&100<t.shellSuspendCounter)throw Error(a(482));(t=e).status="pending",t.then(function(t){if("pending"===e.status){var n=e;n.status="fulfilled",n.value=t}},function(t){if("pending"===e.status){var n=e;n.status="rejected",n.reason=t}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw es(t=e.reason),t}throw Zr=e,qr}}var Zr=null;function ts(){if(null===Zr)throw Error(a(459));var t=Zr;return Zr=null,t}function es(t){if(t===qr||t===Kr)throw Error(a(483))}var ns=!1;function is(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ss(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function as(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&ic)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Li(t),Di(t,null,n),e}return Pi(t,i,e,n),Li(t)}function os(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194048&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Mt(t,n)}}function ls(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var cs=!1;function us(){if(cs){if(null!==Wr)throw Wr}}function hs(t,e,n,i){cs=!1;var r=t.updateQueue;ns=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(ac&f)===f:(i&f)===f){0!==f&&f===jr&&(cs=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var g=t,m=o;f=e;var v=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(v,h,f);break t}h=g;break t;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(v,h,f):g)||void 0===f)break t;h=d({},h,f);break t;case 2:ns=!0}}null!==(f=o.callback)&&(t.flags|=64,p&&(t.flags|=8192),null===(p=r.callbacks)?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(p=o).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===s&&(r.shared.lanes=0),pc|=a,t.lanes=a,t.memoizedState=h}}function ds(t,e){if("function"!==typeof t)throw Error(a(191,t));t.call(e)}function fs(t,e){var n=t.callbacks;if(null!==n)for(t.callbacks=null,t=0;t<n.length;t++)ds(n[t],e)}var ps=W(null),gs=W(0);function ms(t,e){B(gs,t=dc),B(ps,e),dc=t|e.baseLanes}function vs(){B(gs,dc),B(ps,ps.current)}function bs(){dc=gs.current,z(ps),z(gs)}var ys=0,ws=null,_s=null,xs=null,ks=!1,As=!1,Ss=!1,Es=0,Cs=0,Ms=null,Ts=0;function Ps(){throw Error(a(321))}function Rs(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Ns(t,e,n,i,r,s){return ys=s,ws=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L.H=null===t||null===t.memoizedState?qa:Xa,Ss=!1,s=n(i,r),Ss=!1,As&&(s=Ls(e,n,i,r)),Ds(t),s}function Ds(t){L.H=Ga;var e=null!==_s&&null!==_s.next;if(ys=0,xs=_s=ws=null,ks=!1,Cs=0,Ms=null,e)throw Error(a(300));null===t||Mo||null!==(t=t.dependencies)&&Sr(t)&&(Mo=!0)}function Ls(t,e,n,i){ws=t;var r=0;do{if(As&&(Ms=null),Cs=0,As=!1,25<=r)throw Error(a(301));if(r+=1,xs=_s=null,null!=t.updateQueue){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}L.H=Ka,s=e(n,i)}while(As);return s}function Is(){var t=L.H,e=t.useState()[0];return e="function"===typeof e.then?Bs(e):e,t=t.useState()[0],(null!==_s?_s.memoizedState:null)!==t&&(ws.flags|=1024),e}function Os(){var t=0!==Es;return Es=0,t}function Fs(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function js(t){if(ks){for(t=t.memoizedState;null!==t;){var e=t.queue;null!==e&&(e.pending=null),t=t.next}ks=!1}ys=0,xs=_s=ws=null,As=!1,Cs=Es=0,Ms=null}function Ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xs?ws.memoizedState=xs=t:xs=xs.next=t,xs}function zs(){if(null===_s){var t=ws.alternate;t=null!==t?t.memoizedState:null}else t=_s.next;var e=null===xs?ws.memoizedState:xs.next;if(null!==e)xs=e,_s=t;else{if(null===t){if(null===ws.alternate)throw Error(a(467));throw Error(a(310))}t={memoizedState:(_s=t).memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},null===xs?ws.memoizedState=xs=t:xs=xs.next=t}return xs}function Bs(t){var e=Cs;return Cs+=1,null===Ms&&(Ms=[]),t=Jr(Ms,t,e),e=ws,null===(null===xs?e.memoizedState:xs.next)&&(e=e.alternate,L.H=null===e||null===e.memoizedState?qa:Xa),t}function Us(t){if(null!==t&&"object"===typeof t){if("function"===typeof t.then)return Bs(t);if(t.$$typeof===_)return Cr(t)}throw Error(a(438,String(t)))}function Hs(t){var e=null,n=ws.updateQueue;if(null!==n&&(e=n.memoCache),null==e){var i=ws.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(e={data:i.data.map(function(t){return t.slice()}),index:0})))}if(null==e&&(e={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=e,void 0===(n=e.data[e.index]))for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=M;return e.index++,n}function Vs(t,e){return"function"===typeof e?e(t):e}function Gs(t){return qs(zs(),_s,t)}function qs(t,e,n){var i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,null===r)t.memoizedState=s;else{var l=o=null,c=null,u=e=r.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(ac&d)===d:(ys&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===jr&&(h=!0);else{if((ys&f)===f){u=u.next,f===jr&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,o=s):c=c.next=d,ws.lanes|=f,pc|=f}d=u.action,Ss&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,ws.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==e);if(null===c?o=s:c.next=l,!Qn(s,t.memoizedState)&&(Mo=!0,h&&null!==(n=Wr)))throw n;t.memoizedState=s,t.baseState=o,t.baseQueue=c,i.lastRenderedState=s}return null===r&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Xs(t){var e=zs(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=t(s,o.action),o=o.next}while(o!==r);Qn(s,e.memoizedState)||(Mo=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ks(t,e,n){var i=ws,r=zs(),s=ar;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=e();var o=!Qn((_s||r).memoizedState,n);if(o&&(r.memoizedState=n,Mo=!0),r=r.queue,va(2048,8,$s.bind(null,i,r,t),[t]),r.getSnapshot!==e||o||null!==xs&&1&xs.memoizedState.tag){if(i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,r,n,e),null),null===rc)throw Error(a(349));s||0!==(124&ys)||Ys(i,e,n)}return n}function Ys(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ws.updateQueue)?(e={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Qs(t,e,n,i){e.value=n,e.getSnapshot=i,Js(e)&&Zs(t)}function $s(t,e,n){return n(function(){Js(e)&&Zs(t)})}function Js(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch(i){return!0}}function Zs(t){var e=Ni(t,2);null!==e&&Fc(e,t,2)}function ta(t){var e=Ws();if("function"===typeof t){var n=t;if(t=n(),Ss){ft(!0);try{n()}finally{ft(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:t},e}function ea(t,e,n,i){return t.baseState=n,qs(t,_s,"function"===typeof i?i:Vs)}function na(t,e,n,i,r){if(Ua(t))throw Error(a(485));if(null!==(t=e.action)){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(t){s.listeners.push(t)}};null!==L.T?n(!0):s.isTransition=!1,i(s),null===(n=e.pending)?(s.next=e.pending=s,ia(e,s)):(s.next=n.next,e.pending=n.next=s)}}function ia(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=L.T,a={};L.T=a;try{var o=n(r,i),l=L.S;null!==l&&l(a,o),ra(t,e,o)}catch(c){aa(t,e,c)}finally{L.T=s}}else try{ra(t,e,s=n(r,i))}catch(u){aa(t,e,u)}}function ra(t,e,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(t,e,n)},function(n){return aa(t,e,n)}):sa(t,e,n)}function sa(t,e,n){e.status="fulfilled",e.value=n,oa(e),t.state=n,null!==(e=t.pending)&&((n=e.next)===e?t.pending=null:(n=n.next,e.next=n,ia(t,n)))}function aa(t,e,n){var i=t.pending;if(t.pending=null,null!==i){i=i.next;do{e.status="rejected",e.reason=n,oa(e),e=e.next}while(e!==i)}t.action=null}function oa(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function la(t,e){return e}function ca(t,e){if(ar){var n=rc.formState;if(null!==n){t:{var i=ws;if(ar){if(sr){e:{for(var r=sr,s=lr;8!==r.nodeType;){if(!s){r=null;break e}if(null===(r=bh(r.nextSibling))){r=null;break e}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){sr=bh(r.nextSibling),i="F!"===r.data;break t}}ur(i)}i=!1}i&&(e=n[0])}}return(n=Ws()).memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},n.queue=i,n=Wa.bind(null,ws,i),i.dispatch=n,i=ta(!1),s=Ba.bind(null,ws,!1,i.queue),r={state:e,dispatch:null,action:t,pending:null},(i=Ws()).queue=r,n=na.bind(null,ws,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function ua(t){return ha(zs(),_s,t)}function ha(t,e,n){if(e=qs(t,e,la)[0],t=Gs(Vs)[0],"object"===typeof e&&null!==e&&"function"===typeof e.then)try{var i=Bs(e)}catch(nt){if(nt===qr)throw Kr;throw nt}else i=e;var r=(e=zs()).queue,s=r.dispatch;return n!==e.memoizedState&&(ws.flags|=2048,pa(9,{destroy:void 0,resource:void 0},da.bind(null,r,n),null)),[i,s,t]}function da(t,e){t.action=e}function fa(t){var e=zs(),n=_s;if(null!==n)return ha(e,n,t);zs(),e=e.memoizedState;var i=(n=zs()).queue.dispatch;return n.memoizedState=t,[e,i,!1]}function pa(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},null===(e=ws.updateQueue)&&(e={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=e),null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function ga(){return zs().memoizedState}function ma(t,e,n,i){var r=Ws();i=void 0===i?null:i,ws.flags|=t,r.memoizedState=pa(1|e,{destroy:void 0,resource:void 0},n,i)}function va(t,e,n,i){var r=zs();i=void 0===i?null:i;var s=r.memoizedState.inst;null!==_s&&null!==i&&Rs(i,_s.memoizedState.deps)?r.memoizedState=pa(e,s,n,i):(ws.flags|=t,r.memoizedState=pa(1|e,s,n,i))}function ba(t,e){ma(8390656,8,t,e)}function ya(t,e){va(2048,8,t,e)}function wa(t,e){return va(4,2,t,e)}function _a(t,e){return va(4,4,t,e)}function xa(t,e){if("function"===typeof e){t=t();var n=e(t);return function(){"function"===typeof n?n():e(null)}}if(null!==e&&void 0!==e)return t=t(),e.current=t,function(){e.current=null}}function ka(t,e,n){n=null!==n&&void 0!==n?n.concat([t]):null,va(4,4,xa.bind(null,e,t),n)}function Aa(){}function Sa(t,e){var n=zs();e=void 0===e?null:e;var i=n.memoizedState;return null!==e&&Rs(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ea(t,e){var n=zs();e=void 0===e?null:e;var i=n.memoizedState;if(null!==e&&Rs(e,i[1]))return i[0];if(i=t(),Ss){ft(!0);try{t()}finally{ft(!1)}}return n.memoizedState=[i,e],i}function Ca(t,e,n){return void 0===n||0!==(1073741824&ys)?t.memoizedState=e:(t.memoizedState=n,t=Oc(),ws.lanes|=t,pc|=t,n)}function Ma(t,e,n,i){return Qn(n,e)?n:null!==ps.current?(t=Ca(t,n,i),Qn(t,e)||(Mo=!0),t):0===(42&ys)?(Mo=!0,t.memoizedState=n):(t=Oc(),ws.lanes|=t,pc|=t,e)}function Ta(t,e,n,i,r){var s=I.p;I.p=0!==s&&8>s?s:8;var a=L.T,o={};L.T=o,Ba(t,!1,e,n);try{var l=r(),c=L.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(t){n.push(t)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var t=0;t<n.length;t++)(0,n[t])(e)},function(t){for(i.status="rejected",i.reason=t,t=0;t<n.length;t++)(0,n[t])(void 0)}),i}(l,i);za(t,e,u,Ic())}else za(t,e,i,Ic())}catch(h){za(t,e,{then:function(){},status:"rejected",reason:h},Ic())}finally{I.p=s,L.T=a}}function Pa(){}function Ra(t,e,n,i){if(5!==t.tag)throw Error(a(476));var r=Na(t).queue;Ta(t,r,e,O,null===n?Pa:function(){return Da(t),n(i)})}function Na(t){var e=t.memoizedState;if(null!==e)return e;var n={};return(e={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:n},next:null},t.memoizedState=e,null!==(t=t.alternate)&&(t.memoizedState=e),e}function Da(t){za(t,Na(t).next.queue,{},Ic())}function La(){return Cr(Yh)}function Ia(){return zs().memoizedState}function Oa(){return zs().memoizedState}function Fa(t){for(var e=t.return;null!==e;){switch(e.tag){case 24:case 3:var n=Ic(),i=as(e,t=ss(n),n);return null!==i&&(Fc(i,e,n),os(i,e,n)),e={cache:Lr()},void(t.payload=e)}e=e.return}}function ja(t,e,n){var i=Ic();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ua(t)?Ha(e,n):null!==(n=Ri(t,e,n,i))&&(Fc(n,t,i),Va(n,e,i))}function Wa(t,e,n){za(t,e,n,Ic())}function za(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ua(t))Ha(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Qn(o,a))return Pi(t,e,r,0),null===rc&&Ti(),!1}catch(l){}if(null!==(n=Ri(t,e,r,i)))return Fc(n,t,i),Va(n,e,i),!0}return!1}function Ba(t,e,n,i){if(i={lane:2,revertLane:Pu(),action:i,hasEagerState:!1,eagerState:null,next:null},Ua(t)){if(e)throw Error(a(479))}else null!==(e=Ri(t,n,i,2))&&Fc(e,t,2)}function Ua(t){var e=t.alternate;return t===ws||null!==e&&e===ws}function Ha(t,e){As=ks=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Va(t,e,n){if(0!==(4194048&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Mt(t,n)}}var Ga={readContext:Cr,use:Us,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},qa={readContext:Cr,use:Us,useCallback:function(t,e){return Ws().memoizedState=[t,void 0===e?null:e],t},useContext:Cr,useEffect:ba,useImperativeHandle:function(t,e,n){n=null!==n&&void 0!==n?n.concat([t]):null,ma(4194308,4,xa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ma(4194308,4,t,e)},useInsertionEffect:function(t,e){ma(4,2,t,e)},useMemo:function(t,e){var n=Ws();e=void 0===e?null:e;var i=t();if(Ss){ft(!0);try{t()}finally{ft(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Ws();if(void 0!==n){var r=n(e);if(Ss){ft(!0);try{n(e)}finally{ft(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=ja.bind(null,ws,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Ws().memoizedState=t},useState:function(t){var e=(t=ta(t)).queue,n=Wa.bind(null,ws,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Aa,useDeferredValue:function(t,e){return Ca(Ws(),t,e)},useTransition:function(){var t=ta(!1);return t=Ta.bind(null,ws,t.queue,!0,!1),Ws().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ws,r=Ws();if(ar){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===rc)throw Error(a(349));0!==(124&ac)||Ys(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,ba($s.bind(null,i,s,t),[t]),i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,s,n,e),null),n},useId:function(){var t=Ws(),e=rc.identifierPrefix;if(ar){var n=Zi;e="\xab"+e+"R"+(n=(Ji&~(1<<32-pt(Ji)-1)).toString(32)+n),0<(n=Es++)&&(e+="H"+n.toString(32)),e+="\xbb"}else e="\xab"+e+"r"+(n=Ts++).toString(32)+"\xbb";return t.memoizedState=e},useHostTransitionStatus:La,useFormState:ca,useActionState:ca,useOptimistic:function(t){var e=Ws();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Ba.bind(null,ws,!0,n),n.dispatch=e,[t,e]},useMemoCache:Hs,useCacheRefresh:function(){return Ws().memoizedState=Fa.bind(null,ws)}},Xa={readContext:Cr,use:Us,useCallback:Sa,useContext:Cr,useEffect:ya,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:_a,useMemo:Ea,useReducer:Gs,useRef:ga,useState:function(){return Gs(Vs)},useDebugValue:Aa,useDeferredValue:function(t,e){return Ma(zs(),_s.memoizedState,t,e)},useTransition:function(){var t=Gs(Vs)[0],e=zs().memoizedState;return["boolean"===typeof t?t:Bs(t),e]},useSyncExternalStore:Ks,useId:Ia,useHostTransitionStatus:La,useFormState:ua,useActionState:ua,useOptimistic:function(t,e){return ea(zs(),0,t,e)},useMemoCache:Hs,useCacheRefresh:Oa},Ka={readContext:Cr,use:Us,useCallback:Sa,useContext:Cr,useEffect:ya,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:_a,useMemo:Ea,useReducer:Xs,useRef:ga,useState:function(){return Xs(Vs)},useDebugValue:Aa,useDeferredValue:function(t,e){var n=zs();return null===_s?Ca(n,t,e):Ma(n,_s.memoizedState,t,e)},useTransition:function(){var t=Xs(Vs)[0],e=zs().memoizedState;return["boolean"===typeof t?t:Bs(t),e]},useSyncExternalStore:Ks,useId:Ia,useHostTransitionStatus:La,useFormState:fa,useActionState:fa,useOptimistic:function(t,e){var n=zs();return null!==_s?ea(n,0,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Hs,useCacheRefresh:Oa},Ya=null,Qa=0;function $a(t){var e=Qa;return Qa+=1,null===Ya&&(Ya=[]),Jr(Ya,t,e)}function Ja(t,e){e=e.props.ref,t.ref=void 0!==e?e:null}function Za(t,e){if(e.$$typeof===f)throw Error(a(525));throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function to(t){return(0,t._init)(t._payload)}function eo(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t){for(var e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(t,e){return(t=Wi(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=67108866,n):i:(e.flags|=67108866,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=67108866),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Hi(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===m?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===E&&to(s)===e.type)?(Ja(e=r(e,n.props),n),e.return=t,e):(Ja(e=Bi(n.type,n.key,n.props,null,t.mode,i),n),e.return=t,e)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Vi(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Ui(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e||"bigint"===typeof e)return(e=Hi(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case p:return Ja(n=Bi(e.type,e.key,e.props,null,t.mode,n),e),n.return=t,n;case g:return(e=Vi(e,t.mode,n)).return=t,e;case E:return d(t,e=(0,e._init)(e._payload),n)}if(D(e)||P(e))return(e=Ui(e,t.mode,n,null)).return=t,e;if("function"===typeof e.then)return d(t,$a(e),n);if(e.$$typeof===_)return d(t,Mr(t,e),n);Za(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===r?c(t,e,n,i):null;case g:return n.key===r?u(t,e,n,i):null;case E:return f(t,e,n=(r=n._init)(n._payload),i)}if(D(n)||P(n))return null!==r?null:h(t,e,n,i,null);if("function"===typeof n.then)return f(t,e,$a(n),i);if(n.$$typeof===_)return f(t,e,Mr(t,n),i);Za(t,n)}return null}function v(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case p:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case g:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case E:return v(t,e,n,i=(0,i._init)(i._payload),r)}if(D(i)||P(i))return h(e,t=t.get(n)||null,i,r,null);if("function"===typeof i.then)return v(t,e,n,$a(i),r);if(i.$$typeof===_)return v(t,e,n,Mr(e,i),r);Za(e,i)}return null}function b(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:t:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===m){if(7===c.tag){n(l,c.sibling),(h=r(c,u.props.children)).return=l,l=h;break t}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===E&&to(y)===c.type){n(l,c.sibling),Ja(h=r(c,u.props),u),h.return=l,l=h;break t}n(l,c);break}e(l,c),c=c.sibling}u.type===m?((h=Ui(u.props.children,l.mode,h,u.key)).return=l,l=h):(Ja(h=Bi(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return o(l);case g:t:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=r(c,u.children||[])).return=l,l=h;break t}n(l,c);break}e(l,c),c=c.sibling}(h=Vi(u,l.mode,h)).return=l,l=h}return o(l);case E:return b(l,c,u=(y=u._init)(u._payload),h)}if(D(u))return function(r,a,o,l){for(var c=null,u=null,h=a,p=a=0,g=null;null!==h&&p<o.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var m=f(r,h,o[p],l);if(null===m){null===h&&(h=g);break}t&&h&&null===m.alternate&&e(r,h),a=s(m,a,p),null===u?c=m:u.sibling=m,u=m,h=g}if(p===o.length)return n(r,h),ar&&tr(r,p),c;if(null===h){for(;p<o.length;p++)null!==(h=d(r,o[p],l))&&(a=s(h,a,p),null===u?c=h:u.sibling=h,u=h);return ar&&tr(r,p),c}for(h=i(h);p<o.length;p++)null!==(g=v(h,r,p,o[p],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?p:g.key),a=s(g,a,p),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach(function(t){return e(r,t)}),ar&&tr(r,p),c}(l,c,u,h);if(P(u)){if("function"!==typeof(y=P(u)))throw Error(a(150));return function(r,o,l,c){if(null==l)throw Error(a(151));for(var u=null,h=null,p=o,g=o=0,m=null,b=l.next();null!==p&&!b.done;g++,b=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var y=f(r,p,b.value,c);if(null===y){null===p&&(p=m);break}t&&p&&null===y.alternate&&e(r,p),o=s(y,o,g),null===h?u=y:h.sibling=y,h=y,p=m}if(b.done)return n(r,p),ar&&tr(r,g),u;if(null===p){for(;!b.done;g++,b=l.next())null!==(b=d(r,b.value,c))&&(o=s(b,o,g),null===h?u=b:h.sibling=b,h=b);return ar&&tr(r,g),u}for(p=i(p);!b.done;g++,b=l.next())null!==(b=v(p,r,g,b.value,c))&&(t&&null!==b.alternate&&p.delete(null===b.key?g:b.key),o=s(b,o,g),null===h?u=b:h.sibling=b,h=b);return t&&p.forEach(function(t){return e(r,t)}),ar&&tr(r,g),u}(l,c,u=y.call(u),h)}if("function"===typeof u.then)return b(l,c,$a(u),h);if(u.$$typeof===_)return b(l,c,Mr(l,u),h);Za(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=r(c,u)).return=l,l=h):(n(l,c),(h=Hi(u,l.mode,h)).return=l,l=h),o(l)):n(l,c)}return function(t,e,n,i){try{Qa=0;var r=b(t,e,n,i);return Ya=null,r}catch(nt){if(nt===qr||nt===Kr)throw nt;var s=Fi(29,nt,null,t.mode);return s.lanes=i,s.return=t,s}}}var no=eo(!0),io=eo(!1),ro=W(null),so=null;function ao(t){var e=t.alternate;B(uo,1&uo.current),B(ro,t),null===so&&(null===e||null!==ps.current||null!==e.memoizedState)&&(so=t)}function oo(t){if(22===t.tag){if(B(uo,uo.current),B(ro,t),null===so){var e=t.alternate;null!==e&&null!==e.memoizedState&&(so=t)}}else lo()}function lo(){B(uo,uo.current),B(ro,ro.current)}function co(t){z(ro),so===t&&(so=null),z(uo)}var uo=W(0);function ho(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vh(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function fo(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:d({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var po={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ic(),r=ss(i);r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=as(t,r,i))&&(Fc(e,t,i),os(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ic(),r=ss(i);r.tag=1,r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=as(t,r,i))&&(Fc(e,t,i),os(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ic(),i=ss(n);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=as(t,i,n))&&(Fc(e,t,n),os(e,t,n))}};function go(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!$n(n,i)||!$n(r,s))}function mo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&po.enqueueReplaceState(e,e.state,null)}function vo(t,e){var n=e;if("ref"in e)for(var i in n={},e)"ref"!==i&&(n[i]=e[i]);if(t=t.defaultProps)for(var r in n===e&&(n=d({},n)),t)void 0===n[r]&&(n[r]=t[r]);return n}var bo="function"===typeof reportError?reportError:function(t){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof t&&null!==t&&"string"===typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)};function yo(t){bo(t)}function wo(t){console.error(t)}function _o(t){bo(t)}function xo(t,e){try{(0,t.onUncaughtError)(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function ko(t,e,n){try{(0,t.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===e.tag?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ao(t,e,n){return(n=ss(n)).tag=3,n.payload={element:null},n.callback=function(){xo(t,e)},n}function So(t){return(t=ss(t)).tag=3,t}function Eo(t,e,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){ko(e,n,i)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(t.callback=function(){ko(e,n,i),"function"!==typeof r&&(null===Sc?Sc=new Set([this]):Sc.add(this));var t=i.stack;this.componentDidCatch(i.value,{componentStack:null!==t?t:""})})}var Co=Error(a(461)),Mo=!1;function To(t,e,n,i){e.child=null===t?io(e,null,n,i):no(e,t.child,n,i)}function Po(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return Er(e),i=Ns(t,e,n,a,s,r),o=Os(),null===t||Mo?(ar&&o&&nr(e),e.flags|=1,To(t,e,i,r),e.child):(Fs(t,e,r),Qo(t,e,r))}function Ro(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||ji(s)||void 0!==s.defaultProps||null!==n.compare?((t=Bi(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,No(t,e,s,i,r))}if(s=t.child,!$o(t,r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,i)&&t.ref===e.ref)return Qo(t,e,r)}return e.flags|=1,(t=Wi(s,i)).ref=e.ref,t.return=e,e.child=t}function No(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if($n(s,i)&&t.ref===e.ref){if(Mo=!1,e.pendingProps=i=s,!$o(t,r))return e.lanes=t.lanes,Qo(t,e,r);0!==(131072&t.flags)&&(Mo=!0)}}return Oo(t,e,n,i,r)}function Do(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode){if(0!==(128&e.flags)){if(i=null!==s?s.baseLanes|n:n,null!==t){for(r=e.child=t.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return Lo(t,e,i,n)}if(0===(536870912&n))return e.lanes=e.childLanes=536870912,Lo(t,e,null!==s?s.baseLanes|n:n,n);e.memoizedState={baseLanes:0,cachePool:null},null!==t&&Vr(0,null!==s?s.cachePool:null),null!==s?ms(e,s):vs(),oo(e)}else null!==s?(Vr(0,s.cachePool),ms(e,s),lo(),e.memoizedState=null):(null!==t&&Vr(0,null),vs(),lo());return To(t,e,r,n),e.child}function Lo(t,e,n,i){var r=Hr();return r=null===r?null:{parent:Dr._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},null!==t&&Vr(0,null),vs(),oo(e),null!==t&&Ar(t,e,i,!0),null}function Io(t,e){var n=e.ref;if(null===n)null!==t&&null!==t.ref&&(e.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==t&&t.ref===n||(e.flags|=4194816)}}function Oo(t,e,n,i,r){return Er(e),n=Ns(t,e,n,i,void 0,r),i=Os(),null===t||Mo?(ar&&i&&nr(e),e.flags|=1,To(t,e,n,r),e.child):(Fs(t,e,r),Qo(t,e,r))}function Fo(t,e,n,i,r,s){return Er(e),e.updateQueue=null,n=Ls(e,i,n,r),Ds(t),i=Os(),null===t||Mo?(ar&&i&&nr(e),e.flags|=1,To(t,e,n,s),e.child):(Fs(t,e,s),Qo(t,e,s))}function jo(t,e,n,i,r){if(Er(e),null===e.stateNode){var s=Ii,a=n.contextType;"object"===typeof a&&null!==a&&(s=Cr(a)),s=new n(i,s),e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=po,e.stateNode=s,s._reactInternals=e,(s=e.stateNode).props=i,s.state=e.memoizedState,s.refs={},is(e),a=n.contextType,s.context="object"===typeof a&&null!==a?Cr(a):Ii,s.state=e.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(fo(e,n,a,i),s.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&po.enqueueReplaceState(s,s.state,null),hs(e,i,s,r),us(),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308),i=!0}else if(null===t){s=e.stateNode;var o=e.memoizedProps,l=vo(n,o);s.props=l;var c=s.context,u=n.contextType;a=Ii,"object"===typeof u&&null!==u&&(a=Cr(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,o=e.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&mo(e,s,i,a),ns=!1;var d=e.memoizedState;s.state=d,hs(e,i,s,r),us(),c=e.memoizedState,o||d!==c||ns?("function"===typeof h&&(fo(e,n,h,i),c=e.memoizedState),(l=ns||go(e,n,l,i,d,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):("function"===typeof s.componentDidMount&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,rs(t,e),u=vo(n,a=e.memoizedProps),s.props=u,h=e.pendingProps,d=s.context,c=n.contextType,l=Ii,"object"===typeof c&&null!==c&&(l=Cr(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&mo(e,s,i,l),ns=!1,d=e.memoizedState,s.state=d,hs(e,i,s,r),us();var f=e.memoizedState;a!==h||d!==f||ns||null!==t&&null!==t.dependencies&&Sr(t.dependencies)?("function"===typeof o&&(fo(e,n,o,i),f=e.memoizedState),(u=ns||go(e,n,u,i,d,f,l)||null!==t&&null!==t.dependencies&&Sr(t.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),s.props=i,s.state=f,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Io(t,e),i=0!==(128&e.flags),s||i?(s=e.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),e.flags|=1,null!==t&&i?(e.child=no(e,t.child,null,r),e.child=no(e,null,n,r)):To(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Qo(t,e,r),t}function Wo(t,e,n,i){return pr(),e.flags|=256,To(t,e,n,i),e.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(t){return{baseLanes:t,cachePool:Gr()}}function Uo(t,e,n){return t=null!==t?t.childLanes&~n:0,e&&(t|=vc),t}function Ho(t,e,n){var i,r=e.pendingProps,s=!1,o=0!==(128&e.flags);if((i=o)||(i=(null===t||null!==t.memoizedState)&&0!==(2&uo.current)),i&&(s=!0,e.flags&=-129),i=0!==(32&e.flags),e.flags&=-33,null===t){if(ar){if(s?ao(e):lo(),ar){var l,c=sr;if(l=c){t:{for(l=c,c=lr;8!==l.nodeType;){if(!c){c=null;break t}if(null===(l=bh(l.nextSibling))){c=null;break t}}c=l}null!==c?(e.memoizedState={dehydrated:c,treeContext:null!==$i?{id:Ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},(l=Fi(18,null,null,0)).stateNode=c,l.return=e,e.child=l,rr=e,sr=null,l=!0):l=!1}l||ur(e)}if(null!==(c=e.memoizedState)&&null!==(c=c.dehydrated))return vh(c)?e.lanes=32:e.lanes=536870912,null;co(e)}return c=r.children,r=r.fallback,s?(lo(),c=Go({mode:"hidden",children:c},s=e.mode),r=Ui(r,s,n,null),c.return=e,r.return=e,c.sibling=r,e.child=c,(s=e.child).memoizedState=Bo(n),s.childLanes=Uo(t,i,n),e.memoizedState=zo,r):(ao(e),Vo(e,c))}if(null!==(l=t.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&e.flags?(ao(e),e.flags&=-257,e=qo(t,e,n)):null!==e.memoizedState?(lo(),e.child=t.child,e.flags|=128,e=null):(lo(),s=r.fallback,c=e.mode,r=Go({mode:"visible",children:r.children},c),(s=Ui(s,c,n,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,no(e,t.child,null,n),(r=e.child).memoizedState=Bo(n),r.childLanes=Uo(t,i,n),e.memoizedState=zo,e=s);else if(ao(e),vh(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var u=i.dgst;i=u,(r=Error(a(419))).stack="",r.digest=i,mr({value:r,source:null,stack:null}),e=qo(t,e,n)}else if(Mo||Ar(t,e,n,!1),i=0!==(n&t.childLanes),Mo||i){if(null!==(i=rc)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:Tt(r))&(i.suspendedLanes|n))?0:r)&&r!==l.retryLane))throw l.retryLane=r,Ni(t,r),Fc(i,t,r),Co;"$?"===c.data||Kc(),e=qo(t,e,n)}else"$?"===c.data?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,sr=bh(c.nextSibling),rr=e,ar=!0,or=null,lr=!1,null!==t&&(Yi[Qi++]=Ji,Yi[Qi++]=Zi,Yi[Qi++]=$i,Ji=t.id,Zi=t.overflow,$i=e),(e=Vo(e,r.children)).flags|=4096);return e}return s?(lo(),s=r.fallback,c=e.mode,u=(l=t.child).sibling,(r=Wi(l,{mode:"hidden",children:r.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Wi(u,s):(s=Ui(s,c,n,null)).flags|=2,s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,null===(c=t.child.memoizedState)?c=Bo(n):(null!==(l=c.cachePool)?(u=Dr._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Gr(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Uo(t,i,n),e.memoizedState=zo,r):(ao(e),t=(n=t.child).sibling,(n=Wi(n,{mode:"visible",children:r.children})).return=e,n.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n)}function Vo(t,e){return(e=Go({mode:"visible",children:e},t.mode)).return=t,t.child=e}function Go(t,e){return(t=Fi(22,t,null,e)).lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function qo(t,e,n){return no(e,t.child,null,n),(t=Vo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Xo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),xr(t.return,e,n)}function Ko(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Yo(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(To(t,e,i.children,n),0!==(2&(i=uo.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Xo(t,n,e);else if(19===t.tag)Xo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(B(uo,i),r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ho(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ko(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ho(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ko(e,!0,n,null,s);break;case"together":Ko(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),pc|=e.lanes,0===(n&e.childLanes)){if(null===t)return null;if(Ar(t,e,n,!1),0===(n&e.childLanes))return null}if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Wi(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Wi(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function $o(t,e){return 0!==(t.lanes&e)||!(null===(t=t.dependencies)||!Sr(t))}function Jo(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps)Mo=!0;else{if(!$o(t,n)&&0===(128&e.flags))return Mo=!1,function(t,e,n){switch(e.tag){case 3:q(e,e.stateNode.containerInfo),wr(0,Dr,t.memoizedState.cache),pr();break;case 27:case 5:K(e);break;case 4:q(e,e.stateNode.containerInfo);break;case 10:wr(0,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(null!==i)return null!==i.dehydrated?(ao(e),e.flags|=128,null):0!==(n&e.child.childLanes)?Ho(t,e,n):(ao(e),null!==(t=Qo(t,e,n))?t.sibling:null);ao(e);break;case 19:var r=0!==(128&t.flags);if((i=0!==(n&e.childLanes))||(Ar(t,e,n,!1),i=0!==(n&e.childLanes)),r){if(i)return Yo(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),B(uo,uo.current),i)break;return null;case 22:case 23:return e.lanes=0,Do(t,e,n);case 24:wr(0,Dr,t.memoizedState.cache)}return Qo(t,e,n)}(t,e,n);Mo=0!==(131072&t.flags)}else Mo=!1,ar&&0!==(1048576&e.flags)&&er(e,Ki,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((r=i.$$typeof)===x){e.tag=11,e=Po(null,e,i,t,n);break t}if(r===S){e.tag=14,e=Ro(null,e,i,t,n);break t}}throw e=N(i)||i,Error(a(306,e,""))}ji(i)?(t=vo(i,t),e.tag=1,e=jo(null,e,i,t,n)):(e.tag=0,e=Oo(null,e,i,t,n))}return e;case 0:return Oo(t,e,e.type,e.pendingProps,n);case 1:return jo(t,e,i=e.type,r=vo(i,e.pendingProps),n);case 3:t:{if(q(e,e.stateNode.containerInfo),null===t)throw Error(a(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,rs(t,e),hs(e,i,null,n);var o=e.memoizedState;if(i=o.cache,wr(0,Dr,i),i!==s.cache&&kr(e,[Dr],n,!0),us(),i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Wo(t,e,i,n);break t}if(i!==r){mr(r=Si(Error(a(424)),e)),e=Wo(t,e,i,n);break t}if(9===(t=e.stateNode.containerInfo).nodeType)t=t.body;else t="HTML"===t.nodeName?t.ownerDocument.body:t;for(sr=bh(t.firstChild),rr=e,ar=!0,or=null,lr=!0,n=io(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),i===r){e=Qo(t,e,n);break t}To(t,e,i,n)}e=e.child}return e;case 26:return Io(t,e),null===t?(n=Th(e.type,null,e.pendingProps,null))?e.memoizedState=n:ar||(n=e.type,t=e.pendingProps,(i=rh(V.current).createElement(n))[Dt]=e,i[Lt]=t,eh(i,n,t),qt(i),e.stateNode=i):e.memoizedState=Th(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return K(e),null===t&&ar&&(i=e.stateNode=_h(e.type,e.pendingProps,V.current),rr=e,lr=!0,r=sr,ph(e.type)?(yh=r,sr=bh(i.firstChild)):sr=r),To(t,e,e.pendingProps.children,n),Io(t,e),null===t&&(e.flags|=4194304),e.child;case 5:return null===t&&ar&&((r=i=sr)&&(null!==(i=function(t,e,n,i){for(;1===t.nodeType;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&("INPUT"!==t.nodeName||"hidden"!==t.type))break}else if(i){if(!t[zt])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if("stylesheet"===(s=t.getAttribute("rel"))&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||t.getAttribute("title")!==(null==r.title?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(((s=t.getAttribute("src"))!==(null==r.src?null:r.src)||t.getAttribute("type")!==(null==r.type?null:r.type)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else{if("input"!==e||"hidden"!==t.type)return t;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&t.getAttribute("name")===s)return t}if(null===(t=bh(t.nextSibling)))break}return null}(i,e.type,e.pendingProps,lr))?(e.stateNode=i,rr=e,sr=bh(i.firstChild),lr=!1,r=!0):r=!1),r||ur(e)),K(e),r=e.type,s=e.pendingProps,o=null!==t?t.memoizedProps:null,i=s.children,oh(r,s)?i=null:null!==o&&oh(r,o)&&(e.flags|=32),null!==e.memoizedState&&(r=Ns(t,e,Is,null,null,n),Yh._currentValue=r),Io(t,e),To(t,e,i,n),e.child;case 6:return null===t&&ar&&((t=n=sr)&&(null!==(n=function(t,e,n){if(""===e)return null;for(;3!==t.nodeType;){if((1!==t.nodeType||"INPUT"!==t.nodeName||"hidden"!==t.type)&&!n)return null;if(null===(t=bh(t.nextSibling)))return null}return t}(n,e.pendingProps,lr))?(e.stateNode=n,rr=e,sr=null,t=!0):t=!1),t||ur(e)),null;case 13:return Ho(t,e,n);case 4:return q(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=no(e,null,i,n):To(t,e,i,n),e.child;case 11:return Po(t,e,e.type,e.pendingProps,n);case 7:return To(t,e,e.pendingProps,n),e.child;case 8:case 12:return To(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,wr(0,e.type,i.value),To(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Er(e),i=i(r=Cr(r)),e.flags|=1,To(t,e,i,n),e.child;case 14:return Ro(t,e,e.type,e.pendingProps,n);case 15:return No(t,e,e.type,e.pendingProps,n);case 19:return Yo(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},null===t?((n=Go(i,n)).ref=e.ref,e.child=n,n.return=e,e=n):((n=Wi(t.child,i)).ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Do(t,e,n);case 24:return Er(e),i=Cr(Dr),null===t?(null===(r=Hr())&&(r=rc,s=Lr(),r.pooledCache=s,s.refCount++,null!==s&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},is(e),wr(0,Dr,r)):(0!==(t.lanes&n)&&(rs(t,e),hs(e,null,null,n),us()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,0===e.lanes&&(e.memoizedState=e.updateQueue.baseState=r),wr(0,Dr,i)):(i=s.cache,wr(0,Dr,i),i!==r.cache&&kr(e,[Dr],n,!0))),To(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(a(156,e.tag))}function Zo(t){t.flags|=4}function tl(t,e){if("stylesheet"!==e.type||0!==(4&e.state.loading))t.flags&=-16777217;else if(t.flags|=16777216,!Uh(e)){if(null!==(e=ro.current)&&((4194048&ac)===ac?null!==so:(62914560&ac)!==ac&&0===(536870912&ac)||e!==so))throw Zr=Yr,Xr;t.flags|=8192}}function el(t,e){null!==e&&(t.flags|=4),16384&t.flags&&(e=22!==t.tag?At():536870912,t.lanes|=e,bc|=e)}function nl(t,e){if(!ar)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function il(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rl(t,e,n){var i=e.pendingProps;switch(ir(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(e),null;case 3:return n=e.stateNode,i=null,null!==t&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),_r(Dr),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(fr(e)?Zo(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,gr())),il(e),null;case 26:return n=e.memoizedState,null===t?(Zo(e),null!==n?(il(e),tl(e,n)):(il(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Zo(e),il(e),tl(e,n)):(il(e),e.flags&=-16777217):(t.memoizedProps!==i&&Zo(e),il(e),e.flags&=-16777217),null;case 27:Y(e),n=V.current;var r=e.type;if(null!==t&&null!=e.stateNode)t.memoizedProps!==i&&Zo(e);else{if(!i){if(null===e.stateNode)throw Error(a(166));return il(e),null}t=U.current,fr(e)?hr(e):(t=_h(r,i,n),e.stateNode=t,Zo(e))}return il(e),null;case 5:if(Y(e),n=e.type,null!==t&&null!=e.stateNode)t.memoizedProps!==i&&Zo(e);else{if(!i){if(null===e.stateNode)throw Error(a(166));return il(e),null}if(t=U.current,fr(e))hr(e);else{switch(r=rh(V.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(t=r.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t="string"===typeof i.is?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t="string"===typeof i.is?r.createElement(n,{is:i.is}):r.createElement(n)}}t[Dt]=e,t[Lt]=i;t:for(r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;null===r.sibling;){if(null===r.return||r.return===e)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;t:switch(eh(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Zo(e)}}return il(e),e.flags&=-16777217,null;case 6:if(t&&null!=e.stateNode)t.memoizedProps!==i&&Zo(e);else{if("string"!==typeof i&&null===e.stateNode)throw Error(a(166));if(t=V.current,fr(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,null!==(r=rr))switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Dt]=e,(t=!!(t.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||$u(t.nodeValue,n)))||ur(e)}else(t=rh(t).createTextNode(i))[Dt]=e,e.stateNode=t}return il(e),null;case 13:if(i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(r=fr(e),null!==i&&null!==i.dehydrated){if(null===t){if(!r)throw Error(a(318));if(!(r=null!==(r=e.memoizedState)?r.dehydrated:null))throw Error(a(317));r[Dt]=e}else pr(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;il(e),r=!1}else r=gr(),null!==t&&null!==t.memoizedState&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&e.flags?(co(e),e):(co(e),null)}if(co(e),0!==(128&e.flags))return e.lanes=n,e;if(n=null!==i,t=null!==t&&null!==t.memoizedState,n){r=null,null!==(i=e.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),el(e,e.updateQueue),il(e),null;case 4:return X(),null===t&&Bu(e.stateNode.containerInfo),il(e),null;case 10:return _r(e.type),il(e),null;case 19:if(z(uo),null===(r=e.memoizedState))return il(e),null;if(i=0!==(128&e.flags),null===(s=r.rendering))if(i)nl(r,!1);else{if(0!==fc||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(s=ho(t))){for(e.flags|=128,nl(r,!1),t=s.updateQueue,e.updateQueue=t,el(e,t),e.subtreeFlags=0,t=n,n=e.child;null!==n;)zi(n,t),n=n.sibling;return B(uo,1&uo.current|2),e.child}t=t.sibling}null!==r.tail&&et()>kc&&(e.flags|=128,i=!0,nl(r,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ho(s))){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,el(e,t),nl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!ar)return il(e),null}else 2*et()-r.renderingStartTime>kc&&536870912!==n&&(e.flags|=128,i=!0,nl(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(t=r.last)?t.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=et(),e.sibling=null,t=uo.current,B(uo,i?1&t|2:1&t),e):(il(e),null);case 22:case 23:return co(e),bs(),i=null!==e.memoizedState,null!==t?null!==t.memoizedState!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?0!==(536870912&n)&&0===(128&e.flags)&&(il(e),6&e.subtreeFlags&&(e.flags|=8192)):il(e),null!==(n=e.updateQueue)&&el(e,n.retryQueue),n=null,null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),i=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),null!==t&&z(Ur),null;case 24:return n=null,null!==t&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),_r(Dr),il(e),null;case 25:case 30:return null}throw Error(a(156,e.tag))}function sl(t,e){switch(ir(e),e.tag){case 1:return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return _r(Dr),X(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 26:case 27:case 5:return Y(e),null;case 13:if(co(e),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));pr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return z(uo),null;case 4:return X(),null;case 10:return _r(e.type),null;case 22:case 23:return co(e),bs(),null!==t&&z(Ur),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 24:return _r(Dr),null;default:return null}}function al(t,e){switch(ir(e),e.tag){case 3:_r(Dr),X();break;case 26:case 27:case 5:Y(e);break;case 4:X();break;case 13:co(e);break;case 19:z(uo);break;case 10:_r(e.type);break;case 22:case 23:co(e),bs(),null!==t&&z(Ur);break;case 24:_r(Dr)}}function ol(t,e){try{var n=e.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){hu(e,e.return,o)}}function ll(t,e,n){try{var i=e.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(u){hu(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){hu(e,e.return,u)}}function cl(t){var e=t.updateQueue;if(null!==e){var n=t.stateNode;try{fs(e,n)}catch(i){hu(t,t.return,i)}}}function ul(t,e,n){n.props=vo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){hu(t,e,i)}}function hl(t,e){try{var n=t.ref;if(null!==n){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;default:i=t.stateNode}"function"===typeof n?t.refCleanup=n(i):n.current=i}}catch(r){hu(t,e,r)}}function dl(t,e){var n=t.ref,i=t.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){hu(t,e,r)}finally{t.refCleanup=null,null!=(t=t.alternate)&&(t.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){hu(t,e,s)}else n.current=null}function fl(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){hu(t,t.return,r)}}function pl(t,e,n){try{var i=t.stateNode;!function(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(p)||Zu(t,e,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,e));break;default:p!==d&&Zu(t,e,f,p,i,d)}}return void ve(t,o,l,c,u,h,s,r);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(s)||Zu(t,e,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=s||null!=c))switch(r){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Zu(t,e,r,s,i,c)}return e=l,n=o,i=p,void(null!=f?we(t,!!n,f,!1):!!i!==!!n&&(null!=e?we(t,!!n,e,!0):we(t,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(t,e,l,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(null!=r||null!=s))switch(o){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(a(91));break;default:r!==s&&Zu(t,e,o,r,i,s)}return void _e(t,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g))if("selected"===g)t.selected=!1;else Zu(t,e,g,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)t.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(t,e,c,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m)&&Zu(t,e,m,null,i,f);for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,e));break;default:Zu(t,e,u,f,i,p)}return;default:if(Ce(e)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!i.hasOwnProperty(v)&&th(t,e,v,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||th(t,e,h,f,i,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!i.hasOwnProperty(b)&&Zu(t,e,b,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||null==f&&null==p||Zu(t,e,d,f,i,p)}(i,t.type,n,e),i[Lt]=e}catch(r){hu(t,t.return,r)}}function gl(t){return 5===t.tag||3===t.tag||26===t.tag||27===t.tag&&ph(t.type)||4===t.tag}function ml(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||gl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(27===t.tag&&ph(t.type))continue t;if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function vl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(t,e):((e=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Ju));else if(4!==i&&(27===i&&ph(t.type)&&(n=t.stateNode,e=null),null!==(t=t.child)))for(vl(t,e,n),t=t.sibling;null!==t;)vl(t,e,n),t=t.sibling}function bl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&(27===i&&ph(t.type)&&(n=t.stateNode),null!==(t=t.child)))for(bl(t,e,n),t=t.sibling;null!==t;)bl(t,e,n),t=t.sibling}function yl(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);eh(e,i,n),e[Dt]=t,e[Lt]=n}catch(s){hu(t,t.return,s)}}var wl=!1,_l=!1,xl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Al=null;function Sl(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:jl(t,n),4&i&&ol(5,n);break;case 1:if(jl(t,n),4&i)if(t=n.stateNode,null===e)try{t.componentDidMount()}catch(a){hu(n,n.return,a)}else{var r=vo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&i&&cl(n),512&i&&hl(n,n.return);break;case 3:if(jl(t,n),64&i&&null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{fs(t,e)}catch(a){hu(n,n.return,a)}}break;case 27:null===e&&4&i&&yl(n);case 26:case 5:jl(t,n),null===e&&4&i&&fl(n),512&i&&hl(n,n.return);break;case 12:jl(t,n);break;case 13:jl(t,n),4&i&&Rl(t,n),64&i&&(null!==(t=n.memoizedState)&&(null!==(t=t.dehydrated)&&function(t,e){var n=t.ownerDocument;if("$?"!==t.data||"complete"===n.readyState)e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}(t,n=gu.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||wl)){e=null!==e&&null!==e.memoizedState||_l,r=wl;var s=_l;wl=i,(_l=e)&&!s?zl(t,n,0!==(8772&n.subtreeFlags)):jl(t,n),wl=r,_l=s}break;case 30:break;default:jl(t,n)}}function El(t){var e=t.alternate;null!==e&&(t.alternate=null,El(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&Bt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Cl=null,Ml=!1;function Tl(t,e,n){for(n=n.child;null!==n;)Pl(t,e,n),n=n.sibling}function Pl(t,e,n){if(dt&&"function"===typeof dt.onCommitFiberUnmount)try{dt.onCommitFiberUnmount(ht,n)}catch(s){}switch(n.tag){case 26:_l||dl(n,e),Tl(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:_l||dl(n,e);var i=Cl,r=Ml;ph(n.type)&&(Cl=n.stateNode,Ml=!1),Tl(t,e,n),xh(n.stateNode),Cl=i,Ml=r;break;case 5:_l||dl(n,e);case 6:if(i=Cl,r=Ml,Cl=null,Tl(t,e,n),Ml=r,null!==(Cl=i))if(Ml)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(a){hu(n,e,a)}else try{Cl.removeChild(n.stateNode)}catch(a){hu(n,e,a)}break;case 18:null!==Cl&&(Ml?(gh(9===(t=Cl).nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t,n.stateNode),Md(t)):gh(Cl,n.stateNode));break;case 4:i=Cl,r=Ml,Cl=n.stateNode.containerInfo,Ml=!0,Tl(t,e,n),Cl=i,Ml=r;break;case 0:case 11:case 14:case 15:_l||ll(2,n,e),_l||ll(4,n,e),Tl(t,e,n);break;case 1:_l||(dl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount&&ul(n,e,i)),Tl(t,e,n);break;case 21:Tl(t,e,n);break;case 22:_l=(i=_l)||null!==n.memoizedState,Tl(t,e,n),_l=i;break;default:Tl(t,e,n)}}function Rl(t,e){if(null===e.memoizedState&&(null!==(t=e.alternate)&&(null!==(t=t.memoizedState)&&null!==(t=t.dehydrated))))try{Md(t)}catch(n){hu(e,e.return,n)}}function Nl(t,e){var n=function(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return null===e&&(e=t.stateNode=new kl),e;case 22:return null===(e=(t=t.stateNode)._retryCache)&&(e=t._retryCache=new kl),e;default:throw Error(a(435,t.tag))}}(t);e.forEach(function(e){var i=mu.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}function Dl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],s=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Cl=l.stateNode,Ml=!1;break t}break;case 5:Cl=l.stateNode,Ml=!1;break t;case 3:case 4:Cl=l.stateNode.containerInfo,Ml=!0;break t}l=l.return}if(null===Cl)throw Error(a(160));Pl(s,o,r),Cl=null,Ml=!1,null!==(s=r.alternate)&&(s.return=null),r.return=null}if(13878&e.subtreeFlags)for(e=e.child;null!==e;)Il(e,t),e=e.sibling}var Ll=null;function Il(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dl(e,t),Ol(t),4&i&&(ll(3,t,t.return),ol(3,t),ll(5,t,t.return));break;case 1:Dl(e,t),Ol(t),512&i&&(_l||null===n||dl(n,n.return)),64&i&&wl&&(null!==(t=t.updateQueue)&&(null!==(i=t.callbacks)&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=Ll;if(Dl(e,t),Ol(t),512&i&&(_l||null===n||dl(n,n.return)),4&i){var s=null!==n?n.memoizedState:null;if(i=t.memoizedState,null===n)if(null===i)if(null===t.stateNode){t:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":(!(s=r.getElementsByTagName("title")[0])||s[zt]||s[Dt]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),eh(s,i,n),s[Dt]=t,qt(s),i=s;break t;case"link":var o=zh("link","href",r).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break e}eh(s=r.createElement(i),i,n),r.head.appendChild(s);break;case"meta":if(o=zh("meta","content",r).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break e}eh(s=r.createElement(i),i,n),r.head.appendChild(s);break;default:throw Error(a(468,i))}s[Dt]=t,qt(s),i=s}t.stateNode=i}else Bh(r,t.type,t.stateNode);else t.stateNode=Ih(r,i,t.memoizedProps);else s!==i?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===i?Bh(r,t.type,t.stateNode):Ih(r,i,t.memoizedProps)):null===i&&null!==t.stateNode&&pl(t,t.memoizedProps,n.memoizedProps)}break;case 27:Dl(e,t),Ol(t),512&i&&(_l||null===n||dl(n,n.return)),null!==n&&4&i&&pl(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Dl(e,t),Ol(t),512&i&&(_l||null===n||dl(n,n.return)),32&t.flags){r=t.stateNode;try{ke(r,"")}catch(p){hu(t,t.return,p)}}4&i&&null!=t.stateNode&&pl(t,r=t.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(xl=!0);break;case 6:if(Dl(e,t),Ol(t),4&i){if(null===t.stateNode)throw Error(a(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(p){hu(t,t.return,p)}}break;case 3:if(Wh=null,r=Ll,Ll=Sh(e.containerInfo),Dl(e,t),Ll=r,Ol(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Md(e.containerInfo)}catch(p){hu(t,t.return,p)}xl&&(xl=!1,Fl(t));break;case 4:i=Ll,Ll=Sh(t.stateNode.containerInfo),Dl(e,t),Ol(t),Ll=i;break;case 12:default:Dl(e,t),Ol(t);break;case 13:Dl(e,t),Ol(t),8192&t.child.flags&&null!==t.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=et()),4&i&&(null!==(i=t.updateQueue)&&(t.updateQueue=null,Nl(t,i)));break;case 22:r=null!==t.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,h=_l;if(wl=u||r,_l=h||c,Dl(e,t),_l=h,wl=u,Ol(t),8192&i)t:for(e=t.stateNode,e._visibility=r?-2&e._visibility:1|e._visibility,r&&(null===n||c||wl||_l||Wl(t)),n=null,e=t;;){if(5===e.tag||26===e.tag){if(null===n){c=n=e;try{if(s=c.stateNode,r)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){hu(c,c.return,p)}}}else if(6===e.tag){if(null===n){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(p){hu(c,c.return,p)}}}else if((22!==e.tag&&23!==e.tag||null===e.memoizedState||e===t)&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}4&i&&(null!==(i=t.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Nl(t,n))));break;case 19:Dl(e,t),Ol(t),4&i&&(null!==(i=t.updateQueue)&&(t.updateQueue=null,Nl(t,i)));case 30:case 21:}}function Ol(t){var e=t.flags;if(2&e){try{for(var n,i=t.return;null!==i;){if(gl(i)){n=i;break}i=i.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode;bl(t,ml(t),r);break;case 5:var s=n.stateNode;32&n.flags&&(ke(s,""),n.flags&=-33),bl(t,ml(t),s);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(t,ml(t),o);break;default:throw Error(a(161))}}catch(l){hu(t,t.return,l)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function Fl(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var e=t;Fl(e),5===e.tag&&1024&e.flags&&e.stateNode.reset(),t=t.sibling}}function jl(t,e){if(8772&e.subtreeFlags)for(e=e.child;null!==e;)Sl(t,e.alternate,e),e=e.sibling}function Wl(t){for(t=t.child;null!==t;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ll(4,e,e.return),Wl(e);break;case 1:dl(e,e.return);var n=e.stateNode;"function"===typeof n.componentWillUnmount&&ul(e,e.return,n),Wl(e);break;case 27:xh(e.stateNode);case 26:case 5:dl(e,e.return),Wl(e);break;case 22:null===e.memoizedState&&Wl(e);break;default:Wl(e)}t=t.sibling}}function zl(t,e,n){for(n=n&&0!==(8772&e.subtreeFlags),e=e.child;null!==e;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:zl(r,s,n),ol(4,s);break;case 1:if(zl(r,s,n),"function"===typeof(r=(i=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){hu(i,i.return,c)}if(null!==(r=(i=s).updateQueue)){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)ds(l[r],o)}catch(c){hu(i,i.return,c)}}n&&64&a&&cl(s),hl(s,s.return);break;case 27:yl(s);case 26:case 5:zl(r,s,n),n&&null===i&&4&a&&fl(s),hl(s,s.return);break;case 12:zl(r,s,n);break;case 13:zl(r,s,n),n&&4&a&&Rl(r,s);break;case 22:null===s.memoizedState&&zl(r,s,n),hl(s,s.return);break;case 30:break;default:zl(r,s,n)}e=e.sibling}}function Bl(t,e){var n=null;null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),t=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),t!==n&&(null!=t&&t.refCount++,null!=n&&Ir(n))}function Ul(t,e){t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Ir(t))}function Hl(t,e,n,i){if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Vl(t,e,n,i),e=e.sibling}function Vl(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Hl(t,e,n,i),2048&r&&ol(9,e);break;case 1:case 13:default:Hl(t,e,n,i);break;case 3:Hl(t,e,n,i),2048&r&&(t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Ir(t)));break;case 12:if(2048&r){Hl(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===e.alternate?"mount":"update",t.passiveEffectDuration,-0)}catch(l){hu(e,e.return,l)}}else Hl(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,null!==e.memoizedState?2&s._visibility?Hl(t,e,n,i):ql(t,e):2&s._visibility?Hl(t,e,n,i):(s._visibility|=2,Gl(t,e,n,i,0!==(10256&e.subtreeFlags))),2048&r&&Bl(a,e);break;case 24:Hl(t,e,n,i),2048&r&&Ul(e.alternate,e)}}function Gl(t,e,n,i,r){for(r=r&&0!==(10256&e.subtreeFlags),e=e.child;null!==e;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Gl(s,a,o,l,r),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Gl(s,a,o,l,r):ql(s,a):(u._visibility|=2,Gl(s,a,o,l,r)),r&&2048&c&&Bl(a.alternate,a);break;case 24:Gl(s,a,o,l,r),r&&2048&c&&Ul(a.alternate,a);break;default:Gl(s,a,o,l,r)}e=e.sibling}}function ql(t,e){if(10256&e.subtreeFlags)for(e=e.child;null!==e;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:ql(n,i),2048&r&&Bl(i.alternate,i);break;case 24:ql(n,i),2048&r&&Ul(i.alternate,i);break;default:ql(n,i)}e=e.sibling}}var Xl=8192;function Kl(t){if(t.subtreeFlags&Xl)for(t=t.child;null!==t;)Yl(t),t=t.sibling}function Yl(t){switch(t.tag){case 26:Kl(t),t.flags&Xl&&null!==t.memoizedState&&function(t,e,n){if(null===Hh)throw Error(a(475));var i=Hh;if("stylesheet"===e.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&e.state.loading)){if(null===e.instance){var r=Ph(n.href),s=t.querySelector(Rh(r));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(i.count++,i=Gh.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=s,void qt(s);s=t.ownerDocument||t,n=Nh(n),(r=kh.get(r))&&Fh(n,r),qt(s=s.createElement("link"));var o=s;o._p=new Promise(function(t,e){o.onload=t,o.onerror=e}),eh(s,"link",n),e.instance=s}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&0===(3&e.state.loading)&&(i.count++,e=Gh.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}(Ll,t.memoizedState,t.memoizedProps);break;case 5:default:Kl(t);break;case 3:case 4:var e=Ll;Ll=Sh(t.stateNode.containerInfo),Kl(t),Ll=e;break;case 22:null===t.memoizedState&&(null!==(e=t.alternate)&&null!==e.memoizedState?(e=Xl,Xl=16777216,Kl(t),Xl=e):Kl(t))}}function Ql(t){var e=t.alternate;if(null!==e&&null!==(t=e.child)){e.child=null;do{e=t.sibling,t.sibling=null,t=e}while(null!==t)}}function $l(t){var e=t.deletions;if(0!==(16&t.flags)){if(null!==e)for(var n=0;n<e.length;n++){var i=e[n];Al=i,tc(i,t)}Ql(t)}if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Jl(t),t=t.sibling}function Jl(t){switch(t.tag){case 0:case 11:case 15:$l(t),2048&t.flags&&ll(9,t,t.return);break;case 3:case 12:default:$l(t);break;case 22:var e=t.stateNode;null!==t.memoizedState&&2&e._visibility&&(null===t.return||13!==t.return.tag)?(e._visibility&=-3,Zl(t)):$l(t)}}function Zl(t){var e=t.deletions;if(0!==(16&t.flags)){if(null!==e)for(var n=0;n<e.length;n++){var i=e[n];Al=i,tc(i,t)}Ql(t)}for(t=t.child;null!==t;){switch((e=t).tag){case 0:case 11:case 15:ll(8,e,e.return),Zl(e);break;case 22:2&(n=e.stateNode)._visibility&&(n._visibility&=-3,Zl(e));break;default:Zl(e)}t=t.sibling}}function tc(t,e){for(;null!==Al;){var n=Al;switch(n.tag){case 0:case 11:case 15:ll(8,n,e);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ir(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Al=i;else t:for(n=t;null!==Al;){var r=(i=Al).sibling,s=i.return;if(El(i),i===n){Al=null;break t}if(null!==r){r.return=s,Al=r;break t}Al=s}}}var ec={getCacheForType:function(t){var e=Cr(Dr),n=e.data.get(t);return void 0===n&&(n=t(),e.data.set(t,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,ic=0,rc=null,sc=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,hc=!1,dc=0,fc=0,pc=0,gc=0,mc=0,vc=0,bc=0,yc=null,wc=null,_c=!1,xc=0,kc=1/0,Ac=null,Sc=null,Ec=0,Cc=null,Mc=null,Tc=0,Pc=0,Rc=null,Nc=null,Dc=0,Lc=null;function Ic(){if(0!==(2&ic)&&0!==ac)return ac&-ac;if(null!==L.T){return 0!==jr?jr:Pu()}return Rt()}function Oc(){0===vc&&(vc=0===(536870912&ac)||ar?kt():536870912);var t=ro.current;return null!==t&&(t.flags|=32),vc}function Fc(t,e,n){(t!==rc||2!==oc&&9!==oc)&&null===t.cancelPendingCommit||(Vc(t,0),Bc(t,ac,vc,!1)),Et(t,n),0!==(2&ic)&&t===rc||(t===rc&&(0===(2&ic)&&(gc|=n),4===fc&&Bc(t,ac,vc,!1)),ku(t))}function jc(t,e,n){if(0!==(6&ic))throw Error(a(327));for(var i=!n&&0===(124&e)&&0===(e&t.expiredLanes)||_t(t,e),r=i?function(t,e){var n=ic;ic|=2;var i=qc(),r=Xc();rc!==t||ac!==e?(Ac=null,kc=et()+500,Vc(t,e)):uc=_t(t,e);t:for(;;)try{if(0!==oc&&null!==sc){e=sc;var s=lc;e:switch(oc){case 1:oc=0,lc=null,tu(t,e,s,1);break;case 2:case 9:if(Qr(s)){oc=0,lc=null,Zc(e);break}e=function(){2!==oc&&9!==oc||rc!==t||(oc=7),ku(t)},s.then(e,e);break t;case 3:oc=7;break t;case 4:oc=5;break t;case 7:Qr(s)?(oc=0,lc=null,Zc(e)):(oc=0,lc=null,tu(t,e,s,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||Uh(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break e}}oc=0,lc=null,tu(t,e,s,5);break;case 6:oc=0,lc=null,tu(t,e,s,6);break;case 8:Hc(),fc=6;break t;default:throw Error(a(462))}}$c();break}catch(h){Gc(t,h)}return yr=br=null,L.H=i,L.A=r,ic=n,null!==sc?0:(rc=null,ac=0,Ti(),fc)}(t,e):Yc(t,e,!0),s=i;;){if(0===r){uc&&!i&&Bc(t,e,0,!1);break}if(n=t.current.alternate,!s||zc(n)){if(2===r){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&t.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){e=o;t:{var l=t;r=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=s,gc|=s,r=4;break t}s=wc,wc=r,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}r=o}if(s=!1,2!==r)continue}}if(1===r){Vc(t,0),Bc(t,e,0,!0);break}t:{switch(i=t,s=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&e)!==e)break;case 6:Bc(i,e,vc,!cc);break t;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&e)===e&&10<(r=xc+300-et())){if(Bc(i,e,vc,!cc),0!==wt(i,0,!0))break t;i.timeoutHandle=ch(Wc.bind(null,i,n,wc,Ac,_c,e,vc,gc,bc,cc,s,2,-0,0),r)}else Wc(i,n,wc,Ac,_c,e,vc,gc,bc,cc,s,0,-0,0)}break}r=Yc(t,e,!1),s=!1}ku(t)}function Wc(t,e,n,i,r,s,o,l,c,u,h,d,f,p){if(t.timeoutHandle=-1,(8192&(d=e.subtreeFlags)||16785408===(16785408&d))&&(Hh={stylesheets:null,count:0,unsuspend:Vh},Yl(e),null!==(d=function(){if(null===Hh)throw Error(a(475));var t=Hh;return t.stylesheets&&0===t.count&&Xh(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Xh(t,t.stylesheets),t.unsuspend){var e=t.unsuspend;t.unsuspend=null,e()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}())))return t.cancelPendingCommit=d(iu.bind(null,t,e,s,n,i,r,o,l,c,h,1,f,p)),void Bc(t,s,o,!u);iu(t,e,s,n,i,r,o,l,c)}function zc(t){for(var e=t;;){var n=e.tag;if((0===n||11===n||15===n)&&16384&e.flags&&(null!==(n=e.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Qn(s(),r))return!1}catch(a){return!1}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bc(t,e,n,i){e&=~mc,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-pt(r),a=1<<s;i[s]=-1,r&=~a}0!==n&&Ct(t,n,e)}function Uc(){return 0!==(6&ic)||(Au(0,!1),!1)}function Hc(){if(null!==sc){if(0===oc)var t=sc.return;else yr=br=null,js(t=sc),Ya=null,Qa=0,t=sc;for(;null!==t;)al(t.alternate,t),t=t.return;sc=null}}function Vc(t,e){var n=t.timeoutHandle;-1!==n&&(t.timeoutHandle=-1,uh(n)),null!==(n=t.cancelPendingCommit)&&(t.cancelPendingCommit=null,n()),Hc(),rc=t,sc=n=Wi(t.current,null),ac=e,oc=0,lc=null,cc=!1,uc=_t(t,e),hc=!1,bc=vc=mc=gc=pc=fc=0,wc=yc=null,_c=!1,0!==(8&e)&&(e|=32&e);var i=t.entangledLanes;if(0!==i)for(t=t.entanglements,i&=e;0<i;){var r=31-pt(i),s=1<<r;e|=t[r],i&=~s}return dc=e,Ti(),n}function Gc(t,e){ws=null,L.H=Ga,e===qr||e===Kr?(e=ts(),oc=3):e===Xr?(e=ts(),oc=4):oc=e===Co?8:null!==e&&"object"===typeof e&&"function"===typeof e.then?6:1,lc=e,null===sc&&(fc=1,xo(t,Si(e,t.current)))}function qc(){var t=L.H;return L.H=Ga,null===t?Ga:t}function Xc(){var t=L.A;return L.A=ec,t}function Kc(){fc=4,cc||(4194048&ac)!==ac&&null!==ro.current||(uc=!0),0===(134217727&pc)&&0===(134217727&gc)||null===rc||Bc(rc,ac,vc,!1)}function Yc(t,e,n){var i=ic;ic|=2;var r=qc(),s=Xc();rc===t&&ac===e||(Ac=null,Vc(t,e)),e=!1;var a=fc;t:for(;;)try{if(0!==oc&&null!==sc){var o=sc,l=lc;switch(oc){case 8:Hc(),a=6;break t;case 3:case 2:case 9:case 6:null===ro.current&&(e=!0);var c=oc;if(oc=0,lc=null,tu(t,o,l,c),n&&uc){a=0;break t}break;default:c=oc,oc=0,lc=null,tu(t,o,l,c)}}Qc(),a=fc;break}catch(u){Gc(t,u)}return e&&t.shellSuspendCounter++,yr=br=null,ic=i,L.H=r,L.A=s,null===sc&&(rc=null,ac=0,Ti()),a}function Qc(){for(;null!==sc;)Jc(sc)}function $c(){for(;null!==sc&&!Z();)Jc(sc)}function Jc(t){var e=Jo(t.alternate,t,dc);t.memoizedProps=t.pendingProps,null===e?eu(t):sc=e}function Zc(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Fo(n,e,e.pendingProps,e.type,void 0,ac);break;case 11:e=Fo(n,e,e.pendingProps,e.type.render,e.ref,ac);break;case 5:js(e);default:al(n,e),e=Jo(n,e=sc=zi(e,dc),dc)}t.memoizedProps=t.pendingProps,null===e?eu(t):sc=e}function tu(t,e,n,i){yr=br=null,js(e),Ya=null,Qa=0;var r=e.return;try{if(function(t,e,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(e=n.alternate)&&Ar(e,n,r,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?Kc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Yr?n.flags|=16384:(null===(e=n.updateQueue)?n.updateQueue=new Set([i]):e.add(i),du(t,i,r)),!1;case 22:return n.flags|=65536,i===Yr?n.flags|=16384:(null===(e=n.updateQueue)?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):null===(n=e.retryQueue)?e.retryQueue=new Set([i]):n.add(i),du(t,i,r)),!1}throw Error(a(435,n.tag))}return du(t,i,r),Kc(),!1}if(ar)return null!==(e=ro.current)?(0===(65536&e.flags)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==cr&&mr(Si(t=Error(a(422),{cause:i}),n))):(i!==cr&&mr(Si(e=Error(a(423),{cause:i}),n)),(t=t.current.alternate).flags|=65536,r&=-r,t.lanes|=r,i=Si(i,n),ls(t,r=Ao(t.stateNode,i,r)),4!==fc&&(fc=2)),!1;var s=Error(a(520),{cause:i});if(s=Si(s,n),null===yc?yc=[s]:yc.push(s),4!==fc&&(fc=2),null===e)return!0;i=Si(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,ls(n,t=Ao(n.stateNode,i,t)),!1;case 1:if(e=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof e.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,Eo(r=So(r),t,n,i),ls(n,r),!1}n=n.return}while(null!==n);return!1}(t,r,e,n,ac))return fc=1,xo(t,Si(n,t.current)),void(sc=null)}catch(s){if(null!==r)throw sc=r,s;return fc=1,xo(t,Si(n,t.current)),void(sc=null)}32768&e.flags?(ar||1===i?t=!0:uc||0!==(536870912&ac)?t=!1:(cc=t=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=ro.current)&&13===i.tag&&(i.flags|=16384))),nu(e,t)):eu(e)}function eu(t){var e=t;do{if(0!==(32768&e.flags))return void nu(e,cc);t=e.return;var n=rl(e.alternate,e,dc);if(null!==n)return void(sc=n);if(null!==(e=e.sibling))return void(sc=e);sc=e=t}while(null!==e);0===fc&&(fc=5)}function nu(t,e){do{var n=sl(t.alternate,t);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=t.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&null!==(t=t.sibling))return void(sc=t);sc=t=n}while(null!==t);fc=6,sc=null}function iu(t,e,n,i,r,s,o,l,c){t.cancelPendingCommit=null;do{lu()}while(0!==Ec);if(0!==(6&ic))throw Error(a(327));if(null!==e){if(e===t.current)throw Error(a(177));if(s=e.lanes|e.childLanes,function(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var u=31-pt(n),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==i&&Ct(t,i,0),0!==s&&0===r&&0!==t.tag&&(t.suspendedLanes|=s&~(a&~e))}(t,n,s|=Mi,o,l,c),t===rc&&(sc=rc=null,ac=0),Mc=e,Cc=t,Tc=n,Pc=s,Rc=r,Nc=i,0!==(10256&e.subtreeFlags)||0!==(10256&e.flags)?(t.callbackNode=null,t.callbackPriority=0,$(at,function(){return cu(),null})):(t.callbackNode=null,t.callbackPriority=0),i=0!==(13878&e.flags),0!==(13878&e.subtreeFlags)||i){i=L.T,L.T=null,r=I.p,I.p=2,o=ic,ic|=4;try{!function(t,e){if(t=t.containerInfo,nh=id,ni(t=ei(t))){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==s||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=o),f===s&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ih={focusedElem:t,selectionRange:n},id=!1,Al=e;null!==Al;)if(t=(e=Al).child,0!==(1024&e.subtreeFlags)&&null!==t)t.return=e,Al=t;else for(;null!==Al;){switch(s=(e=Al).alternate,t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==s){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var g=vo(n.type,r,(n.elementType,n.type));t=i.getSnapshotBeforeUpdate(g,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(v){hu(n,n.return,v)}}break;case 3:if(0!==(1024&t))if(9===(n=(t=e.stateNode.containerInfo).nodeType))mh(t);else if(1===n)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mh(t);break;default:t.textContent=""}break;default:if(0!==(1024&t))throw Error(a(163))}if(null!==(t=e.sibling)){t.return=e.return,Al=t;break}Al=e.return}}(t,e)}finally{ic=o,I.p=r,L.T=i}}Ec=1,ru(),su(),au()}}function ru(){if(1===Ec){Ec=0;var t=Cc,e=Mc,n=0!==(13878&e.flags);if(0!==(13878&e.subtreeFlags)||n){n=L.T,L.T=null;var i=I.p;I.p=2;var r=ic;ic|=4;try{Il(e,t);var s=ih,a=ei(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&ti(o.ownerDocument.documentElement,o)){if(null!==l&&ni(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=o.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var v=Zn(o,g),b=Zn(o,m);if(v&&b&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var y=h.createRange();y.setStart(v.node,v.offset),f.removeAllRanges(),g>m?(f.addRange(y),f.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),f.addRange(y))}}}}for(h=[],f=o;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<h.length;o++){var w=h[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}id=!!nh,ih=nh=null}finally{ic=r,I.p=i,L.T=n}}t.current=e,Ec=2}}function su(){if(2===Ec){Ec=0;var t=Cc,e=Mc,n=0!==(8772&e.flags);if(0!==(8772&e.subtreeFlags)||n){n=L.T,L.T=null;var i=I.p;I.p=2;var r=ic;ic|=4;try{Sl(t,e.alternate,e)}finally{ic=r,I.p=i,L.T=n}}Ec=3}}function au(){if(4===Ec||3===Ec){Ec=0,tt();var t=Cc,e=Mc,n=Tc,i=Nc;0!==(10256&e.subtreeFlags)||0!==(10256&e.flags)?Ec=5:(Ec=0,Mc=Cc=null,ou(t,t.pendingLanes));var r=t.pendingLanes;if(0===r&&(Sc=null),Pt(n),e=e.stateNode,dt&&"function"===typeof dt.onCommitFiberRoot)try{dt.onCommitFiberRoot(ht,e,void 0,128===(128&e.current.flags))}catch(l){}if(null!==i){e=L.T,r=I.p,I.p=2,L.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{L.T=e,I.p=r}}0!==(3&Tc)&&lu(),ku(t),r=t.pendingLanes,0!==(4194090&n)&&0!==(42&r)?t===Lc?Dc++:(Dc=0,Lc=t):Dc=0,Au(0,!1)}}function ou(t,e){0===(t.pooledCacheLanes&=e)&&(null!=(e=t.pooledCache)&&(t.pooledCache=null,Ir(e)))}function lu(t){return ru(),su(),au(),cu()}function cu(){if(5!==Ec)return!1;var t=Cc,e=Pc;Pc=0;var n=Pt(Tc),i=L.T,r=I.p;try{I.p=32>n?32:n,L.T=null,n=Rc,Rc=null;var s=Cc,o=Tc;if(Ec=0,Mc=Cc=null,Tc=0,0!==(6&ic))throw Error(a(331));var l=ic;if(ic|=4,Jl(s.current),Vl(s,s.current,o,n),ic=l,Au(0,!1),dt&&"function"===typeof dt.onPostCommitFiberRoot)try{dt.onPostCommitFiberRoot(ht,s)}catch(c){}return!0}finally{I.p=r,L.T=i,ou(t,e)}}function uu(t,e,n){e=Si(n,e),null!==(t=as(t,e=Ao(t.stateNode,e,2),2))&&(Et(t,2),ku(t))}function hu(t,e,n){if(3===t.tag)uu(t,t,n);else for(;null!==e;){if(3===e.tag){uu(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))){t=Si(n,t),null!==(i=as(e,n=So(2),2))&&(Eo(n,i,e,t),Et(i,2),ku(i));break}}e=e.return}}function du(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new nc;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(hc=!0,r.add(n),t=fu.bind(null,t,e,n),e.then(t,t))}function fu(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,rc===t&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>et()-xc?0===(2&ic)&&Vc(t,0):mc|=n,bc===ac&&(bc=0)),ku(t)}function pu(t,e){0===e&&(e=At()),null!==(t=Ni(t,e))&&(Et(t,e),ku(t))}function gu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),pu(t,n)}function mu(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(a(314))}null!==i&&i.delete(e),pu(t,n)}var vu=null,bu=null,yu=!1,wu=!1,_u=!1,xu=0;function ku(t){t!==bu&&null===t.next&&(null===bu?vu=bu=t:bu=bu.next=t),wu=!0,yu||(yu=!0,dh(function(){0!==(6&ic)?$(rt,Su):Eu()}))}function Au(t,e){if(!_u&&wu){_u=!0;do{for(var n=!1,i=vu;null!==i;){if(!e)if(0!==t){var r=i.pendingLanes;if(0===r)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-pt(42|t)+1)-1,s=201326741&(s&=r&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Tu(i,s))}else s=ac,0===(3&(s=wt(i,i===rc?s:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||_t(i,s)||(n=!0,Tu(i,s));i=i.next}}while(n);_u=!1}}function Su(){Eu()}function Eu(){wu=yu=!1;var t=0;0!==xu&&(function(){var t=window.event;if(t&&"popstate"===t.type)return t!==lh&&(lh=t,!0);return lh=null,!1}()&&(t=xu),xu=0);for(var e=et(),n=null,i=vu;null!==i;){var r=i.next,s=Cu(i,e);0===s?(i.next=null,null===n?vu=r:n.next=r,null===r&&(bu=n)):(n=i,(0!==t||0!==(3&s))&&(wu=!0)),i=r}Au(t,!1)}function Cu(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=-62914561&t.pendingLanes;0<s;){var a=31-pt(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=xt(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(n=ac,n=wt(t,t===(e=rc)?n:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle),i=t.callbackNode,0===n||t===e&&(2===oc||9===oc)||null!==t.cancelPendingCommit)return null!==i&&null!==i&&J(i),t.callbackNode=null,t.callbackPriority=0;if(0===(3&n)||_t(t,n)){if((e=n&-n)===t.callbackPriority)return e;switch(null!==i&&J(i),Pt(n)){case 2:case 8:n=st;break;case 32:default:n=at;break;case 268435456:n=lt}return i=Mu.bind(null,t),n=$(n,i),t.callbackPriority=e,t.callbackNode=n,e}return null!==i&&null!==i&&J(i),t.callbackPriority=2,t.callbackNode=null,2}function Mu(t,e){if(0!==Ec&&5!==Ec)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(lu()&&t.callbackNode!==n)return null;var i=ac;return 0===(i=wt(t,t===rc?i:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle))?null:(jc(t,i,e),Cu(t,et()),null!=t.callbackNode&&t.callbackNode===n?Mu.bind(null,t):null)}function Tu(t,e){if(lu())return null;jc(t,e,!0)}function Pu(){return 0===xu&&(xu=kt()),xu}function Ru(t){return null==t||"symbol"===typeof t||"boolean"===typeof t?null:"function"===typeof t?t:Pe(""+t)}function Nu(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}for(var Du=0;Du<xi.length;Du++){var Lu=xi[Du];ki(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}ki(pi,"onAnimationEnd"),ki(gi,"onAnimationIteration"),ki(mi,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(vi,"onTransitionRun"),ki(bi,"onTransitionStart"),ki(yi,"onTransitionCancel"),ki(wi,"onTransitionEnd"),Qt("onMouseEnter",["mouseout","mouseover"]),Qt("onMouseLeave",["mouseout","mouseover"]),Qt("onPointerEnter",["pointerout","pointerover"]),Qt("onPointerLeave",["pointerout","pointerover"]),Yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function Fu(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;s=o,r.currentTarget=c;try{s(r)}catch(u){bo(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;s=o,r.currentTarget=c;try{s(r)}catch(u){bo(u)}r.currentTarget=null,s=l}}}}function ju(t,e){var n=e[Ot];void 0===n&&(n=e[Ot]=new Set);var i=t+"__bubble";n.has(i)||(Uu(e,t,2,!1),n.add(i))}function Wu(t,e,n){var i=0;e&&(i|=4),Uu(n,t,i,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[zu]){t[zu]=!0,Xt.forEach(function(e){"selectionchange"!==e&&(Ou.has(e)||Wu(e,!1,t),Wu(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zu]||(e[zu]=!0,Wu("selectionchange",!1,e))}}function Uu(t,e,n,i){switch(ud(e)){case 2:var r=rd;break;case 8:r=sd;break;default:r=ad}n=r.bind(null,e,n,t),r=void 0,!ze||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hu(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===r)return;a=a.return}for(;null!==o;){if(null===(a=Ut(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){i=s=a;continue t}o=o.parentNode}}i=i.return}Fe(function(){var i=s,r=Ne(n),a=[];t:{var o=_i.get(t);if(void 0!==o){var c=tn,u=t;switch(t){case"keypress":if(0===qe(n))break t;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case pi:case gi:case mi:c=ln;break;case wi:c=yn;break;case"scroll":case"scrollend":c=nn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=_n}var h=0!==(4&e),d=!h&&("scroll"===t||"scrollend"===t),f=h?null!==o?o+"Capture":null:o;h=[];for(var p,g=i;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=je(g,f))&&h.push(Vu(g,m,p)),d)break;g=g.return}0<h.length&&(o=new c(o,u,null,n,r),a.push({event:o,listeners:h}))}}if(0===(7&e)){if(c="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===Re||!(u=n.relatedTarget||n.fromElement)||!Ut(u)&&!u[It])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(u=(u=n.relatedTarget||n.toElement)?Ut(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=i),c!==u)){if(h=sn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==t&&"pointerover"!==t||(h=vn,m="onPointerLeave",f="onPointerEnter",g="pointer"),d=null==c?o:Vt(c),p=null==u?o:Vt(u),(o=new h(m,g+"leave",c,n,r)).target=d,o.relatedTarget=p,m=null,Ut(r)===i&&((h=new h(f,g+"enter",u,n,r)).target=p,h.relatedTarget=d,m=h),d=m,c&&u)t:{for(f=u,g=0,p=h=c;p;p=qu(p))g++;for(p=0,m=f;m;m=qu(m))p++;for(;0<g-p;)h=qu(h),g--;for(;0<p-g;)f=qu(f),p--;for(;g--;){if(h===f||null!==f&&h===f.alternate)break t;h=qu(h),f=qu(f)}h=null}else h=null;null!==c&&Xu(a,o,c,h,!1),null!==u&&null!==d&&Xu(a,d,u,h,!0)}if("select"===(c=(o=i?Vt(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Wn;else if(Dn(o))if(zn)v=Yn;else{v=Xn;var b=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&Ce(i.elementType)&&(v=Wn):v=Kn;switch(v&&(v=v(t,i))?Ln(a,v,n,r):(b&&b(t,o,i),"focusout"===t&&i&&"number"===o.type&&null!=i.memoizedProps.value&&ye(o,"number",o.value)),b=i?Vt(i):window,t){case"focusin":(Dn(b)||"true"===b.contentEditable)&&(ri=b,si=i,ai=null);break;case"focusout":ai=si=ri=null;break;case"mousedown":oi=!0;break;case"contextmenu":case"mouseup":case"dragend":oi=!1,li(a,n,r);break;case"selectionchange":if(ii)break;case"keydown":case"keyup":li(a,n,r)}var y;if(kn)t:{switch(t){case"compositionstart":var w="onCompositionStart";break t;case"compositionend":w="onCompositionEnd";break t;case"compositionupdate":w="onCompositionUpdate";break t}w=void 0}else Rn?Tn(t,n)&&(w="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(w="onCompositionStart");w&&(En&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(y=Ge()):(He="value"in(Ue=r)?Ue.value:Ue.textContent,Rn=!0)),0<(b=Gu(i,w)).length&&(w=new un(w,t,null,n,r),a.push({event:w,listeners:b}),y?w.data=y:null!==(y=Pn(n))&&(w.data=y))),(y=Sn?function(t,e){switch(t){case"compositionend":return Pn(e);case"keypress":return 32!==e.which?null:(Mn=!0,Cn);case"textInput":return(t=e.data)===Cn&&Mn?null:t;default:return null}}(t,n):function(t,e){if(Rn)return"compositionend"===t||!kn&&Tn(t,e)?(t=Ge(),Ve=He=Ue=null,Rn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return En&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(w=Gu(i,"onBeforeInput")).length&&(b=new un("onBeforeInput","beforeinput",null,n,r),a.push({event:b,listeners:w}),b.data=y)),function(t,e,n,i,r){if("submit"===e&&n&&n.stateNode===r){var s=Ru((r[Lt]||null).action),a=i.submitter;a&&null!==(e=(e=a[Lt]||null)?Ru(e.formAction):a.getAttribute("formAction"))&&(s=e,a=null);var o=new tn("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==xu){var t=a?Nu(r,a):new FormData(r);Ra(n,{pending:!0,data:t,method:r.method,action:s},null,t)}}else"function"===typeof s&&(o.preventDefault(),t=a?Nu(r,a):new FormData(r),Ra(n,{pending:!0,data:t,method:r.method,action:s},s,t))},currentTarget:r}]})}}(a,t,i,n,r)}Fu(a,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gu(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=je(t,n))&&i.unshift(Vu(t,r,s)),null!=(r=je(t,e))&&i.push(Vu(t,r,s))),3===t.tag)return i;t=t.return}return[]}function qu(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag&&27!==t.tag);return t||null}function Xu(t,e,n,i,r){for(var s=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=je(n,s))&&a.unshift(Vu(n,c,l)):r||null!=(c=je(n,s))&&a.push(Vu(n,c,l))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Ku=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Qu(t){return("string"===typeof t?t:""+t).replace(Ku,"\n").replace(Yu,"")}function $u(t,e){return e=Qu(e),Qu(t)===e}function Ju(){}function Zu(t,e,n,i,r,s){switch(n){case"children":"string"===typeof i?"body"===e||"textarea"===e&&""===i||ke(t,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==e&&ke(t,""+i);break;case"className":ie(t,"class",i);break;case"tabIndex":ie(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ie(t,n,i);break;case"style":Ee(t,i,s);break;case"data":if("object"!==e){ie(t,"data",i);break}case"src":case"href":if(""===i&&("a"!==e||"href"!==n)){t.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){t.removeAttribute(n);break}i=Pe(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==e&&Zu(t,e,"name",r.name,r,null),Zu(t,e,"formEncType",r.formEncType,r,null),Zu(t,e,"formMethod",r.formMethod,r,null),Zu(t,e,"formTarget",r.formTarget,r,null)):(Zu(t,e,"encType",r.encType,r,null),Zu(t,e,"method",r.method,r,null),Zu(t,e,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){t.removeAttribute(n);break}i=Pe(""+i),t.setAttribute(n,i);break;case"onClick":null!=i&&(t.onclick=Ju);break;case"onScroll":null!=i&&ju("scroll",t);break;case"onScrollEnd":null!=i&&ju("scrollend",t);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":t.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){t.removeAttribute("xlink:href");break}n=Pe(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":!0===i?t.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ju("beforetoggle",t),ju("toggle",t),ne(t,"popover",i);break;case"xlinkActuate":re(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":re(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":re(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":re(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":re(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":re(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":re(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":re(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":re(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ne(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ne(t,n=Me.get(n)||n,i)}}function th(t,e,n,i,r,s){switch(n){case"style":Ee(t,i,s);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));t.innerHTML=n}}break;case"children":"string"===typeof i?ke(t,i):("number"===typeof i||"bigint"===typeof i)&&ke(t,""+i);break;case"onScroll":null!=i&&ju("scroll",t);break;case"onScrollEnd":null!=i&&ju("scrollend",t);break;case"onClick":null!=i&&(t.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Kt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),"function"===typeof(s=null!=(s=t[Lt]||null)?s[n]:null)&&t.removeEventListener(e,s,r),"function"!==typeof i)?n in t?t[n]=i:!0===i?t.setAttribute(n,""):ne(t,n,i):("function"!==typeof s&&null!==s&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r)))}}function eh(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ju("error",t),ju("load",t);var i,r=!1,s=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,e));default:Zu(t,e,i,o,n,null)}}return s&&Zu(t,e,"srcSet",n.srcSet,n,null),void(r&&Zu(t,e,"src",n.src,n,null));case"input":ju("invalid",t);var l=i=o=s=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":s=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,e));break;default:Zu(t,e,r,h,n,null)}}return be(t,i,l,c,u,o,s,!1),void de(t);case"select":for(s in ju("invalid",t),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:Zu(t,e,s,l,n,null)}return e=i,n=o,t.multiple=!!r,void(null!=e?we(t,!!r,e,!1):null!=n&&we(t,!!r,n,!0));case"textarea":for(o in ju("invalid",t),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Zu(t,e,o,l,n,null)}return xe(t,r,s,i),void de(t);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)t.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Zu(t,e,c,r,n,null);return;case"dialog":ju("beforetoggle",t),ju("toggle",t),ju("cancel",t),ju("close",t);break;case"iframe":case"object":ju("load",t);break;case"video":case"audio":for(r=0;r<Iu.length;r++)ju(Iu[r],t);break;case"image":ju("error",t),ju("load",t);break;case"details":ju("toggle",t);break;case"embed":case"source":case"link":ju("error",t),ju("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,e));default:Zu(t,e,u,r,n,null)}return;default:if(Ce(e)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&th(t,e,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&Zu(t,e,l,r,n,null))}var nh=null,ih=null;function rh(t){return 9===t.nodeType?t:t.ownerDocument}function sh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ah(t,e){if(0===t)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return 1===t&&"foreignObject"===e?0:t}function oh(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"bigint"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var lh=null;var ch="function"===typeof setTimeout?setTimeout:void 0,uh="function"===typeof clearTimeout?clearTimeout:void 0,hh="function"===typeof Promise?Promise:void 0,dh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof hh?function(t){return hh.resolve(null).then(t).catch(fh)}:ch;function fh(t){setTimeout(function(){throw t})}function ph(t){return"head"===t}function gh(t,e){var n=e,i=0,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(1&n&&xh(a.documentElement),2&n&&xh(a.body),4&n)for(xh(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[zt]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===r)return t.removeChild(s),void Md(e);r--}else"$"===n||"$?"===n||"$!"===n?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Md(e)}function mh(t){var e=t.firstChild;for(e&&10===e.nodeType&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),Bt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}t.removeChild(n)}}function vh(t){return"$!"===t.data||"$?"===t.data&&"complete"===t.ownerDocument.readyState}function bh(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e||"F!"===e||"F"===e)break;if("/$"===e)return null}}return t}var yh=null;function wh(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}function _h(t,e,n){switch(e=rh(n),t){case"html":if(!(t=e.documentElement))throw Error(a(452));return t;case"head":if(!(t=e.head))throw Error(a(453));return t;case"body":if(!(t=e.body))throw Error(a(454));return t;default:throw Error(a(451))}}function xh(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Bt(t)}var kh=new Map,Ah=new Set;function Sh(t){return"function"===typeof t.getRootNode?t.getRootNode():9===t.nodeType?t:t.ownerDocument}var Eh=I.d;I.d={f:function(){var t=Eh.f(),e=Uc();return t||e},r:function(t){var e=Ht(t);null!==e&&5===e.tag&&"form"===e.type?Da(e):Eh.r(t)},D:function(t){Eh.D(t),Mh("dns-prefetch",t,null)},C:function(t,e){Eh.C(t,e),Mh("preconnect",t,e)},L:function(t,e,n){Eh.L(t,e,n);var i=Ch;if(i&&t&&e){var r='link[rel="preload"][as="'+me(e)+'"]';"image"===e&&n&&n.imageSrcSet?(r+='[imagesrcset="'+me(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+me(n.imageSizes)+'"]')):r+='[href="'+me(t)+'"]';var s=r;switch(e){case"style":s=Ph(t);break;case"script":s=Dh(t)}kh.has(s)||(t=d({rel:"preload",href:"image"===e&&n&&n.imageSrcSet?void 0:t,as:e},n),kh.set(s,t),null!==i.querySelector(r)||"style"===e&&i.querySelector(Rh(s))||"script"===e&&i.querySelector(Lh(s))||(eh(e=i.createElement("link"),"link",t),qt(e),i.head.appendChild(e)))}},m:function(t,e){Eh.m(t,e);var n=Ch;if(n&&t){var i=e&&"string"===typeof e.as?e.as:"script",r='link[rel="modulepreload"][as="'+me(i)+'"][href="'+me(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Dh(t)}if(!kh.has(s)&&(t=d({rel:"modulepreload",href:t},e),kh.set(s,t),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lh(s)))return}eh(i=n.createElement("link"),"link",t),qt(i),n.head.appendChild(i)}}},X:function(t,e){Eh.X(t,e);var n=Ch;if(n&&t){var i=Gt(n).hoistableScripts,r=Dh(t),s=i.get(r);s||((s=n.querySelector(Lh(r)))||(t=d({src:t,async:!0},e),(e=kh.get(r))&&jh(t,e),qt(s=n.createElement("script")),eh(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}},S:function(t,e,n){Eh.S(t,e,n);var i=Ch;if(i&&t){var r=Gt(i).hoistableStyles,s=Ph(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Rh(s)))o.loading=5;else{t=d({rel:"stylesheet",href:t,"data-precedence":e},n),(n=kh.get(s))&&Fh(t,n);var l=a=i.createElement("link");qt(l),eh(l,"link",t),l._p=new Promise(function(t,e){l.onload=t,l.onerror=e}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Oh(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}},M:function(t,e){Eh.M(t,e);var n=Ch;if(n&&t){var i=Gt(n).hoistableScripts,r=Dh(t),s=i.get(r);s||((s=n.querySelector(Lh(r)))||(t=d({src:t,async:!0,type:"module"},e),(e=kh.get(r))&&jh(t,e),qt(s=n.createElement("script")),eh(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}};var Ch="undefined"===typeof document?null:document;function Mh(t,e,n){var i=Ch;if(i&&"string"===typeof e&&e){var r=me(e);r='link[rel="'+t+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Ah.has(r)||(Ah.add(r),t={rel:t,crossOrigin:n,href:e},null===i.querySelector(r)&&(eh(e=i.createElement("link"),"link",t),qt(e),i.head.appendChild(e)))}}function Th(t,e,n,i){var r,s,o,l,c=(c=V.current)?Sh(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(e=Ph(n.href),(i=(n=Gt(c).hoistableStyles).get(e))||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){t=Ph(n.href);var u=Gt(c).hoistableStyles,h=u.get(t);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(t,h),(u=c.querySelector(Rh(t)))&&!u._p&&(h.instance=u,h.state.loading=5),kh.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kh.set(t,n),u||(r=c,s=t,o=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eh(s,"link",o),qt(s),r.head.appendChild(s))))),e&&null===i)throw Error(a(528,""));return h}if(e&&null!==i)throw Error(a(529,""));return null;case"script":return e=n.async,"string"===typeof(n=n.src)&&e&&"function"!==typeof e&&"symbol"!==typeof e?(e=Dh(n),(i=(n=Gt(c).hoistableScripts).get(e))||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ph(t){return'href="'+me(t)+'"'}function Rh(t){return'link[rel="stylesheet"]['+t+"]"}function Nh(t){return d({},t,{"data-precedence":t.precedence,precedence:null})}function Dh(t){return'[src="'+me(t)+'"]'}function Lh(t){return"script[async]"+t}function Ih(t,e,n){if(e.count++,null===e.instance)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+me(n.href)+'"]');if(i)return e.instance=i,qt(i),i;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qt(i=(t.ownerDocument||t).createElement("style")),eh(i,"style",r),Oh(i,n.precedence,t),e.instance=i;case"stylesheet":r=Ph(n.href);var s=t.querySelector(Rh(r));if(s)return e.state.loading|=4,e.instance=s,qt(s),s;i=Nh(n),(r=kh.get(r))&&Fh(i,r),qt(s=(t.ownerDocument||t).createElement("link"));var o=s;return o._p=new Promise(function(t,e){o.onload=t,o.onerror=e}),eh(s,"link",i),e.state.loading|=4,Oh(s,n.precedence,t),e.instance=s;case"script":return s=Dh(n.src),(r=t.querySelector(Lh(s)))?(e.instance=r,qt(r),r):(i=n,(r=kh.get(s))&&jh(i=d({},n),r),qt(r=(t=t.ownerDocument||t).createElement("script")),eh(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(a(443,e.type))}else"stylesheet"===e.type&&0===(4&e.state.loading)&&(i=e.instance,e.state.loading|=4,Oh(i,n.precedence,t));return e.instance}function Oh(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=9===n.nodeType?n.head:n).insertBefore(t,e.firstChild)}function Fh(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.title&&(t.title=e.title)}function jh(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.integrity&&(t.integrity=e.integrity)}var Wh=null;function zh(t,e,n){if(null===Wh){var i=new Map,r=Wh=new Map;r.set(n,i)}else(i=(r=Wh).get(n))||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[zt]||s[Dt]||"link"===t&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function Bh(t,e,n){(t=t.ownerDocument||t).head.insertBefore(n,"title"===e?t.querySelector("head > title"):null)}function Uh(t){return"stylesheet"!==t.type||0!==(3&t.state.loading)}var Hh=null;function Vh(){}function Gh(){if(this.count--,0===this.count)if(this.stylesheets)Xh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}var qh=null;function Xh(t,e){t.stylesheets=null,null!==t.unsuspend&&(t.count++,qh=new Map,e.forEach(Kh,t),qh=null,Gh.call(t))}function Kh(t,e){if(!(4&e.state.loading)){var n=qh.get(t);if(n)var i=n.get(null);else{n=new Map,qh.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(r=e.instance).getAttribute("data-precedence"),(s=n.get(a)||i)===i&&n.set(null,r),n.set(a,r),this.count++,i=Gh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=9===t.nodeType?t.head:t).insertBefore(r,t.firstChild),e.state.loading|=4}}var Yh={$$typeof:_,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Qh(t,e,n,i,r,s,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=St(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.hiddenUpdates=St(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function $h(t,e,n,i,r,s,a,o,l,c,u,h){return t=new Qh(t,e,n,a,o,l,c,h),e=1,!0===s&&(e|=24),s=Fi(3,null,null,e),t.current=s,s.stateNode=t,(e=Lr()).refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},is(s),t}function Jh(t){return t?t=Ii:Ii}function Zh(t,e,n,i,r,s){r=Jh(r),null===i.context?i.context=r:i.pendingContext=r,(i=ss(e)).payload={element:n},null!==(s=void 0===s?null:s)&&(i.callback=s),null!==(n=as(t,i,e))&&(Fc(n,0,e),os(n,t,e))}function td(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ed(t,e){td(t,e),(t=t.alternate)&&td(t,e)}function nd(t){if(13===t.tag){var e=Ni(t,67108864);null!==e&&Fc(e,0,67108864),ed(t,67108864)}}var id=!0;function rd(t,e,n,i){var r=L.T;L.T=null;var s=I.p;try{I.p=2,ad(t,e,n,i)}finally{I.p=s,L.T=r}}function sd(t,e,n,i){var r=L.T;L.T=null;var s=I.p;try{I.p=8,ad(t,e,n,i)}finally{I.p=s,L.T=r}}function ad(t,e,n,i){if(id){var r=od(i);if(null===r)Hu(t,e,i,ld,n),yd(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return dd=wd(dd,t,e,n,i,r),!0;case"dragenter":return fd=wd(fd,t,e,n,i,r),!0;case"mouseover":return pd=wd(pd,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return gd.set(s,wd(gd.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,md.set(s,wd(md.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(yd(t,i),4&e&&-1<bd.indexOf(t)){for(;null!==r;){var s=Ht(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=yt(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-pt(a);o.entanglements[1]|=l,a&=~l}ku(s),0===(6&ic)&&(kc=et()+500,Au(0,!1))}}break;case 13:null!==(o=Ni(s,2))&&Fc(o,0,2),Uc(),ed(s,2)}if(null===(s=od(i))&&Hu(t,e,i,ld,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hu(t,e,i,null,n)}}function od(t){return cd(t=Ne(t))}var ld=null;function cd(t){if(ld=null,null!==(t=Ut(t))){var e=l(t);if(null===e)t=null;else{var n=e.tag;if(13===n){if(null!==(t=c(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ld=t,null}function ud(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case rt:return 2;case st:return 8;case at:case ot:return 32;case lt:return 268435456;default:return 32}default:return 32}}var hd=!1,dd=null,fd=null,pd=null,gd=new Map,md=new Map,vd=[],bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yd(t,e){switch(t){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(e.pointerId)}}function wd(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=Ht(e))&&nd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function _d(t){var e=Ut(t.target);if(null!==e){var n=l(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=c(n)))return t.blockedOn=e,void function(t,e){var n=I.p;try{return I.p=t,e()}finally{I.p=n}}(t.priority,function(){if(13===n.tag){var t=Ic();t=Tt(t);var e=Ni(n,t);null!==e&&Fc(e,0,t),ed(n,t)}})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function xd(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=od(t.nativeEvent);if(null!==n)return null!==(e=Ht(n))&&nd(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);Re=i,n.target.dispatchEvent(i),Re=null,e.shift()}return!0}function kd(t,e,n){xd(t)&&n.delete(e)}function Ad(){hd=!1,null!==dd&&xd(dd)&&(dd=null),null!==fd&&xd(fd)&&(fd=null),null!==pd&&xd(pd)&&(pd=null),gd.forEach(kd),md.forEach(kd)}function Sd(t,e){t.blockedOn===e&&(t.blockedOn=null,hd||(hd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ad)))}var Ed=null;function Cd(t){Ed!==t&&(Ed=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ed===t&&(Ed=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if("function"!==typeof i){if(null===cd(i||n))continue;break}var s=Ht(n);null!==s&&(t.splice(e,3),e-=3,Ra(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Md(t){function e(e){return Sd(e,t)}null!==dd&&Sd(dd,t),null!==fd&&Sd(fd,t),null!==pd&&Sd(pd,t),gd.forEach(e),md.forEach(e);for(var n=0;n<vd.length;n++){var i=vd[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<vd.length&&null===(n=vd[0]).blockedOn;)_d(n),null===n.blockedOn&&vd.shift();if(null!=(n=(t.ownerDocument||t).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Lt]||null;if("function"===typeof s)a||Cd(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Lt]||null)o=a.formAction;else if(null!==cd(r))continue}else o=a.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Cd(n)}}}function Td(t){this._internalRoot=t}function Pd(t){this._internalRoot=t}Pd.prototype.render=Td.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));Zh(e.current,Ic(),t,e,null,null)},Pd.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;Zh(t.current,2,null,t,null,null),Uc(),e[It]=null}},Pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rt();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vd.length&&0!==e&&e<vd[n].priority;n++);vd.splice(n,0,t),0===n&&_d(t)}};var Rd=r.version;if("19.1.1"!==Rd)throw Error(a(527,Rd,"19.1.1"));I.findDOMNode=function(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return t=function(t){var e=t.alternate;if(!e){if(null===(e=l(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return u(r),t;if(s===i)return u(r),e;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,i=s;break}if(c===i){o=!0,i=r,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,i=r;break}if(c===i){o=!0,i=s,n=r;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(e),t=null===(t=null!==t?h(t):null)?null:t.stateNode};var Nd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ht=Dd.inject(Nd),dt=Dd}catch(Id){}}e.createRoot=function(t,e){if(!o(t))throw Error(a(299));var n=!1,i="",r=yo,s=wo,l=_o;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onUncaughtError&&(r=e.onUncaughtError),void 0!==e.onCaughtError&&(s=e.onCaughtError),void 0!==e.onRecoverableError&&(l=e.onRecoverableError),void 0!==e.unstable_transitionCallbacks&&e.unstable_transitionCallbacks),e=$h(t,1,!1,null,0,n,i,r,s,l,0,null),t[It]=e.current,Bu(t),new Td(e)},e.hydrateRoot=function(t,e,n){if(!o(t))throw Error(a(299));var i=!1,r="",s=yo,l=wo,c=_o,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(e=$h(t,1,!0,e,0,i,r,s,l,c,0,u)).context=Jh(null),n=e.current,(r=ss(i=Tt(i=Ic()))).callback=null,as(n,r,i),n=i,e.current.lanes=n,Et(e,n),ku(e),t[It]=e.current,Bu(t),new Pd(e)},e.version="19.1.1"},43:(t,e,n)=>{t.exports=n(288)},288:(t,e)=>{var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function b(){}function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function A(t,e,i,r,s,a){return i=a.ref,{$$typeof:n,type:t,key:e,ref:void 0!==i?i:null,props:a}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var E=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function M(){}function T(t,e,r,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l,c,u=!1;if(null===t)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case n:case i:u=!0;break;case d:return T((u=t._init)(t._payload),e,r,s,a)}}if(u)return a=a(t),u=""===s?"."+C(t,0):s,_(a)?(r="",null!=u&&(r=u.replace(E,"$&/")+"/"),T(a,e,r,"",function(t){return t})):null!=a&&(S(a)&&(l=a,c=r+(null==a.key||t&&t.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+u,a=A(l.type,c,void 0,0,0,l.props)),e.push(a)),1;u=0;var h,p=""===s?".":s+":";if(_(t))for(var g=0;g<t.length;g++)u+=T(s=t[g],e,r,o=p+C(s,g),a);else if("function"===typeof(g=null===(h=t)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(t=g.call(t),g=0;!(s=t.next()).done;)u+=T(s=s.value,e,r,o=p+C(s,g++),a);else if("object"===o){if("function"===typeof t.then)return T(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"===typeof t.status?t.then(M,M):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(t),e,r,s,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(t,e,n){if(null==t)return t;var i=[],r=0;return T(t,i,"","",function(t){return e.call(n,t,r++)}),i}function R(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N="function"===typeof reportError?reportError:function(t){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof t&&null!==t&&"string"===typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)};function D(){}e.Children={map:P,forEach:function(t,e,n){P(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!S(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=y,e.StrictMode=s,e.Suspense=u,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,e.__COMPILER_RUNTIME={__proto__:null,c:function(t){return x.H.useMemoCache(t)}},e.cache=function(t){return function(){return t.apply(null,arguments)}},e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error("The argument must be a React element, but you passed "+t+".");var i=g({},t.props),r=t.key;if(null!=e)for(s in void 0!==e.ref&&void 0,void 0!==e.key&&(r=""+e.key),e)!k.call(e,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===e.ref||(i[s]=e[s]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return A(t.type,r,void 0,0,0,i)},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider=t,t.Consumer={$$typeof:o,_context:t},t},e.createElement=function(t,e,n){var i,r={},s=null;if(null!=e)for(i in void 0!==e.key&&(s=""+e.key),e)k.call(e,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=e[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps)void 0===r[i]&&(r[i]=a[i]);return A(t,s,void 0,0,0,r)},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:R}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=x.T,n={};x.T=n;try{var i=t(),r=x.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(D,N)}catch(s){N(s)}finally{x.T=e}},e.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},e.use=function(t){return x.H.use(t)},e.useActionState=function(t,e,n){return x.H.useActionState(t,e,n)},e.useCallback=function(t,e){return x.H.useCallback(t,e)},e.useContext=function(t){return x.H.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t,e){return x.H.useDeferredValue(t,e)},e.useEffect=function(t,e,n){var i=x.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)},e.useId=function(){return x.H.useId()},e.useImperativeHandle=function(t,e,n){return x.H.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return x.H.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return x.H.useLayoutEffect(t,e)},e.useMemo=function(t,e){return x.H.useMemo(t,e)},e.useOptimistic=function(t,e){return x.H.useOptimistic(t,e)},e.useReducer=function(t,e,n){return x.H.useReducer(t,e,n)},e.useRef=function(t){return x.H.useRef(t)},e.useState=function(t){return x.H.useState(t)},e.useSyncExternalStore=function(t,e,n){return x.H.useSyncExternalStore(t,e,n)},e.useTransition=function(){return x.H.useTransition()},e.version="19.1.1"},391:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4)},579:(t,e,n)=>{t.exports=n(799)},672:(t,e,n)=>{var i=n(43);function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(t,e){return"font"===t?"":"string"===typeof e?"use-credentials"===e?e:"":void 0}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)throw Error(r(299));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.flushSync=function(t){var e=l.T,n=a.p;try{if(l.T=null,a.p=2,t)return t()}finally{l.T=e,a.p=n,a.d.f()}},e.preconnect=function(t,e){"string"===typeof t&&(e?e="string"===typeof(e=e.crossOrigin)?"use-credentials"===e?e:"":void 0:e=null,a.d.C(t,e))},e.prefetchDNS=function(t){"string"===typeof t&&a.d.D(t)},e.preinit=function(t,e){if("string"===typeof t&&e&&"string"===typeof e.as){var n=e.as,i=c(n,e.crossOrigin),r="string"===typeof e.integrity?e.integrity:void 0,s="string"===typeof e.fetchPriority?e.fetchPriority:void 0;"style"===n?a.d.S(t,"string"===typeof e.precedence?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):"script"===n&&a.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:"string"===typeof e.nonce?e.nonce:void 0})}},e.preinitModule=function(t,e){if("string"===typeof t)if("object"===typeof e&&null!==e){if(null==e.as||"script"===e.as){var n=c(e.as,e.crossOrigin);a.d.M(t,{crossOrigin:n,integrity:"string"===typeof e.integrity?e.integrity:void 0,nonce:"string"===typeof e.nonce?e.nonce:void 0})}}else null==e&&a.d.M(t)},e.preload=function(t,e){if("string"===typeof t&&"object"===typeof e&&null!==e&&"string"===typeof e.as){var n=e.as,i=c(n,e.crossOrigin);a.d.L(t,n,{crossOrigin:i,integrity:"string"===typeof e.integrity?e.integrity:void 0,nonce:"string"===typeof e.nonce?e.nonce:void 0,type:"string"===typeof e.type?e.type:void 0,fetchPriority:"string"===typeof e.fetchPriority?e.fetchPriority:void 0,referrerPolicy:"string"===typeof e.referrerPolicy?e.referrerPolicy:void 0,imageSrcSet:"string"===typeof e.imageSrcSet?e.imageSrcSet:void 0,imageSizes:"string"===typeof e.imageSizes?e.imageSizes:void 0,media:"string"===typeof e.media?e.media:void 0})}},e.preloadModule=function(t,e){if("string"===typeof t)if(e){var n=c(e.as,e.crossOrigin);a.d.m(t,{as:"string"===typeof e.as&&"script"!==e.as?e.as:void 0,crossOrigin:n,integrity:"string"===typeof e.integrity?e.integrity:void 0})}else a.d.m(t)},e.requestFormReset=function(t){a.d.r(t)},e.unstable_batchedUpdates=function(t,e){return t(e)},e.useFormState=function(t,e,n){return l.H.useFormState(t,e,n)},e.useFormStatus=function(){return l.H.useHostTransitionStatus()},e.version="19.1.1"},799:(t,e)=>{var n=Symbol.for("react.transitional.element");function i(t,e,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==e.key&&(r=""+e.key),"key"in e)for(var s in i={},e)"key"!==s&&(i[s]=e[s]);else i=e;return e=i.ref,{$$typeof:n,type:t,key:r,ref:void 0!==e?e:null,props:i}}Symbol.for("react.fragment"),e.jsx=i,e.jsxs=i},853:(t,e,n)=>{t.exports=n(896)},896:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if(e.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,A||(A=!0,k());else{var e=i(u);null!==e&&N(x,e.startTime-t)}}var k,A=!1,S=-1,E=5,C=-1;function M(){return!!v||!(e.unstable_now()-C<E)}function T(){if(v=!1,A){var t=e.unstable_now();C=t;var n=!0;try{t:{g=!1,m&&(m=!1,y(S),S=-1),p=!0;var s=f;try{e:{for(_(t),d=i(c);null!==d&&!(d.expirationTime>t&&M());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"===typeof o){d.callback=o,_(t),n=!0;break e}d===i(c)&&r(c),_(t)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&N(x,l.startTime-t),n=!1}}break t}finally{d=null,f=s,p=!1}n=void 0}}finally{n?k():A=!1}}}if("function"===typeof w)k=function(){w(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=T,k=function(){R.postMessage(null)}}else k=function(){b(T,0)};function N(t,n){S=b(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(y(S),S=-1):m=!0,N(x,s-a))):(t.sortIndex=o,n(c,t),g||p||(g=!0,A||(A=!0,k()))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},950:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(672)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce((e,i)=>(n.f[i](t,e),e),[])),n.u=t=>"static/js/"+t+".fee8ba61.chunk.js",n.miniCssF=t=>{},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="introduction-to-statistics:";n.l=(i,r,s,a)=>{if(t[i])t[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+s),o.src=i),t[i]=[r];var d=(e,n)=>{o.onerror=o.onload=null,clearTimeout(f);var r=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(t=>t(n)),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/introduction-to-statistics/",(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=t[e]=[n,i]);i.push(r[2]=s);var a=n.p+n.u(e),o=new Error;n.l(a,i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some(e=>0!==t[e])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(e&&e(i);c<a.length;c++)s=a[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkintroduction_to_statistics=self.webpackChunkintroduction_to_statistics||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var i=n(43),r=n(391),s=n(579);const a=()=>{const[t,e]=(0,i.useState)(localStorage.getItem("theme")||"light");(0,i.useEffect)(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)},[t]);return(0,s.jsx)("button",{className:"px-4 py-2 rounded",onClick:()=>{e("light"===t?"dark":"light")},children:"light"===t?"\ud83c\udf18":"\ud83c\udf14"})},o=n.p+"static/media/ns.87eea7d8da919477a49e.png",l=t=>{let{title:e,children:n}=t;return(0,s.jsxs)("section",{className:"bg-card p-8 rounded-xl shadow-lg",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-card-foreground mb-6",children:e}),(0,s.jsx)("div",{className:"prose dark:prose-invert text-foreground max-w-none",children:n})]})},c=t=>{let{navigateTo:e}=t;const[n,r]=(0,i.useState)({x:0,y:0}),[a,c]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const t=t=>{r({x:t.clientX,y:t.clientY}),document.documentElement.style.setProperty("--mouse-x","".concat(t.clientX,"px")),document.documentElement.style.setProperty("--mouse-y","".concat(t.clientY,"px"))};return window.addEventListener("mousemove",t),()=>window.removeEventListener("mousemove",t)},[]);const u=()=>(0,s.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((t,e)=>(0,s.jsx)("div",{className:"absolute w-1 h-1 bg-blue-300/30 dark:bg-blue-800/30 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(2+2*Math.random(),"s")}},e))}),h=()=>(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 border-2 border-blue-300/20 dark:border-blue-900/20 rounded-full animate-bounce",style:{animationDuration:"3s"}}),(0,s.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-purple-200/30 dark:bg-purple-800/30 rounded-lg animate-pulse",style:{animationDuration:"2.5s"}}),(0,s.jsx)("div",{className:"absolute bottom-32 left-1/4 w-12 h-12 border-2 border-green-300/25 dark:border-green-900/25 transform rotate-45 animate-spin",style:{animationDuration:"8s"}}),(0,s.jsx)("div",{className:"absolute bottom-20 right-1/3 w-24 h-24 border-2 border-pink-300/20 dark:border-pink-900/20 rounded-full animate-ping",style:{animationDuration:"4s"}})]});return(0,s.jsxs)(l,{children:[(0,s.jsx)("div",{className:"radial-gradient-overlay"}),(0,s.jsx)(u,{}),(0,s.jsx)(h,{}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[length:40px_40px] bg-repeat",style:{backgroundImage:"\n             linear-gradient(to right, var(--grid-color), transparent 1px),\n             linear-gradient(to bottom, var(--grid-color), transparent 1px)\n           "}}),(0,s.jsx)("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4",children:(0,s.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-6xl md:text-7xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 dark:from-blue-400 dark:via-purple-400 dark:to-blue-500 bg-clip-text text-transparent mb-4 animate-fade-in",children:"Welcome"}),(0,s.jsx)("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-indigo-600 via-blue-600 to-purple-600 dark:from-indigo-400 dark:via-blue-400 dark:to-purple-500 bg-clip-text text-transparent animate-fade-in-delay",children:"Introduction to Statistics"}),(0,s.jsx)("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 dark:from-blue-400 dark:to-purple-400 mx-auto mt-6 rounded-full animate-expand"})]}),(0,s.jsx)("p",{className:"text-xl md:text-2xl mb-8 animate-fade-in-delay-2 leading-relaxed text-foreground",children:"Learn the foundations of statistics with a focus on educational research"}),(0,s.jsxs)("div",{className:"mb-8 relative group animate-fade-in-delay-3",children:[(0,s.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-2xl blur-xl opacity-20 group-hover:opacity-40 transition-all duration-300 transform group-hover:scale-105"}),(0,s.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-2xl blur-xl opacity-20 group-hover:opacity-40 transition-opacity duration-300"}),(0,s.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-2xl border border-white/20 dark:border-gray-700/20 group-hover:shadow-3xl transition-all duration-300 transform group-hover:scale-102",children:(0,s.jsx)("div",{className:"flex flex-col items-center",children:(0,s.jsx)("img",{src:o,alt:"Statistics Illustration",className:"mx-auto mb-6 w-1/5 md:w-1/4 rounded-lg shadow-lg"})})})]}),(0,s.jsx)("div",{className:"mb-12 animate-fade-in-delay-4",children:(0,s.jsxs)("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto leading-relaxed",children:[(0,s.jsx)("a",{href:"https://www.uv.uio.no/isp/",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium transition-colors",children:"Institute of Special Needs Education"}),(0,s.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,s.jsx)("a",{href:"https://www.uv.uio.no/english/",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium transition-colors",children:"Faculty of Educational Sciences"}),(0,s.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,s.jsx)("a",{href:"https://www.uio.no/english/",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium transition-colors",children:"University of Oslo"})]})}),(0,s.jsx)("div",{className:"animate-fade-in-delay-5",children:(0,s.jsxs)("button",{onClick:()=>e("research-questions"),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:"group relative overflow-hidden bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-700 to-purple-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"relative flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"Get Started"}),(0,s.jsx)("div",{className:"transition-transform duration-300 ".concat(a?"translate-x-1":""),children:"\u2192"})]})]})}),(0,s.jsx)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in-delay-5",children:[{icon:"\ud83d\udcda",title:"Interactive Learning",desc:"Engage with dynamic content"},{icon:"\ud83d\udd2c",title:"Research Focus",desc:"Applied to educational research"},{icon:"\ud83d\udcc8",title:"Statistical Foundation",desc:"Build core statistical skills"}].map((t,e)=>(0,s.jsx)("div",{className:"group p-0.5 rounded-xl bg-gradient-to-br from-blue-200/50 via-purple-200/50 to-pink-200/50 dark:from-blue-800/50 dark:via-purple-800/50 dark:to-pink-800/50 hover:from-blue-300 hover:to-purple-300 dark:hover:from-blue-700 dark:to-purple-700 transition-all duration-300",children:(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-6 h-full transition-all duration-300 transform group-hover:scale-[1.02]",children:[(0,s.jsx)("div",{className:"text-3xl mb-3",children:t.icon}),(0,s.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-2",children:t.title}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:t.desc})]})},e))})]})}),(0,s.jsx)("style",{children:'\n  /* Define CSS variables for the radial gradient and grid color */\n  :root {\n    --mouse-x: 50%;\n    --mouse-y: 50%;\n    --grid-color: rgba(59, 130, 246, 0.05); /* Light blue for light mode */\n    --light-gradient: radial-gradient(circle at var(--mouse-x) var(--mouse-y), \n                             rgba(59, 130, 246, 0.1) 0%, \n                             rgba(147, 51, 234, 0.05) 25%, \n                             rgba(16, 185, 129, 0.05) 50%, \n                             transparent 70%);\n    --dark-gradient: radial-gradient(circle at var(--mouse-x) var(--mouse-y), \n                            rgba(59, 130, 246, 0.15) 0%, \n                            rgba(147, 51, 234, 0.1) 25%, \n                            rgba(16, 185, 129, 0.1) 50%, \n                            transparent 70%);\n  }\n\n  [data-theme="dark"] {\n    --grid-color: rgba(30, 58, 138, 0.1); /* Darker/muted blue for dark mode */\n  }\n\n  .radial-gradient-overlay {\n    position: absolute;\n    inset: 0;\n    transition: background 0.3s ease-out;\n    background: var(--light-gradient);\n  }\n\n  [data-theme="dark"] .radial-gradient-overlay {\n    background: var(--dark-gradient);\n  }\n\n  @keyframes fade-in {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  @keyframes expand {\n    from { width: 0; }\n    to { width: 8rem; }\n  }\n  \n  .animate-fade-in { animation: fade-in 0.8s ease-out forwards; }\n  .animate-fade-in-delay { animation: fade-in 0.8s ease-out 0.2s forwards; }\n  .animate-fade-in-delay-2 { animation: fade-in 0.8s ease-out 0.4s forwards; }\n  .animate-fade-in-delay-3 { animation: fade-in 0.8s ease-out 0.6s forwards; }\n  .animate-fade-in-delay-4 { animation: fade-in 0.8s ease-out 0.8s forwards; }\n  .animate-fade-in-delay-5 { animation: fade-in 0.8s ease-out 1s forwards; }\n  .animate-expand { animation: expand 0.8s ease-out 0.4s forwards; }\n'})]})};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function h(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}function d(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function g(t,e){this.v=t,this.k=e}function m(t){return new g(t,0)}function v(t){return function(){return new b(t.apply(this,arguments))}}function b(t){var e,n;function i(e,n){try{var s=t[e](n),a=s.value,o=a instanceof g;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===e?"return":"next";if(!a.k||n.done)return i(l,n);n=t[l](n).value}r(s.done?"return":"normal",n)},function(t){i("throw",t)})}catch(t){r("throw",t)}}function r(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise(function(s,a){var o={key:t,arg:r,resolve:s,reject:a,next:null};n?n=n.next=o:(e=n=o,i(t,r))})},"function"!=typeof t.return&&(this.return=void 0)}function y(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new w(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function w(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return w=function(t){this.s=t,this.n=t.next},w.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new w(t)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(t){return this._invoke("next",t)},b.prototype.throw=function(t){return this._invoke("throw",t)},b.prototype.return=function(t){return this._invoke("return",t)};var _,x=Object.create,k=Object.defineProperty,A=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty,M=(_=function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(_,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):_),T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),P=(t,e,n)=>(n=null!=t?x(E(t)):{},((t,e,n,i)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let r of S(e))!C.call(t,r)&&r!==n&&k(t,r,{get:()=>e[r],enumerable:!(i=A(e,r))||i.enumerable});return t})(!e&&t&&t.__esModule?n:k(n,"default",{value:t,enumerable:!0}),t)),R=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},N=(t,e,n)=>(R(t,e,"read from private field"),n?n.call(t):e.get(t)),D=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},L=(t,e,n,i)=>(R(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),I=(t,e,n)=>(R(t,e,"access private method"),n),O=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUint64=t.getInt64=t.setInt64=t.setUint64=t.UINT32_MAX=void 0,t.UINT32_MAX=4294967295,t.setUint64=function(t,e,n){let i=n/4294967296,r=n;t.setUint32(e,i),t.setUint32(e+4,r)},t.setInt64=function(t,e,n){let i=Math.floor(n/4294967296),r=n;t.setUint32(e,i),t.setUint32(e+4,r)},t.getInt64=function(t,e){return 4294967296*t.getInt32(e)+t.getUint32(e+4)},t.getUint64=function(t,e){return 4294967296*t.getUint32(e)+t.getUint32(e+4)}}),F=T(t=>{var e,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.utf8DecodeTD=t.TEXT_DECODER_THRESHOLD=t.utf8DecodeJs=t.utf8EncodeTE=t.TEXT_ENCODER_THRESHOLD=t.utf8EncodeJs=t.utf8Count=void 0;var r=O(),s=(typeof process>"u"||"never"!==(null===(e=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/introduction-to-statistics",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.TEXT_ENCODING))&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";t.utf8Count=function(t){let e=t.length,n=0,i=0;for(;i<e;){let r=t.charCodeAt(i++);if(4294967168&r)if(4294965248&r){if(r>=55296&&r<=56319&&i<e){let e=t.charCodeAt(i);56320===(64512&e)&&(++i,r=((1023&r)<<10)+(1023&e)+65536)}n+=4294901760&r?4:3}else n+=2;else n++}return n},t.utf8EncodeJs=function(t,e,n){let i=t.length,r=n,s=0;for(;s<i;){let n=t.charCodeAt(s++);if(4294967168&n){if(4294965248&n){if(n>=55296&&n<=56319&&s<i){let e=t.charCodeAt(s);56320===(64512&e)&&(++s,n=((1023&n)<<10)+(1023&e)+65536)}4294901760&n?(e[r++]=n>>18&7|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128):(e[r++]=n>>12&15|224,e[r++]=n>>6&63|128)}else e[r++]=n>>6&31|192;e[r++]=63&n|128}else e[r++]=n}};var a=s?new TextEncoder:void 0;t.TEXT_ENCODER_THRESHOLD=s?typeof process<"u"&&"force"!==(null===(n=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/introduction-to-statistics",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===n?void 0:n.TEXT_ENCODING)?200:0:r.UINT32_MAX,t.utf8EncodeTE=null!=a&&a.encodeInto?function(t,e,n){a.encodeInto(t,e.subarray(n))}:function(t,e,n){e.set(a.encode(t),n)};t.utf8DecodeJs=function(t,e,n){let i=e,r=i+n,s=[],a="";for(;i<r;){let e=t[i++];if(128&e)if(192===(224&e)){let n=63&t[i++];s.push((31&e)<<6|n)}else if(224===(240&e)){let n=63&t[i++],r=63&t[i++];s.push((31&e)<<12|n<<6|r)}else if(240===(248&e)){let n=(7&e)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++];n>65535&&(n-=65536,s.push(n>>>10&1023|55296),n=56320|1023&n),s.push(n)}else s.push(e);else s.push(e);s.length>=4096&&(a+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(a+=String.fromCharCode(...s)),a};var o=s?new TextDecoder:null;t.TEXT_DECODER_THRESHOLD=s?typeof process<"u"&&"force"!==(null===(i=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/introduction-to-statistics",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===i?void 0:i.TEXT_DECODER)?200:0:r.UINT32_MAX,t.utf8DecodeTD=function(t,e,n){let i=t.subarray(e,e+n);return o.decode(i)}}),j=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtData=void 0;t.ExtData=class{constructor(t,e){this.type=t,this.data=e}}}),W=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecodeError=void 0;var e=class extends Error{constructor(t){super(t);let n=Object.create(e.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:e.name})}};t.DecodeError=e}),z=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.timestampExtension=t.decodeTimestampExtension=t.decodeTimestampToTimeSpec=t.encodeTimestampExtension=t.encodeDateToTimeSpec=t.encodeTimeSpecToTimestamp=t.EXT_TIMESTAMP=void 0;var e=W(),n=O();t.EXT_TIMESTAMP=-1;function i(t){let{sec:e,nsec:i}=t;if(e>=0&&i>=0&&e<=17179869183){if(0===i&&e<=4294967295){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}{let t=e/4294967296,n=4294967295&e,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,i<<2|3&t),s.setUint32(4,n),r}}{let t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,i),(0,n.setInt64)(r,4,e),t}}function r(t){let e=t.getTime(),n=Math.floor(e/1e3),i=1e6*(e-1e3*n),r=Math.floor(i/1e9);return{sec:n+r,nsec:i-1e9*r}}function s(t){if(t instanceof Date){return i(r(t))}return null}function a(t){let i=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:i.getUint32(0),nsec:0};case 8:{let t=i.getUint32(0);return{sec:4294967296*(3&t)+i.getUint32(4),nsec:t>>>2}}case 12:return{sec:(0,n.getInt64)(i,4),nsec:i.getUint32(0)};default:throw new e.DecodeError("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(t.length))}}function o(t){let e=a(t);return new Date(1e3*e.sec+e.nsec/1e6)}t.encodeTimeSpecToTimestamp=i,t.encodeDateToTimeSpec=r,t.encodeTimestampExtension=s,t.decodeTimestampToTimeSpec=a,t.decodeTimestampExtension=o,t.timestampExtension={type:t.EXT_TIMESTAMP,encode:s,decode:o}}),B=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionCodec=void 0;var e=j(),n=z(),i=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(n.timestampExtension)}register(t){let{type:e,encode:n,decode:i}=t;if(e>=0)this.encoders[e]=n,this.decoders[e]=i;else{let t=1+e;this.builtInEncoders[t]=n,this.builtInDecoders[t]=i}}tryToEncode(t,n){for(let i=0;i<this.builtInEncoders.length;i++){let r=this.builtInEncoders[i];if(null!=r){let s=r(t,n);if(null!=s){let t=-1-i;return new e.ExtData(t,s)}}}for(let i=0;i<this.encoders.length;i++){let r=this.encoders[i];if(null!=r){let s=r(t,n);if(null!=s){let t=i;return new e.ExtData(t,s)}}}return t instanceof e.ExtData?t:null}decode(t,n,i){let r=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return r?r(t,n,i):new e.ExtData(n,t)}};t.ExtensionCodec=i,i.defaultCodec=new i}),U=T(t=>{function e(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDataView=t.ensureUint8Array=void 0,t.ensureUint8Array=e,t.createDataView=function(t){if(t instanceof ArrayBuffer)return new DataView(t);let n=e(t);return new DataView(n.buffer,n.byteOffset,n.byteLength)}}),H=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Encoder=t.DEFAULT_INITIAL_BUFFER_SIZE=t.DEFAULT_MAX_DEPTH=void 0;var e=F(),n=B(),i=O(),r=U();t.DEFAULT_MAX_DEPTH=100,t.DEFAULT_INITIAL_BUFFER_SIZE=2048;t.Encoder=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.ExtensionCodec.defaultCodec,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MAX_DEPTH,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_INITIAL_BUFFER_SIZE,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.extensionCodec=e,this.context=i,this.maxDepth=r,this.initialBufferSize=s,this.sortKeys=a,this.forceFloat32=o,this.ignoreUndefined=l,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}encode(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}doEncode(t,e){if(e>this.maxDepth)throw new Error("Too deep objects in depth ".concat(e));null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.encodeNumber(t):"string"==typeof t?this.encodeString(t):this.encodeObject(t,e)}ensureBufferSizeToWrite(t){let e=this.pos+t;this.view.byteLength<e&&this.resizeBuffer(2*e)}resizeBuffer(t){let e=new ArrayBuffer(t),n=new Uint8Array(e),i=new DataView(e);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(t){!1===t?this.writeU8(194):this.writeU8(195)}encodeNumber(t){Number.isSafeInteger(t)&&!this.forceIntegerToFloat?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):(this.writeU8(211),this.writeI64(t)):this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too long string: ".concat(t," bytes in UTF-8"));this.writeU8(219),this.writeU32(t)}}encodeString(t){if(t.length>e.TEXT_ENCODER_THRESHOLD){let n=(0,e.utf8Count)(t);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),(0,e.utf8EncodeTE)(t,this.bytes,this.pos),this.pos+=n}else{let n=(0,e.utf8Count)(t);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),(0,e.utf8EncodeJs)(t,this.bytes,this.pos),this.pos+=n}}encodeObject(t,e){let n=this.extensionCodec.tryToEncode(t,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(t))this.encodeArray(t,e);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(t)));this.encodeMap(t,e)}}encodeBinary(t){let e=t.byteLength;if(e<256)this.writeU8(196),this.writeU8(e);else if(e<65536)this.writeU8(197),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large binary: ".concat(e));this.writeU8(198),this.writeU32(e)}let n=(0,r.ensureUint8Array)(t);this.writeU8a(n)}encodeArray(t,e){let n=t.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(let i of t)this.doEncode(i,e+1)}countWithoutUndefined(t,e){let n=0;for(let i of e)void 0!==t[i]&&n++;return n}encodeMap(t,e){let n=Object.keys(t);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(t,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: ".concat(i));this.writeU8(223),this.writeU32(i)}for(let r of n){let n=t[r];this.ignoreUndefined&&void 0===n||(this.encodeString(r),this.doEncode(n,e+1))}}encodeExtension(t){let e=t.data.length;if(1===e)this.writeU8(212);else if(2===e)this.writeU8(213);else if(4===e)this.writeU8(214);else if(8===e)this.writeU8(215);else if(16===e)this.writeU8(216);else if(e<256)this.writeU8(199),this.writeU8(e);else if(e<65536)this.writeU8(200),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large extension object: ".concat(e));this.writeU8(201),this.writeU32(e)}this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){let e=t.length;this.ensureBufferSizeToWrite(e),this.bytes.set(t,this.pos),this.pos+=e}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),(0,i.setUint64)(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),(0,i.setInt64)(this.view,this.pos,t),this.pos+=8}}}),V=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encode=void 0;var e=H(),n={};t.encode=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return new e.Encoder(i.extensionCodec,i.context,i.maxDepth,i.initialBufferSize,i.sortKeys,i.forceFloat32,i.ignoreUndefined,i.forceIntegerToFloat).encodeSharedRef(t)}}),G=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prettyByte=void 0,t.prettyByte=function(t){return"".concat(t<0?"-":"","0x").concat(Math.abs(t).toString(16).padStart(2,"0"))}}),q=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CachedKeyDecoder=void 0;var e=F();t.CachedKeyDecoder=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;this.maxKeyLength=t,this.maxLengthPerKey=e,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,e,n){let i=this.caches[n-1];t:for(let r of i){let i=r.bytes;for(let r=0;r<n;r++)if(i[r]!==t[e+r])continue t;return r.str}return null}store(t,e){let n=this.caches[t.length-1],i={bytes:t,str:e};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(t,n,i){let r=this.find(t,n,i);if(null!=r)return this.hit++,r;this.miss++;let s=(0,e.utf8DecodeJs)(t,n,i),a=Uint8Array.prototype.slice.call(t,n,n+i);return this.store(a,s),s}}}),X=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.DataViewIndexOutOfBoundsError=void 0;var e=G(),n=B(),i=O(),r=F(),s=U(),a=q(),o=W(),l=t=>{let e=typeof t;return"string"===e||"number"===e},c=new DataView(new ArrayBuffer(0)),u=new Uint8Array(c.buffer);t.DataViewIndexOutOfBoundsError=(()=>{try{c.getInt8(0)}catch(_){return _.constructor}throw new Error("never reached")})();var h=new t.DataViewIndexOutOfBoundsError("Insufficient data"),d=new a.CachedKeyDecoder;t.Decoder=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.ExtensionCodec.defaultCodec,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.UINT32_MAX,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.UINT32_MAX,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.UINT32_MAX,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.UINT32_MAX,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.UINT32_MAX,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:d;this.extensionCodec=t,this.context=e,this.maxStrLength=r,this.maxBinLength=s,this.maxArrayLength=a,this.maxMapLength=o,this.maxExtLength=l,this.keyDecoder=h,this.totalPos=0,this.pos=0,this.view=c,this.bytes=u,this.headByte=-1,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.length=0}setBuffer(t){this.bytes=(0,s.ensureUint8Array)(t),this.view=(0,s.createDataView)(this.bytes),this.pos=0}appendBuffer(t){if(-1!==this.headByte||this.hasRemaining(1)){let e=this.bytes.subarray(this.pos),n=(0,s.ensureUint8Array)(t),i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),this.setBuffer(i)}else this.setBuffer(t)}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){let{view:e,pos:n}=this;return new RangeError("Extra ".concat(e.byteLength-n," of ").concat(e.byteLength," byte(s) found at buffer[").concat(t,"]"))}decode(t){this.reinitializeState(),this.setBuffer(t);let e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return e}*decodeMulti(t){for(this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(n){let i,r=!1;var s,a=!1,o=!1;try{for(var l,c=y(n);a=!(l=await c.next()).done;a=!1){let e=l.value;if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(e);try{i=this.doDecodeSync(),r=!0}catch(f){if(!(f instanceof t.DataViewIndexOutOfBoundsError))throw f}this.totalPos+=this.pos}}catch(p){o=!0,s=p}finally{try{a&&null!=c.return&&await c.return()}finally{if(o)throw s}}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}let{headByte:u,pos:h,totalPos:d}=this;throw new RangeError("Insufficient data in parsing ".concat((0,e.prettyByte)(u)," at ").concat(d," (").concat(h," in the current buffer)"))}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}decodeMultiAsync(e,n){var i=this;return v(function*(){let r=n,s=-1;var a,o=!1,l=!1;try{for(var c,u=y(e);o=!(c=yield m(u.next())).done;o=!1){let e=c.value;if(n&&0===s)throw i.createExtraByteError(i.totalPos);i.appendBuffer(e),r&&(s=i.readArraySize(),r=!1,i.complete());try{for(;yield i.doDecodeSync(),0!==--s;);}catch(h){if(!(h instanceof t.DataViewIndexOutOfBoundsError))throw h}i.totalPos+=i.pos}}catch(d){l=!0,a=d}finally{try{o&&null!=u.return&&(yield m(u.return()))}finally{if(l)throw a}}})()}doDecodeSync(){t:for(;;){let t,n=this.readHeadByte();if(n>=224)t=n-256;else if(n<192)if(n<128)t=n;else if(n<144){let e=n-128;if(0!==e){this.pushMapState(e),this.complete();continue t}t={}}else if(n<160){let e=n-144;if(0!==e){this.pushArrayState(e),this.complete();continue t}t=[]}else{let e=n-160;t=this.decodeUtf8String(e,0)}else if(192===n)t=null;else if(194===n)t=!1;else if(195===n)t=!0;else if(202===n)t=this.readF32();else if(203===n)t=this.readF64();else if(204===n)t=this.readU8();else if(205===n)t=this.readU16();else if(206===n)t=this.readU32();else if(207===n)t=this.readU64();else if(208===n)t=this.readI8();else if(209===n)t=this.readI16();else if(210===n)t=this.readI32();else if(211===n)t=this.readI64();else if(217===n){let e=this.lookU8();t=this.decodeUtf8String(e,1)}else if(218===n){let e=this.lookU16();t=this.decodeUtf8String(e,2)}else if(219===n){let e=this.lookU32();t=this.decodeUtf8String(e,4)}else if(220===n){let e=this.readU16();if(0!==e){this.pushArrayState(e),this.complete();continue t}t=[]}else if(221===n){let e=this.readU32();if(0!==e){this.pushArrayState(e),this.complete();continue t}t=[]}else if(222===n){let e=this.readU16();if(0!==e){this.pushMapState(e),this.complete();continue t}t={}}else if(223===n){let e=this.readU32();if(0!==e){this.pushMapState(e),this.complete();continue t}t={}}else if(196===n){let e=this.lookU8();t=this.decodeBinary(e,1)}else if(197===n){let e=this.lookU16();t=this.decodeBinary(e,2)}else if(198===n){let e=this.lookU32();t=this.decodeBinary(e,4)}else if(212===n)t=this.decodeExtension(1,0);else if(213===n)t=this.decodeExtension(2,0);else if(214===n)t=this.decodeExtension(4,0);else if(215===n)t=this.decodeExtension(8,0);else if(216===n)t=this.decodeExtension(16,0);else if(199===n){let e=this.lookU8();t=this.decodeExtension(e,1)}else if(200===n){let e=this.lookU16();t=this.decodeExtension(e,2)}else{if(201!==n)throw new o.DecodeError("Unrecognized type byte: ".concat((0,e.prettyByte)(n)));{let e=this.lookU32();t=this.decodeExtension(e,4)}}this.complete();let i=this.stack;for(;i.length>0;){let e=i[i.length-1];if(0===e.type){if(e.array[e.position]=t,e.position++,e.position!==e.size)continue t;i.pop(),t=e.array}else{if(1===e.type){if(!l(t))throw new o.DecodeError("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new o.DecodeError("The key __proto__ is not allowed");e.key=t,e.type=2;continue t}if(e.map[e.key]=t,e.readCount++,e.readCount!==e.size){e.key=null,e.type=1;continue t}i.pop(),t=e.map}}return t}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){let t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:if(t<160)return t-144;throw new o.DecodeError("Unrecognized array type byte: ".concat((0,e.prettyByte)(t)))}}pushMapState(t){if(t>this.maxMapLength)throw new o.DecodeError("Max length exceeded: map length (".concat(t,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:t,key:null,readCount:0,map:{}})}pushArrayState(t){if(t>this.maxArrayLength)throw new o.DecodeError("Max length exceeded: array length (".concat(t,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:t,array:new Array(t),position:0})}decodeUtf8String(t,e){var n;if(t>this.maxStrLength)throw new o.DecodeError("Max length exceeded: UTF-8 byte length (".concat(t,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+e+t)throw h;let i,s=this.pos+e;return i=this.stateIsMapKey()&&null!==(n=this.keyDecoder)&&void 0!==n&&n.canBeCached(t)?this.keyDecoder.decode(this.bytes,s,t):t>r.TEXT_DECODER_THRESHOLD?(0,r.utf8DecodeTD)(this.bytes,s,t):(0,r.utf8DecodeJs)(this.bytes,s,t),this.pos+=e+t,i}stateIsMapKey(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type}decodeBinary(t,e){if(t>this.maxBinLength)throw new o.DecodeError("Max length exceeded: bin length (".concat(t,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(t+e))throw h;let n=this.pos+e,i=this.bytes.subarray(n,n+t);return this.pos+=e+t,i}decodeExtension(t,e){if(t>this.maxExtLength)throw new o.DecodeError("Max length exceeded: ext length (".concat(t,") > maxExtLength (").concat(this.maxExtLength,")"));let n=this.view.getInt8(this.pos+e),i=this.decodeBinary(t,e+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){let t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){let t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){let t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){let t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){let t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){let t=(0,i.getUint64)(this.view,this.pos);return this.pos+=8,t}readI64(){let t=(0,i.getInt64)(this.view,this.pos);return this.pos+=8,t}readF32(){let t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){let t=this.view.getFloat64(this.pos);return this.pos+=8,t}}}),K=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMulti=t.decode=t.defaultDecodeOptions=void 0;var e=X();t.defaultDecodeOptions={},t.decode=function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultDecodeOptions;return new e.Decoder(i.extensionCodec,i.context,i.maxStrLength,i.maxBinLength,i.maxArrayLength,i.maxMapLength,i.maxExtLength).decode(n)},t.decodeMulti=function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultDecodeOptions;return new e.Decoder(i.extensionCodec,i.context,i.maxStrLength,i.maxBinLength,i.maxArrayLength,i.maxMapLength,i.maxExtLength).decodeMulti(n)}}),Y=T(t=>{function e(t){return null!=t[Symbol.asyncIterator]}function n(t){if(null==t)throw new Error("Assertion Failure: value must not be null nor undefined")}function i(t){return r.apply(this,arguments)}function r(){return r=v(function*(t){let e=t.getReader();try{for(;;){let{done:t,value:i}=yield m(e.read());if(t)return;n(i),yield i}}finally{e.releaseLock()}}),r.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureAsyncIterable=t.asyncIterableFromStream=t.isAsyncIterable=void 0,t.isAsyncIterable=e,t.asyncIterableFromStream=i,t.ensureAsyncIterable=function(t){return e(t)?t:i(t)}}),Q=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStream=t.decodeMultiStream=t.decodeArrayStream=t.decodeAsync=void 0;var e=X(),n=Y(),i=K();function r(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultDecodeOptions,s=(0,n.ensureAsyncIterable)(t);return new e.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(s)}t.decodeAsync=async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultDecodeOptions,s=(0,n.ensureAsyncIterable)(t);return new e.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(s)},t.decodeArrayStream=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultDecodeOptions,s=(0,n.ensureAsyncIterable)(t);return new e.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(s)},t.decodeMultiStream=r,t.decodeStream=function(t){return r(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultDecodeOptions)}}),$=T(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTimestampExtension=t.encodeTimestampExtension=t.decodeTimestampToTimeSpec=t.encodeTimeSpecToTimestamp=t.encodeDateToTimeSpec=t.EXT_TIMESTAMP=t.ExtData=t.ExtensionCodec=t.Encoder=t.DataViewIndexOutOfBoundsError=t.DecodeError=t.Decoder=t.decodeStream=t.decodeMultiStream=t.decodeArrayStream=t.decodeAsync=t.decodeMulti=t.decode=t.encode=void 0;var e=V();Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return e.encode}});var n=K();Object.defineProperty(t,"decode",{enumerable:!0,get:function(){return n.decode}}),Object.defineProperty(t,"decodeMulti",{enumerable:!0,get:function(){return n.decodeMulti}});var i=Q();Object.defineProperty(t,"decodeAsync",{enumerable:!0,get:function(){return i.decodeAsync}}),Object.defineProperty(t,"decodeArrayStream",{enumerable:!0,get:function(){return i.decodeArrayStream}}),Object.defineProperty(t,"decodeMultiStream",{enumerable:!0,get:function(){return i.decodeMultiStream}}),Object.defineProperty(t,"decodeStream",{enumerable:!0,get:function(){return i.decodeStream}});var r=X();Object.defineProperty(t,"Decoder",{enumerable:!0,get:function(){return r.Decoder}}),Object.defineProperty(t,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return r.DataViewIndexOutOfBoundsError}});var s=W();Object.defineProperty(t,"DecodeError",{enumerable:!0,get:function(){return s.DecodeError}});var a=H();Object.defineProperty(t,"Encoder",{enumerable:!0,get:function(){return a.Encoder}});var o=B();Object.defineProperty(t,"ExtensionCodec",{enumerable:!0,get:function(){return o.ExtensionCodec}});var l=j();Object.defineProperty(t,"ExtData",{enumerable:!0,get:function(){return l.ExtData}});var c=z();Object.defineProperty(t,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return c.EXT_TIMESTAMP}}),Object.defineProperty(t,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return c.encodeDateToTimeSpec}}),Object.defineProperty(t,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return c.encodeTimeSpecToTimestamp}}),Object.defineProperty(t,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return c.decodeTimestampToTimeSpec}}),Object.defineProperty(t,"encodeTimestampExtension",{enumerable:!0,get:function(){return c.encodeTimestampExtension}}),Object.defineProperty(t,"decodeTimestampExtension",{enumerable:!0,get:function(){return c.decodeTimestampExtension}})}),J=class extends Error{constructor(t){super(t),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}},Z=class extends J{},tt=class extends J{},et=class extends J{},nt=typeof process<"u"&&process.release&&"node"===process.release.name;if(globalThis.document)0;else if(globalThis.importScripts)0;else{if(!nt)throw new J("Cannot determine runtime environment");0}function it(){let t={resolve:t=>{},reject:t=>{},promise:null},e=new Promise((e,n)=>{t.resolve=e,t.reject=n});return t.promise=e,t}function rt(t){return new Promise(e=>setTimeout(e,t))}function st(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),s=3;s<i;s++)r[s-3]=arguments[s];return null===t||"object"!=typeof t?t:e(t)?n(t,...r):Array.isArray(t)||ArrayBuffer.isView(t)?t.map(t=>st(t,e,n,...r)):Object.fromEntries(Object.entries(t).map((t,i)=>{let[s,a]=t;return[s,st(a,e,n,...r)]}))}function at(t,e){let n=new XMLHttpRequest;n.open("get",t,!0),n.onload=()=>{let t=new Worker(URL.createObjectURL(new Blob([n.responseText])));e(t)},n.send()}function ot(t){if(nt)return!1;let e=new URL(location.href),n=new URL(t,location.origin);return!(e.host===n.host&&e.port===n.port&&e.protocol===n.protocol)}var lt=new WeakMap;function ct(){let t=Array.from({length:4},ut).join("-");if(63!==t.length)throw new Error("comlink internal error: UUID has the wrong length");return t}function ut(){let t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),e=15-t.length;return e>0&&(t=Array.from({length:e},()=>0).join("")+t),t}var ht=P($()),dt=new TextEncoder;async function ft(t,e,n){try{let{taskId:i,sizeBuffer:r,dataBuffer:s,signalBuffer:a}=e,o=(0,ht.encode)(n),l=o.length<=s.length;if(Atomics.store(r,0,o.length),Atomics.store(r,1,+l),!l){let[e,n]=function(t){let e=ct();return[e,new Promise(n=>{nt?t.once("message",t=>{!t.id||t.id!==e||n(t)}):t.addEventListener("message",function i(r){!r.data||!r.data.id||r.data.id!==e||(t.removeEventListener("message",i),n(r.data))}),t.start&&t.start()})]}(t);s.set(dt.encode(e)),await pt(a,i),s=(await n).dataBuffer}s.set(o),Atomics.store(r,1,1),await pt(a,i)}catch(i){console.warn(i)}}async function pt(t,e){let n=(e>>1)%32,i=1;for(;0!==Atomics.compareExchange(t,n+1,0,e);)await rt(i),i<32&&(i*=2);Atomics.or(t,0,1<<n),Atomics.notify(t,0)}var gt,mt,vt,bt,yt=class{constructor(){D(this,vt),D(this,gt,void 0),D(this,mt,void 0),L(this,mt,[]),L(this,gt,[])}reset(){L(this,mt,[]),L(this,gt,[])}put(t){N(this,mt).length||I(this,vt,bt).call(this),N(this,mt).shift()(t)}async get(){return N(this,gt).length||I(this,vt,bt).call(this),N(this,gt).shift()}isEmpty(){return!N(this,gt).length}isBlocked(){return!!N(this,mt).length}get length(){return N(this,gt).length-N(this,mt).length}};function wt(t,e){return xt({type:"request",data:{uuid:ct(),msg:t}},e)}function _t(t,e,n){return xt({type:"response",data:{uuid:t,resp:e}},n)}function xt(t,e){return e&&function(t,e){lt.set(t,e)}(t,e),t}function kt(t){return function(t){return t&&"object"==typeof t&&"payloadType"in t&&"obj"in t}(t)&&"ptr"===t.payloadType}gt=new WeakMap,mt=new WeakMap,vt=new WeakSet,bt=function(){N(this,gt).push(new Promise(t=>{N(this,mt).push(t)}))};var At,St=class{constructor(){this.inputQueue=new yt,this.outputQueue=new yt,this.systemQueue=new yt,D(this,At,new Map)}async read(){return await this.outputQueue.get()}async flush(){let t=[];for(;!this.outputQueue.isEmpty();)t.push(await this.read());return t}async readSystem(){return await this.systemQueue.get()}write(t){this.inputQueue.put(t)}async request(t,e){let n=wt(t,e),{resolve:i,reject:r,promise:s}=it();return N(this,At).set(n.data.uuid,{resolve:i,reject:r}),this.write(n),s}putClosedMessage(){this.outputQueue.put({type:"closed"})}resolveResponse(t){let e=t.data.uuid,n=N(this,At).get(e);if(n){let i=t.data.resp;N(this,At).delete(e),"err"===i.payloadType?n.reject(function(t){let e=new Z(t.obj.message);return"Error"!==t.obj.name&&(e.name=t.obj.name),e.stack=t.obj.stack,e}(i)):n.resolve(i)}else console.warn("Can't find request.")}};At=new WeakMap;P($()),new TextDecoder("utf-8");new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;new Int32Array(new ArrayBuffer(4));var Et={};nt&&(globalThis.Worker=M("worker_threads").Worker);var Ct,Mt,Tt,Pt,Rt=class extends St{constructor(t){super(),D(this,Mt),D(this,Ct,void 0),this.close=()=>{},D(this,Pt,async(t,e)=>{if(e&&e.type)switch(e.type){case"resolve":return L(this,Ct,new Int32Array(e.data)),void this.resolve();case"response":return void this.resolveResponse(e);case"system":return void this.systemQueue.put(e.data);default:return void this.outputQueue.put(e);case"sync-request":{let n=e,i=n.data.msg,r=n.data.reqData;switch(i.type){case"read":{let e=await this.inputQueue.get();await ft(t,r,e);break}default:throw new tt("Unsupported request type '".concat(i.type,"'."))}return}case"request":throw new tt("Can't send messages of type 'request' from a worker. Please Use 'sync-request' instead.")}});let e=e=>{I(this,Mt,Tt).call(this,e),this.close=()=>{e.terminate(),this.putClosedMessage()};let n={type:"init",data:{config:t,channelType:Ht.SharedArrayBuffer}};e.postMessage(n)};if(ot(t.baseUrl))at("".concat(t.baseUrl,"webr-worker.js"),t=>e(t));else{let n=new Worker("".concat(t.baseUrl,"webr-worker.js"));e(n)}({resolve:this.resolve,promise:this.initialised}=it())}interrupt(){if(!N(this,Ct))throw new tt("Failed attempt to interrupt before initialising interruptBuffer");this.inputQueue.reset(),N(this,Ct)[0]=1}};Ct=new WeakMap,Mt=new WeakSet,Tt=function(t){nt?t.on("message",e=>{N(this,Pt).call(this,t,e)}):t.onmessage=e=>N(this,Pt).call(this,t,e.data)},Pt=new WeakMap;new WeakMap,new WeakMap,new WeakMap,new WeakMap;P($());nt&&(globalThis.Worker=M("worker_threads").Worker);var Nt,Dt,Lt,It,Ot,Ft,jt,Wt,zt,Bt,Ut=class extends St{constructor(t){super(),D(this,It),D(this,Ft),D(this,Wt),this.close=()=>{},D(this,Nt,new Map),D(this,Dt,void 0),D(this,Lt,!1),D(this,Bt,async(t,e)=>{if(e&&e.type)switch(e.type){case"resolve":return void this.resolve();case"response":return void this.resolveResponse(e);case"system":return void this.systemQueue.put(e.data);default:return void this.outputQueue.put(e);case"sync-request":{let t=e.data;return void N(this,Nt).set(t.data.uuid,t.data.msg)}case"request":throw new tt("Can't send messages of type 'request' from a worker.Use service worker fetch request instead.")}});let e=e=>{I(this,Wt,zt).call(this,e),this.close=()=>{e.terminate(),this.putClosedMessage()},I(this,It,Ot).call(this,"".concat(t.serviceWorkerUrl,"webr-serviceworker.js")).then(n=>{let i={type:"init",data:{config:t,channelType:Ht.ServiceWorker,clientId:n,location:window.location.href}};e.postMessage(i)})};if(ot(t.serviceWorkerUrl))at("".concat(t.serviceWorkerUrl,"webr-worker.js"),t=>e(t));else{let n=new Worker("".concat(t.serviceWorkerUrl,"webr-worker.js"));e(n)}({resolve:this.resolve,promise:this.initialised}=it())}activeRegistration(){var t;if(null==(t=N(this,Dt))||!t.active)throw new tt("Attempted to obtain a non-existent active registration.");return N(this,Dt).active}interrupt(){L(this,Lt,!0)}};Nt=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,It=new WeakSet,Ot=async function(t){L(this,Dt,await navigator.serviceWorker.register(t)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var t;null==(t=N(this,Dt))||t.unregister()});let e=await new Promise(t=>{navigator.serviceWorker.addEventListener("message",function e(n){"registration-successful"===n.data.type&&(navigator.serviceWorker.removeEventListener("message",e),t(n.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",t=>{I(this,Ft,jt).call(this,t)}),e},Ft=new WeakSet,jt=async function(t){if("request"===t.data.type){let e=t.data.data,n=N(this,Nt).get(e);if(!n)throw new tt("Request not found during service worker XHR request");switch(N(this,Nt).delete(e),n.type){case"read":{let t=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:e,response:_t(e,t)});break}case"interrupt":{let t=N(this,Lt);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:e,response:_t(e,t)}),this.inputQueue.reset(),L(this,Lt,!1);break}default:throw new tt("Unsupported request type '".concat(n.type,"'."))}return}},Wt=new WeakSet,zt=function(t){nt?t.on("message",e=>{N(this,Bt).call(this,t,e)}):t.onmessage=e=>N(this,Bt).call(this,t,e.data)},Bt=new WeakMap;new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var Ht={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2};var Vt=nt?__dirname+"/":"./";function Gt(t){return t&&("object"==typeof t||"function"==typeof t)&&"payloadType"in t&&kt(t._payload)}var qt={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function Xt(t){return t&&"object"==typeof t&&Object.keys(qt).includes(t.type)}function Kt(t){return t&&"object"==typeof t&&"re"in t&&"im"in t}function Yt(t){return Et._Rf_protect(ee(t)),t}function Qt(t,e){return Et._Rf_protect(ee(t)),++e.n,t}function $t(t){Et._Rf_unprotect(t)}function Jt(t,e,n){Et._Rf_defineVar(ee(e),ee(n),ee(t))}function Zt(t,e){let n={},i={n:0};try{let r=new ve(e);Qt(r,i),n.code=Et.allocateUTF8(t);let s=Et._R_ParseEvalString(n.code,r.ptr);return le.wrap(s)}finally{(function(t){Object.keys(t).forEach(e=>Et._free(t[e]))})(n),$t(i.n)}}function te(t,e){return Et.getWasmTableEntry(Et.GOT.ffi_safe_eval.value)(ee(t),ee(e))}function ee(t){return function(t){return t instanceof le}(t)?t.ptr:t}function ne(t,e){if(Et._TYPEOF(t.ptr)!==qt[e])throw new Error('Unexpected object type "'.concat(t.type(),'" when expecting type "').concat(e,'"'))}function ie(t){if(Xt(t))return new(je(qt[t.type]))(t);if(t&&"object"==typeof t&&"type"in t&&"null"===t.type)return new ue;if(null===t)return new we({type:"logical",names:null,values:[null]});if("boolean"==typeof t)return new we(t);if("number"==typeof t)return new Ee(t);if("string"==typeof t)return new Ne(t);if(Kt(t))return new Te(t);if(Array.isArray(t))return function(t){let e={n:0};try{let n=new fe([new he("c"),...t]);return Qt(n,e),n.eval()}finally{$t(e.n)}}(t);throw new Error("Robj construction for this JS object is not yet supported")}var re,se,ae=class{constructor(t){this.ptr=t}type(){let t=Et._TYPEOF(this.ptr);return Object.keys(qt).find(e=>qt[e]===t)}},oe=class extends ae{constructor(t){if(!(t instanceof ae))return ie(t);super(t.ptr),D(this,re)}static wrap(t){return new(je(Et._TYPEOF(t)))(new ae(t))}get[Symbol.toStringTag](){return"RObject:".concat(this.type())}static getPersistentObject(t){return Le[t]}getPropertyValue(t){return this[t]}inspect(){Zt(".Internal(inspect(x))",{x:this})}isNull(){return Et._TYPEOF(this.ptr)===qt.null}isUnbound(){return this.ptr===Le.unboundValue.ptr}attrs(){return de.wrap(Et._ATTRIB(this.ptr))}setNames(t){let e;if(null===t)e=Le.null;else{if(!Array.isArray(t)||!t.every(t=>"string"==typeof t||null===t))throw new Error("Argument to setNames must be null or an Array of strings or null");e=new Ne(t)}return Et._Rf_setAttrib(this.ptr,Le.namesSymbol.ptr,e.ptr),this}names(){let t=Ne.wrap(Et._Rf_getAttrib(this.ptr,Le.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let e=this.names();return e&&e.includes(t)}toJs(){throw new Error("This R object cannot be converted to JS")}subset(t){return I(this,re,se).call(this,t,Le.bracketSymbol.ptr)}get(t){return I(this,re,se).call(this,t,Le.bracket2Symbol.ptr)}getDollar(t){return I(this,re,se).call(this,t,Le.dollarSymbol.ptr)}pluck(){let t=function(t){let e=Et._malloc(4);return Et._R_ProtectWithIndex(ee(t),e),{loc:Et.getValue(e,"i32"),ptr:e}}(Le.null);try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];let r=(e,n)=>function(t,e){return Et._R_Reprotect(ee(t),e.loc),t}(e.get(n),t),s=n.reduce(r,this);return s.isNull()?void 0:s}finally{!function(t){Et._Rf_unprotect(1),Et._free(t.ptr)}(t)}}set(t,e){let n={n:0};try{let i=new oe(t);Qt(i,n);let r=new oe(e);Qt(r,n);let s=new he("[[<-"),a=Et._Rf_lang4(s.ptr,this.ptr,i.ptr,r.ptr);return Qt(a,n),oe.wrap(te(a,Le.baseEnv))}finally{$t(n.n)}}static getMethods(t){let e=new Set,n=t;do{Object.getOwnPropertyNames(n).map(t=>e.add(t))}while(n=Object.getPrototypeOf(n));return[...e.keys()].filter(e=>"function"==typeof t[e])}},le=oe;re=new WeakSet,se=function(t,e){let n={n:0};try{let i=new oe(t);Qt(i,n);let r=Et._Rf_lang3(e,this.ptr,i.ptr);return Qt(r,n),oe.wrap(te(r,Le.baseEnv))}finally{$t(n.n)}};var ce,ue=class extends le{constructor(){return super(new ae(Et.getValue(Et._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},he=class extends le{constructor(t){if(t instanceof ae)return ne(t,"symbol"),void super(t);let e=Et.allocateUTF8(t);try{super(new ae(Et._Rf_install(e)))}finally{Et._free(e)}}toJs(){let t=this.toObject();return{type:"symbol",printname:t.printname,symvalue:t.symvalue,internal:t.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return me.wrap(Et._PRINTNAME(this.ptr))}symvalue(){return le.wrap(Et._SYMVALUE(this.ptr))}internal(){return le.wrap(Et._INTERNAL(this.ptr))}},de=class extends le{constructor(t){if(t instanceof ae)return ne(t,"pairlist"),super(t),this;let e={n:0};try{let{names:n,values:i}=Fe(t),r=de.wrap(Et._Rf_allocList(i.length));Qt(r,e);for(let[t,e]=[0,r];!e.isNull();[t,e]=[t+1,e.cdr()])e.setcar(new le(i[t]));r.setNames(n),super(r)}finally{$t(e.n)}}get length(){return this.toArray().length}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:1};return this.toJs(t).values}toObject(){let{allowDuplicateKey:t=!0,allowEmptyKey:e=!1,depth:n=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.entries({depth:n}),r=i.map(t=>{let[e,n]=t;return e});if(!t&&new Set(r).size!==r.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!e&&r.some(t=>!t))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(i.filter((t,e)=>i.findIndex(e=>e[0]===t[0])===e))}entries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:1},e=this.toJs(t);return e.values.map((t,n)=>[e.names?e.names[n]:null,t])}toJs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],i=!1,r=[];for(let s=this;!s.isNull();s=s.cdr()){let a=s.tag();a.isNull()?n.push(""):(i=!0,n.push(a.toString())),t.depth&&e>=t.depth?r.push(s.car()):r.push(s.car().toJs(t,e+1))}return{type:"pairlist",names:i?n:null,values:r}}includes(t){return t in this.toObject()}setcar(t){Et._SETCAR(this.ptr,t.ptr)}car(){return le.wrap(Et._CAR(this.ptr))}cdr(){return le.wrap(Et._CDR(this.ptr))}tag(){return le.wrap(Et._TAG(this.ptr))}},fe=class extends le{constructor(t){if(t instanceof ae)return ne(t,"call"),super(t),this;let e={n:0};try{let{values:n}=Fe(t),i=n.map(t=>Qt(new le(t),e)),r=fe.wrap(Et._Rf_allocVector(qt.call,n.length));Qt(r,e);for(let[t,e]=[0,r];!e.isNull();[t,e]=[t+1,e.cdr()])e.setcar(i[t]);super(r)}finally{$t(e.n)}}setcar(t){Et._SETCAR(this.ptr,t.ptr)}car(){return le.wrap(Et._CAR(this.ptr))}cdr(){return le.wrap(Et._CDR(this.ptr))}eval(){return le.wrap(te(this.ptr,Le.baseEnv))}},pe=class extends le{constructor(t){if(t instanceof ae)return ne(t,"list"),super(t),this;let e={n:0};try{let{names:n,values:i}=Fe(t),r=Et._Rf_allocVector(qt.list,i.length);Qt(r,e),i.forEach((t,e)=>{Et._SET_VECTOR_ELT(r,e,new le(t).ptr)}),le.wrap(r).setNames(n),super(new ae(r))}finally{$t(e.n)}}get length(){return Et._LENGTH(this.ptr)}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:1};return this.toJs(t).values}toObject(){let{allowDuplicateKey:t=!0,allowEmptyKey:e=!1,depth:n=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.entries({depth:n}),r=i.map(t=>{let[e,n]=t;return e});if(!t&&new Set(r).size!==r.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!e&&r.some(t=>!t))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(i.filter((t,e)=>i.findIndex(e=>e[0]===t[0])===e))}entries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:1},e=this.toJs(t);return e.values.map((t,n)=>[e.names?e.names[n]:null,t])}toJs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>t.depth&&e>=t.depth?this.get(n+1):this.get(n+1).toJs(t,e+1))}}},ge=class extends le{exec(){let t={n:0};try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];let r=new fe([this,...n]);return Qt(r,t),r.eval()}finally{$t(t.n)}}},me=class extends le{constructor(t){if(t instanceof ae)return ne(t,"string"),void super(t);let e=Et.allocateUTF8(t);try{super(new ae(Et._Rf_mkChar(e)))}finally{Et._free(e)}}toString(){return Et.UTF8ToString(Et._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},ve=class extends le{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof ae)return ne(t,"environment"),super(t),this;let e=0;try{let{names:n,values:i}=Fe(t),r=Yt(Et._R_NewEnv(Le.globalEnv.ptr,0,0));++e,i.forEach((t,e)=>{let i=n?n[e]:null;if(!i)throw new Error("Can't create object in new environment with empty symbol name");let s=new he(i),a=Yt(new le(t));try{Jt(r,s,a)}finally{$t(1)}}),super(new ae(r))}finally{$t(e)}}ls(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ne.wrap(Et._R_lsInternal3(this.ptr,Number(t),Number(e))).toArray()}bind(t,e){let n=new he(t),i=Yt(new le(e));try{Jt(this,n,i)}finally{$t(1)}}names(){return this.ls(!0,!0)}frame(){return le.wrap(Et._FRAME(this.ptr))}subset(t){if("number"==typeof t)throw new Error("Object of type environment is not subsettable");return this.getDollar(t)}toObject(){let{depth:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.names();return Object.fromEntries([...Array(e.length).keys()].map(n=>[e[n],this.getDollar(e[n]).toJs({depth:t})]))}toJs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depth:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.names(),i=[...Array(n.length).keys()].map(i=>t.depth&&e>=t.depth?this.getDollar(n[i]):this.getDollar(n[i]).toJs(t,e+1));return{type:"environment",names:n,values:i}}},be=class extends le{constructor(t,e,n){if(t instanceof ae)return ne(t,e),super(t),this;let i={n:0};try{let{names:r,values:s}=Fe(t),a=Et._Rf_allocVector(qt[e],s.length);Qt(a,i),s.forEach(n(a)),le.wrap(a).setNames(r),super(new ae(a))}finally{$t(i.n)}}get length(){return Et._LENGTH(this.ptr)}get(t){return super.get(t)}subset(t){return super.subset(t)}getDollar(t){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let t={n:0};try{let e=Et._Rf_lang2(new he("is.na").ptr,this.ptr);Qt(e,t);let n=we.wrap(te(e,Le.baseEnv));Qt(n,t);let i=n.toTypedArray();return Array.from(i).map(t=>!!t)}finally{$t(t.n)}}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,n)=>e?null:t[n])}toObject(){let{allowDuplicateKey:t=!0,allowEmptyKey:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.entries(),i=n.map(t=>{let[e,n]=t;return e});if(!t&&new Set(i).size!==i.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!e&&i.some(t=>!t))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((t,e)=>n.findIndex(e=>e[0]===t[0])===e))}entries(){let t=this.toArray(),e=this.names();return t.map((t,n)=>[e?e[n]:null,t])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},ye=class extends be{constructor(t){super(t,"logical",N(ye,ce))}getBoolean(t){return this.get(t).toArray()[0]}toBoolean(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getBoolean(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS boolean");return t}toTypedArray(){return new Int32Array(Et.HEAP32.subarray(Et._LOGICAL(this.ptr)/4,Et._LOGICAL(this.ptr)/4+this.length))}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,n)=>e?null:!!t[n])}},we=ye;ce=new WeakMap,D(we,ce,t=>{let e=Et._LOGICAL(t),n=Et.getValue(Et._R_NaInt,"i32");return(t,i)=>{Et.setValue(e+4*i,null===t?n:!!t,"i32")}});var _e,xe=class extends be{constructor(t){super(t,"integer",N(xe,_e))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Int32Array(Et.HEAP32.subarray(Et._INTEGER(this.ptr)/4,Et._INTEGER(this.ptr)/4+this.length))}},ke=xe;_e=new WeakMap,D(ke,_e,t=>{let e=Et._INTEGER(t),n=Et.getValue(Et._R_NaInt,"i32");return(t,i)=>{Et.setValue(e+4*i,null===t?n:Math.round(Number(t)),"i32")}});var Ae,Se=class extends be{constructor(t){super(t,"double",N(Se,Ae))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Float64Array(Et.HEAPF64.subarray(Et._REAL(this.ptr)/8,Et._REAL(this.ptr)/8+this.length))}},Ee=Se;Ae=new WeakMap,D(Ee,Ae,t=>{let e=Et._REAL(t),n=Et.getValue(Et._R_NaReal,"double");return(t,i)=>{Et.setValue(e+8*i,null===t?n:t,"double")}});var Ce,Me=class extends be{constructor(t){super(t,"complex",N(Me,Ce))}getComplex(t){return this.get(t).toArray()[0]}toComplex(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getComplex(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS object");return t}toTypedArray(){return new Float64Array(Et.HEAPF64.subarray(Et._COMPLEX(this.ptr)/8,Et._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,n)=>e?null:{re:t[2*n],im:t[2*n+1]})}},Te=Me;Ce=new WeakMap,D(Te,Ce,t=>{let e=Et._COMPLEX(t),n=Et.getValue(Et._R_NaReal,"double");return(t,i)=>{Et.setValue(e+2*i*8,null===t?n:t.re,"double"),Et.setValue(e+8*(2*i+1),null===t?n:t.im,"double")}});var Pe,Re=class extends be{constructor(t){super(t,"character",N(Re,Pe))}getString(t){return this.get(t).toArray()[0]}toString(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getString(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS string");return t}toTypedArray(){return new Uint32Array(Et.HEAPU32.subarray(Et._STRING_PTR(this.ptr)/4,Et._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((t,e)=>t?null:Et.UTF8ToString(Et._R_CHAR(Et._STRING_ELT(this.ptr,e))))}},Ne=Re;Pe=new WeakMap,D(Ne,Pe,t=>(e,n)=>{null===e?Et._SET_STRING_ELT(t,n,Le.naString.ptr):Et._SET_STRING_ELT(t,n,new me(e).ptr)});var De,Le,Ie=class extends be{constructor(t){super(t,"raw",N(Ie,De))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(1!==this.length)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(null===t)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Uint8Array(Et.HEAPU8.subarray(Et._RAW(this.ptr),Et._RAW(this.ptr)+this.length))}},Oe=Ie;function Fe(t){return Xt(t)?t:Array.isArray(t)||ArrayBuffer.isView(t)?{names:null,values:t}:t&&"object"==typeof t&&!Kt(t)?{names:Object.keys(t),values:Object.values(t)}:{names:null,values:[t]}}function je(t){let e={[qt.null]:ue,[qt.symbol]:he,[qt.pairlist]:de,[qt.closure]:ge,[qt.environment]:ve,[qt.call]:fe,[qt.special]:ge,[qt.builtin]:ge,[qt.string]:me,[qt.logical]:we,[qt.integer]:ke,[qt.double]:Ee,[qt.complex]:Te,[qt.character]:Ne,[qt.list]:pe,[qt.raw]:Oe,[qt.function]:ge};return t in e?e[t]:le}function We(){}function ze(t,e,n){return async function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];let a=r.map(t=>Gt(t)?t._payload:{obj:st(t,Gt,t=>t._payload),payloadType:"raw"}),o={type:"callRObjectMethod",data:{payload:n,prop:e,args:a}},l=await t.request(o);switch(l.payloadType){case"ptr":return Be(t,l);case"raw":return st(l,kt,(t,e)=>Be(e,t),t).obj}}}function Be(t,e){var n;let i=new Proxy(null!=(n=e.obj.methods)&&n.includes("exec")?Object.assign(We,p({},e)):e,{get:(n,r)=>{var s;return"_payload"===r?e:r===Symbol.asyncIterator?function(t,e){return v(function*(){let n={type:"callRObjectMethod",data:{payload:e._payload,prop:"getPropertyValue",args:[{payloadType:"raw",obj:"length"}],shelter:void 0}},i=yield m(t.request(n));if("number"!=typeof i.obj)throw new J("Cannot iterate over object, unexpected type for length property.");for(let t=1;t<=i.obj;t++)yield e.get(t)})}(t,i):null!=(s=e.obj.methods)&&s.includes(r.toString())?ze(t,r.toString(),e):void 0},apply:async(n,i,r)=>{let s=await Be(t,e).exec(...r);return function(t){var e;return!(!Gt(t)||null==(e=t._payload.obj.methods)||!e.includes("exec"))}(s)?s:s.toJs()}});return i}function Ue(t,e,n){return new Proxy(le,{construct:(i,r)=>async function(t,e,n,i){let r={type:"newRObject",data:{objType:e,obj:st(i,Gt,t=>t._payload),shelter:n}},s=await t.request(r);switch(s.payloadType){case"raw":throw new et("Unexpected raw payload type returned from newRObject");case"ptr":return Be(t,s)}}(t,n,e,...r),get:(e,n)=>ze(t,n.toString())})}De=new WeakMap,D(Oe,De,t=>{let e=Et._RAW(t);return(t,n)=>{Et.setValue(e+n,Number(t),"i8")}});var He,Ve,Ge,qe;He=new WeakMap,Ve=new WeakMap,Ge=new WeakMap,qe=new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet;var Xe,Ke,Ye,Qe={RArgs:[],REnv:{FONTCONFIG_PATH:"/etc/fonts",R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0"},baseUrl:Vt,serviceWorkerUrl:"",repoUrl:"https://repo.r-wasm.org",homedir:"/home/web_user",interactive:!0,channelType:Ht.Automatic,createLazyFilesystem:!0},$e=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(this,Ke),D(this,Xe,void 0),this.FS={lookupPath:async t=>{let e={type:"lookupPath",data:{path:t}};return(await N(this,Xe).request(e)).obj},mkdir:async t=>{let e={type:"mkdir",data:{path:t}};return(await N(this,Xe).request(e)).obj},readFile:async(t,e)=>{let n={type:"readFile",data:{path:t,flags:e}};return(await N(this,Xe).request(n)).obj},rmdir:async t=>{let e={type:"rmdir",data:{path:t}};await N(this,Xe).request(e)},writeFile:async(t,e,n)=>{let i={type:"writeFile",data:{path:t,data:e,flags:n}};await N(this,Xe).request(i)},unlink:async t=>{let e={type:"unlink",data:{path:t}};await N(this,Xe).request(e)}};let e=p(p(p({},Qe),t),{},{REnv:p(p({},Qe.REnv),t.REnv)});L(this,Xe,function(t){switch(t.channelType){case Ht.SharedArrayBuffer:return new Rt(t);case Ht.ServiceWorker:return new Ut(t);case Ht.Automatic:default:if(typeof SharedArrayBuffer<"u")return new Rt(t);if("serviceWorker"in navigator&&!ot(t.serviceWorkerUrl))return new Ut(t);throw new tt("Can't initialise main thread communication channel")}}(e)),this.objs={},this.Shelter=function(t){return new Proxy(vn,{construct:async()=>{let e=new vn(t);return await e.init(),e}})}(N(this,Xe))}async init(){let t=await N(this,Xe).initialised;return this.globalShelter=await new this.Shelter,this.RObject=this.globalShelter.RObject,this.RLogical=this.globalShelter.RLogical,this.RInteger=this.globalShelter.RInteger,this.RDouble=this.globalShelter.RDouble,this.RComplex=this.globalShelter.RComplex,this.RCharacter=this.globalShelter.RCharacter,this.RRaw=this.globalShelter.RRaw,this.RList=this.globalShelter.RList,this.RPairlist=this.globalShelter.RPairlist,this.REnvironment=this.globalShelter.REnvironment,this.RSymbol=this.globalShelter.RSymbol,this.RString=this.globalShelter.RString,this.RCall=this.globalShelter.RCall,this.objs={baseEnv:await this.RObject.getPersistentObject("baseEnv"),globalEnv:await this.RObject.getPersistentObject("globalEnv"),null:await this.RObject.getPersistentObject("null"),true:await this.RObject.getPersistentObject("true"),false:await this.RObject.getPersistentObject("false"),na:await this.RObject.getPersistentObject("na")},I(this,Ke,Ye).call(this),t}close(){N(this,Xe).close()}async read(){return await N(this,Xe).read()}async flush(){return await N(this,Xe).flush()}write(t){N(this,Xe).write(t)}writeConsole(t){this.write({type:"stdin",data:t+"\n"})}interrupt(){N(this,Xe).interrupt()}async installPackages(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n of t){let t={type:"installPackage",data:{name:n,quiet:e}};await N(this,Xe).request(t)}}async destroy(t){await this.globalShelter.destroy(t)}async evalR(t,e){return this.globalShelter.evalR(t,e)}async evalRVoid(t,e){return this.evalRRaw(t,"void",e)}async evalRBoolean(t,e){return this.evalRRaw(t,"boolean",e)}async evalRNumber(t,e){return this.evalRRaw(t,"number",e)}async evalRString(t,e){return this.evalRRaw(t,"string",e)}async evalRRaw(t,e){let n={type:"evalRRaw",data:{code:t,options:st(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Gt,t=>t._payload),outputType:e}},i=await N(this,Xe).request(n);switch(i.payloadType){case"raw":return i.obj;case"ptr":throw new et("Unexpected ptr payload type returned from evalRVoid")}}async invokeWasmFunction(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];let r={type:"invokeWasmFunction",data:{ptr:t,args:n}};return(await N(this,Xe).request(r)).obj}};Xe=new WeakMap,Ke=new WeakSet,Ye=async function(){for(;;){let t=await N(this,Xe).readSystem();switch(t.type){case"setTimeoutWasm":setTimeout((t,e)=>{this.invokeWasmFunction(t,...e)},t.data.delay,t.data.ptr,t.data.args);break;case"console.log":console.log(t.data);break;case"console.warn":console.warn(t.data);break;case"console.error":console.error(t.data);break;default:throw new J("Unknown system message type `"+t.type+"`")}}};var Je,Ze,tn,en,nn,rn,sn,an,on,ln,cn,un,hn,dn,fn,pn,gn,mn,vn=class{constructor(t){D(this,Je,""),D(this,Ze,void 0),D(this,tn,!1),L(this,Ze,t)}async init(){if(N(this,tn))return;let t=await N(this,Ze).request({type:"newShelter"});L(this,Je,t.obj),this.RObject=Ue(N(this,Ze),N(this,Je),"object"),this.RLogical=Ue(N(this,Ze),N(this,Je),"logical"),this.RInteger=Ue(N(this,Ze),N(this,Je),"integer"),this.RDouble=Ue(N(this,Ze),N(this,Je),"double"),this.RComplex=Ue(N(this,Ze),N(this,Je),"complex"),this.RCharacter=Ue(N(this,Ze),N(this,Je),"character"),this.RRaw=Ue(N(this,Ze),N(this,Je),"raw"),this.RList=Ue(N(this,Ze),N(this,Je),"list"),this.RPairlist=Ue(N(this,Ze),N(this,Je),"pairlist"),this.REnvironment=Ue(N(this,Ze),N(this,Je),"environment"),this.RSymbol=Ue(N(this,Ze),N(this,Je),"symbol"),this.RString=Ue(N(this,Ze),N(this,Je),"string"),this.RCall=Ue(N(this,Ze),N(this,Je),"call"),L(this,tn,!0)}async purge(){let t={type:"shelterPurge",data:N(this,Je)};await N(this,Ze).request(t)}async destroy(t){let e={type:"shelterDestroy",data:{id:N(this,Je),obj:t._payload}};await N(this,Ze).request(e)}async size(){let t={type:"shelterSize",data:N(this,Je)};return(await N(this,Ze).request(t)).obj}async evalR(t){let e={type:"evalR",data:{code:t,options:st(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Gt,t=>t._payload),shelter:N(this,Je)}},n=await N(this,Ze).request(e);if("raw"===n.payloadType)throw new et("Unexpected payload type returned from evalR");return Be(N(this,Ze),n)}async captureR(t){let e={type:"captureR",data:{code:t,options:st(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Gt,t=>t._payload),shelter:N(this,Je)}},n=await N(this,Ze).request(e);switch(n.payloadType){case"ptr":throw new et("Unexpected payload type returned from evalR");case"raw":{let t=n.obj,e=Be(N(this,Ze),t.result),i=t.output;for(let n=0;n<i.length;++n)"stdout"!==i[n].type&&"stderr"!==i[n].type&&(i[n].data=Be(N(this,Ze),i[n].data));return{result:e,output:i}}}}};function bn(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(r){e[i]=r,t.apply(n,e)}})}function yn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wn(t,e){yn(t,e),e.add(t)}function _n(t,e,n){yn(t,e),e.set(t,n)}function xn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function kn(t,e,n){return n(xn(t,e))}function An(t,e){return t.get(xn(t,e))}function Sn(t,e,n){return t.set(xn(t,e),n),n}Je=new WeakMap,Ze=new WeakMap,tn=new WeakMap;const En="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Cn=[.001,0,0,.001,0,0],Mn=1.35,Tn=1,Pn=2,Rn=4,Nn=16,Dn=32,Ln=64,In=128,On=256,Fn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jn="pdfjs_internal_editor_",Wn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},zn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Bn=0,Un=1,Hn=2,Vn=3,Gn=3,qn=4,Xn={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Kn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Yn=1,Qn=2,$n=3,Jn=4,Zn=5,ti={ERRORS:0,WARNINGS:1,INFOS:5},ei={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ni=0,ii=1,ri=2,si=3;let ai=ti.WARNINGS;function oi(t){Number.isInteger(t)&&(ai=t)}function li(){return ai}function ci(t){ai>=ti.INFOS&&console.log("Info: ".concat(t))}function ui(t){ai>=ti.WARNINGS&&console.log("Warning: ".concat(t))}function hi(t){throw new Error(t)}function di(t,e){t||hi(e)}function fi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;if(n&&"string"===typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null===e||void 0===e?void 0:e.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(r){}}const i=e?URL.parse(t,e):URL.parse(t);return function(t){switch(null===t||void 0===t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function pi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(t);return i?(i.hash=e,i.href):n&&fi(t,"http://example.com")?t.split("#",1)[0]+"".concat(e?"#".concat(e):""):""}function gi(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const mi=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class vi extends mi{constructor(t,e){super(t,"PasswordException"),this.code=e}}class bi extends mi{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class yi extends mi{constructor(t){super(t,"InvalidPDFException")}}class wi extends mi{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class _i extends mi{constructor(t){super(t,"FormatError")}}class xi extends mi{constructor(t){super(t,"AbortException")}}function ki(t){"object"===typeof t&&void 0!==(null===t||void 0===t?void 0:t.length)||hi("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Ai(t){"string"!==typeof t&&hi("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}class Si{static get isLittleEndian(){return gi(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return gi(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return gi(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return gi(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:t,userAgent:e}=navigator;return gi(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return gi(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Ei=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Ci{static makeHexColor(t,e,n){return"#".concat(Ei[t]).concat(Ei[e]).concat(Ei[n])}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5];for(let c=0;c<6;c+=2){const e=t[n+c],u=t[n+c+1];t[n+c]=e*i+u*s+o,t[n+c+1]=e*r+u*a+l}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=t[0],u=t[1],h=t[2],d=t[3];let f=i*c+o,p=f,g=i*h+o,m=g,v=a*u+l,b=v,y=a*d+l,w=y;if(0!==r||0!==s){const t=r*c,e=r*h,n=s*u,i=s*d;f+=n,m+=n,g+=i,p+=i,v+=t,w+=t,y+=e,b+=e}n[0]=Math.min(n[0],f,g,p,m),n[1]=Math.min(n[1],v,y,b,w),n[2]=Math.max(n[2],f,g,p,m),n[3]=Math.max(n[3],v,y,b,w)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],a=n**2+i**2,o=n*r+i*s,l=r**2+s**2,c=(a+l)/2,u=Math.sqrt(c**2-(a*l-o**2));e[0]=Math.sqrt(c+u||1),e[1]=Math.sqrt(c-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,n,i,r,s,a,o,l){l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o),xn(Ci,this,Ti).call(this,t,n,r,a,e,i,s,o,3*(3*(n-r)-t+a),6*(t-2*n+r),3*(n-t),l),xn(Ci,this,Ti).call(this,t,n,r,a,e,i,s,o,3*(3*(i-s)-e+o),6*(e-2*i+s),3*(i-e),l)}}function Mi(t,e,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,f=u*(u*(u*t+3*l*e)+3*h*n)+d*i,p=u*(u*(u*r+3*l*s)+3*h*a)+d*o;c[0]=Math.min(c[0],f),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],f),c[3]=Math.max(c[3],p)}function Ti(t,e,n,i,r,s,a,o,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&xn(en,this,Mi).call(this,t,e,n,i,r,s,a,o,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const f=Math.sqrt(d),p=2*l;xn(en,this,Mi).call(this,t,e,n,i,r,s,a,o,(-c+f)/p,h),xn(en,this,Mi).call(this,t,e,n,i,r,s,a,o,(-c-f)/p,h)}en=Ci;let Pi=null,Ri=null;function Ni(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),ki(t)}const Di="pdfjs_internal_id_";function Li(t,e,n){return Math.min(Math.max(t,e),n)}function Ii(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(ki(t))}"function"!==typeof Promise.try&&(Promise.try=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new Promise(e=>{e(t(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce((t,e)=>t+e,0)});const Oi="http://www.w3.org/2000/svg";class Fi{}async function ji(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Vi(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}nn=Fi,d(Fi,"CSS",96),d(Fi,"PDF",72),d(Fi,"PDF_TO_CSS_UNITS",nn.CSS/nn.PDF);class Wi{constructor(t){let{viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=t;this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f,p,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f),0===u?(p=Math.abs(c-e[1])*i+s,g=Math.abs(l-e[0])*i+a,m=(e[3]-e[1])*i,v=(e[2]-e[0])*i):(p=Math.abs(l-e[0])*i+s,g=Math.abs(c-e[1])*i+a,m=(e[2]-e[0])*i,v=(e[3]-e[1])*i),this.transform=[u*i,h*i,d*i,f*i,p-u*i*l-d*i*c,g-h*i*l-f*i*c],this.width=m,this.height=v}get rawDims(){const t=this.viewBox;return gi(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Wi({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return Ci.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Ci.applyTransform(e,this.transform);const n=[t[2],t[3]];return Ci.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Ci.applyInverseTransform(n,this.transform),n}}class zi extends mi{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function Bi(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function Ui(t){return"string"===typeof t&&/\.pdf$/i.test(t)}class Hi{constructor(){d(this,"started",Object.create(null)),d(this,"times",[])}time(t){t in this.started&&ui("Timer is already running for ".concat(t)),this.started[t]=Date.now()}timeEnd(t){t in this.started||ui("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push("".concat(n.padEnd(e)," ").concat(r-i,"ms\n"));return t.join("")}}function Vi(t,e){const n=e?URL.parse(t,e):URL.parse(t);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Gi(t){t.preventDefault()}function qi(t){t.preventDefault(),t.stopPropagation()}class Xi{static toDateObject(t){if(t instanceof Date)return t;if(!t||"string"!==typeof t)return null;xn(Xi,this,Ki)._||(Ki._=xn(Xi,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const e=xn(Xi,this,Ki)._.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,i,r,s,a,o))}}var Ki={_:void 0};function Yi(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ui('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function Qi(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function $i(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function Ji(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Wi){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:s}=t,a=Si.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),u=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&e.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&t.setAttribute("data-main-rotation",e.rotation)}class Zi{constructor(){const{pixelRatio:t}=Zi;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=Zi.capPixels(n,r))>0&&(s=Math.sqrt(n/(t*e))),-1!==i&&(a=i/t,o=i/e);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const tr=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var er=new WeakMap,nr=new WeakMap,ir=new WeakMap,rr=new WeakMap,sr=new WeakMap,ar=new WeakMap,or=new WeakMap,lr=new WeakSet;class cr{constructor(t){wn(this,lr),_n(this,er,null),_n(this,nr,null),_n(this,ir,void 0),_n(this,rr,null),_n(this,sr,null),_n(this,ar,null),_n(this,or,null),Sn(ir,this,t),gr._||(gr._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=Sn(er,this,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=An(ir,this)._uiManager._signal;t.addEventListener("contextmenu",Gi,{signal:e}),t.addEventListener("pointerdown",ur,{signal:e});const n=Sn(rr,this,document.createElement("div"));n.className="buttons",t.append(n);const i=An(ir,this).toolbarPosition;if(i){const{style:e}=t,n="ltr"===An(ir,this)._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd="".concat(100*n,"%"),e.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return t}get div(){return An(er,this)}hide(){var t;An(er,this).classList.add("hidden"),null===(t=An(nr,this))||void 0===t||t.hideDropdown()}show(){var t,e;An(er,this).classList.remove("hidden"),null===(t=An(sr,this))||void 0===t||t.shown(),null===(e=An(ar,this))||void 0===e||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=An(ir,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",gr._[t]),xn(lr,this,fr).call(this,n),n.addEventListener("click",t=>{e.delete()},{signal:e._signal}),An(rr,this).append(n)}async addAltText(t){const e=await t.render();xn(lr,this,fr).call(this,e),An(rr,this).append(e,kn(lr,this,pr)),Sn(sr,this,t)}addComment(t){if(An(ar,this))return;const e=t.render();e&&(xn(lr,this,fr).call(this,e),An(rr,this).prepend(e,kn(lr,this,pr)),Sn(ar,this,t),t.toolbar=this)}addColorPicker(t){if(An(nr,this))return;Sn(nr,this,t);const e=t.renderButton();xn(lr,this,fr).call(this,e),An(rr,this).append(e,kn(lr,this,pr))}async addEditSignatureButton(t){const e=Sn(or,this,await t.renderEditButton(An(ir,this)));xn(lr,this,fr).call(this,e),An(rr,this).append(e,kn(lr,this,pr))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e)}}updateEditSignatureButton(t){An(or,this)&&(An(or,this).title=t)}remove(){var t;An(er,this).remove(),null===(t=An(nr,this))||void 0===t||t.destroy(),Sn(nr,this,null)}}function ur(t){t.stopPropagation()}function hr(t){An(ir,this)._focusEventsAllowed=!1,qi(t)}function dr(t){An(ir,this)._focusEventsAllowed=!0,qi(t)}function fr(t){const e=An(ir,this)._uiManager._signal;t.addEventListener("focusin",xn(lr,this,hr).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",xn(lr,this,dr).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Gi,{signal:e})}function pr(t){const e=document.createElement("div");return e.className="divider",e}var gr={_:null},mr=new WeakMap,vr=new WeakMap,br=new WeakMap,yr=new WeakSet;class wr{constructor(t){wn(this,yr),_n(this,mr,null),_n(this,vr,null),_n(this,br,void 0),Sn(br,this,t)}show(t,e,n){const[i,r]=xn(yr,this,xr).call(this,e,n),{style:s}=An(vr,this)||Sn(vr,this,xn(yr,this,_r).call(this));t.append(An(vr,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){An(vr,this).remove()}}function _r(){const t=Sn(vr,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Gi,{signal:An(br,this)._signal});const e=Sn(mr,this,document.createElement("div"));return e.className="buttons",t.append(e),xn(yr,this,kr).call(this),t}function xr(t,e){let n=0,i=0;for(const r of t){const t=r.y+r.height;if(t<n)continue;const s=r.x+(e?r.width:0);t>n?(i=s,n=t):e?s>i&&(i=s):s<i&&(i=s)}return[e?1-i:i,n]}function kr(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=An(br,this)._signal;t.addEventListener("contextmenu",Gi,{signal:n}),t.addEventListener("click",()=>{An(br,this).highlightSelection("floating_button")},{signal:n}),An(mr,this).append(t)}function Ar(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}var Sr=new WeakMap;class Er{constructor(){_n(this,Sr,0)}get id(){var t,e;return"".concat(jn).concat((Sn(Sr,this,(t=An(Sr,this),e=t++,t)),e))}}var Cr=new WeakMap,Mr=new WeakMap,Tr=new WeakMap,Pr=new WeakSet;class Rr{constructor(){wn(this,Pr),_n(this,Cr,Ni()),_n(this,Mr,0),_n(this,Tr,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return gi(this,"_isSVGFittingCanvas",e.decode().then(()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return xn(Pr,this,Nr).call(this,"".concat(e,"_").concat(n,"_").concat(i,"_").concat(r),t)}async getFromUrl(t){return xn(Pr,this,Nr).call(this,t,t)}async getFromBlob(t,e){const n=await e;return xn(Pr,this,Nr).call(this,t,n)}async getFromId(t){An(Tr,this)||Sn(Tr,this,new Map);const e=An(Tr,this).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){var n,i,r;An(Tr,this)||Sn(Tr,this,new Map);let s=An(Tr,this).get(t);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(An(Cr,this),"_").concat((Sn(Mr,this,(n=An(Mr,this),i=n++,n)),i)),refCounter:1,isSvg:!1},An(Tr,this).set(t,s),An(Tr,this).set(s.id,s),s}getSvgUrl(t){const e=An(Tr,this).get(t);return null!==e&&void 0!==e&&e.isSvg?e.svgUrl:null}deleteId(t){var e;An(Tr,this)||Sn(Tr,this,new Map);const n=An(Tr,this).get(t);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const t=new OffscreenCanvas(i.width,i.height);t.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=t.convertToBlob()}null===(e=i.close)||void 0===e||e.call(i),n.bitmap=null}isValidId(t){return t.startsWith("image_".concat(An(Cr,this),"_"))}}async function Nr(t,e){var n;An(Tr,this)||Sn(Tr,this,new Map);let i=An(Tr,this).get(t);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let t;if(i||(i={bitmap:null,id:"image_".concat(An(Cr,this),"_").concat((Sn(Mr,this,(r=An(Mr,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof e?(i.url=e,t=await ji(e,"blob")):e instanceof File?t=i.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=rn._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((t,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;r.src=await e?"".concat(t,"#svgView(preserveAspectRatio(none))"):t},r.onerror=n.onerror=s});n.readAsDataURL(t),await s}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(a){ui(a),i=null}return An(Tr,this).set(t,i),i&&An(Tr,this).set(i.id,i),i}rn=Rr;var Dr=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,Or=new WeakMap;class Fr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_n(this,Dr,[]),_n(this,Lr,!1),_n(this,Ir,void 0),_n(this,Or,-1),Sn(Ir,this,t)}add(t){let{cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(r&&e(),An(Lr,this))return;const l={cmd:e,undo:n,post:i,type:s};if(-1===An(Or,this))return An(Dr,this).length>0&&(An(Dr,this).length=0),Sn(Or,this,0),void An(Dr,this).push(l);if(a&&An(Dr,this)[An(Or,this)].type===s)return o&&(l.undo=An(Dr,this)[An(Or,this)].undo),void(An(Dr,this)[An(Or,this)]=l);const c=An(Or,this)+1;c===An(Ir,this)?An(Dr,this).splice(0,1):(Sn(Or,this,c),c<An(Dr,this).length&&An(Dr,this).splice(c)),An(Dr,this).push(l)}undo(){if(-1===An(Or,this))return;Sn(Lr,this,!0);const{undo:t,post:e}=An(Dr,this)[An(Or,this)];t(),null===e||void 0===e||e(),Sn(Lr,this,!1),Sn(Or,this,An(Or,this)-1)}redo(){if(An(Or,this)<An(Dr,this).length-1){Sn(Or,this,An(Or,this)+1),Sn(Lr,this,!0);const{cmd:t,post:e}=An(Dr,this)[An(Or,this)];t(),null===e||void 0===e||e(),Sn(Lr,this,!1)}}hasSomethingToUndo(){return-1!==An(Or,this)}hasSomethingToRedo(){return An(Or,this)<An(Dr,this).length-1}cleanType(t){if(-1!==An(Or,this)){for(let e=An(Or,this);e>=0;e--)if(An(Dr,this)[e].type!==t)return An(Dr,this).splice(e+1,An(Or,this)-e),void Sn(Or,this,e);An(Dr,this).length=0,Sn(Or,this,-1)}}destroy(){Sn(Dr,this,null)}}var jr=new WeakSet;class Wr{constructor(t){wn(this,jr),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Si.platform;for(const[n,i,r={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(xn(jr,this,zr).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...s,e)(),r||qi(e))}}function zr(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}class Br{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,Yi(i))}e.remove()}(t),gi(this,"_colors",t)}convert(t){const e=Yi(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((t,n)=>t===e[n]))return Br._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Ci.makeHexColor(...e):t}}d(Br,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Ur=new WeakMap,Hr=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,qr=new WeakMap,Xr=new WeakMap,Kr=new WeakMap,Yr=new WeakMap,Qr=new WeakMap,$r=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,ts=new WeakMap,es=new WeakMap,ns=new WeakMap,is=new WeakMap,rs=new WeakMap,ss=new WeakMap,as=new WeakMap,os=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,hs=new WeakMap,ds=new WeakMap,fs=new WeakMap,ps=new WeakMap,gs=new WeakMap,ms=new WeakMap,vs=new WeakMap,bs=new WeakMap,ys=new WeakMap,ws=new WeakMap,_s=new WeakMap,xs=new WeakMap,ks=new WeakMap,As=new WeakMap,Ss=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Ts=new WeakMap,Ps=new WeakMap,Rs=new WeakMap,Ns=new WeakMap,Ds=new WeakMap,Ls=new WeakSet;class Is{static get _keyboardManager(){const t=Is.prototype,e=t=>An(Ps,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),n=(t,e)=>{let{target:n}=e;if(n instanceof HTMLInputElement){const{type:t}=n;return"text"!==t&&"number"!==t}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return gi(this,"_keyboardManager",new Wr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&An(Ps,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&An(Ps,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,i,r,s,a,o,l,c,u,h,f,p,g,m){wn(this,Ls),_n(this,Ur,new AbortController),_n(this,Hr,null),_n(this,Vr,new Map),_n(this,Gr,new Map),_n(this,qr,null),_n(this,Xr,null),_n(this,Kr,null),_n(this,Yr,new Fr),_n(this,Qr,null),_n(this,$r,null),_n(this,Jr,null),_n(this,Zr,0),_n(this,ts,new Set),_n(this,es,null),_n(this,ns,null),_n(this,is,new Set),d(this,"_editorUndoBar",null),_n(this,rs,!1),_n(this,ss,!1),_n(this,as,!1),_n(this,os,null),_n(this,ls,null),_n(this,cs,null),_n(this,us,null),_n(this,hs,!1),_n(this,ds,null),_n(this,fs,new Er),_n(this,ps,!1),_n(this,gs,!1),_n(this,ms,null),_n(this,vs,null),_n(this,bs,null),_n(this,ys,null),_n(this,ws,null),_n(this,_s,Wn.NONE),_n(this,xs,new Set),_n(this,ks,null),_n(this,As,null),_n(this,Ss,null),_n(this,Es,null),_n(this,Cs,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),_n(this,Ms,[0,0]),_n(this,Ts,null),_n(this,Ps,null),_n(this,Rs,null),_n(this,Ns,null),_n(this,Ds,null);const v=this._signal=An(Ur,this).signal;Sn(Ps,this,t),Sn(Rs,this,e),Sn(Ns,this,n),Sn(qr,this,i),Sn(Qr,this,r),Sn(As,this,s),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",t=>this.updateParams(t.type,t.value),{signal:v}),xn(Ls,this,Bs).call(this),xn(Ls,this,Ks).call(this),xn(Ls,this,Vs).call(this),Sn(Xr,this,o.annotationStorage),Sn(os,this,o.filterFactory),Sn(Ss,this,l),Sn(us,this,c||null),Sn(rs,this,u),Sn(ss,this,h),Sn(as,this,f),Sn(ws,this,p||null),this.viewParameters={realScale:Fi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=!1!==m}destroy(){var t,e,n,i,r,s,a,o,l;null===(t=An(Ds,this))||void 0===t||t.resolve(),Sn(Ds,this,null),null===(e=An(Ur,this))||void 0===e||e.abort(),Sn(Ur,this,null),this._signal=null;for(const c of An(Gr,this).values())c.destroy();An(Gr,this).clear(),An(Vr,this).clear(),An(is,this).clear(),null===(n=An(ys,this))||void 0===n||n.clear(),Sn(Hr,this,null),An(xs,this).clear(),An(Yr,this).destroy(),null===(i=An(qr,this))||void 0===i||i.destroy(),null===(r=An(Qr,this))||void 0===r||r.destroy(),null===(s=An(As,this))||void 0===s||s.destroy(),null===(a=An(ds,this))||void 0===a||a.hide(),Sn(ds,this,null),null===(o=An(bs,this))||void 0===o||o.destroy(),Sn(bs,this,null),An(ls,this)&&(clearTimeout(An(ls,this)),Sn(ls,this,null)),An(Ts,this)&&(clearTimeout(An(Ts,this)),Sn(Ts,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return An(ws,this)}get useNewAltTextFlow(){return An(ss,this)}get useNewAltTextWhenAddingImage(){return An(as,this)}get hcmFilter(){return gi(this,"hcmFilter",An(Ss,this)?An(os,this).addHCMFilter(An(Ss,this).foreground,An(Ss,this).background):"none")}get direction(){return gi(this,"direction",getComputedStyle(An(Ps,this)).direction)}get _highlightColors(){return gi(this,"_highlightColors",An(us,this)?new Map(An(us,this).split(",").map(t=>(t=t.split("=").map(t=>t.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return gi(this,"highlightColors",null);const e=new Map,n=!!An(Ss,this);for(const[i,r]of t){const t=i.endsWith("_HCM");n&&t?e.set(i.replace("_HCM",""),r):n||t||e.set(i,r)}return gi(this,"highlightColors",e)}get highlightColorNames(){return gi(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Sn(Jr,this,t)}setMainHighlightColorPicker(t){Sn(bs,this,t)}editAltText(t){var e;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=An(qr,this))||void 0===e||e.editAltText(this,t,n)}hasCommentManager(){return!!An(Qr,this)}editComment(t,e){var n;null===(n=An(Qr,this))||void 0===n||n.open(this,t,e)}getSignature(t){var e;null===(e=An(As,this))||void 0===e||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return An(As,this)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference(t){let{name:e,value:n}=t;if("enableNewAltTextWhenAddingImage"===e)Sn(as,this,n)}onPageChanging(t){let{pageNumber:e}=t;Sn(Zr,this,e-1)}focusMainContainer(){An(Ps,this).focus()}findParent(t,e){for(const n of An(Gr,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+s&&e>=r&&e<=r+a)return n}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];An(Rs,this).classList.toggle("noUserSelect",t)}addShouldRescale(t){An(is,this).add(t)}removeShouldRescale(t){An(is,this).delete(t)}onScaleChanging(t){var e;let{scale:n}=t;this.commitOrRemove(),this.viewParameters.realScale=n*Fi.PDF_TO_CSS_UNITS;for(const i of An(is,this))i.onScaleChanging();null===(e=An(Jr,this))||void 0===e||e.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=e,a=e.toString(),o=xn(Ls,this,Os).call(this,e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;e.empty();const c=xn(Ls,this,Fs).call(this,o),u=An(_s,this)===Wn.NONE,h=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s,text:a}),u&&this.showAllEditors("highlight",!0,!0)};u?this.switchToMode(Wn.HIGHLIGHT,h):h()}addToAnnotationStorage(t){t.isEmpty()||!An(Xr,this)||An(Xr,this).has(t.id)||An(Xr,this).setValue(t.id,t)}a11yAlert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=An(Ns,this);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,An(hs,this)&&(Sn(hs,this,!1),xn(Ls,this,zs).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of An(xs,this))if(e.div.contains(t)){Sn(vs,this,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!An(vs,this))return;const[t,e]=An(vs,this);Sn(vs,this,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){xn(Ls,this,Vs).call(this),xn(Ls,this,qs).call(this)}removeEditListeners(){xn(Ls,this,Gs).call(this),xn(Ls,this,Xs).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of An(ns,this))if(n.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const n of An(ns,this))if(n.isHandlingMimeForPasting(e.type))return n.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null===(e=An(Hr,this))||void 0===e||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of An(xs,this)){const t=i.serialize(!0);t&&n.push(t)}0!==n.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const t of An(ns,this))if(t.isHandlingMimeForPasting(s.type))return void t.paste(s,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void ui('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const t=[];for(const s of n){const e=await i.deserialize(s);if(!e)return;t.push(e)}const e=()=>{for(const e of t)xn(Ls,this,Zs).call(this,e);xn(Ls,this,na).call(this,t)},r=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:r,mustExec:!0})}catch(r){ui('paste: "'.concat(r.message,'".'))}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),An(_s,this)===Wn.NONE||this.isEditorHandlingKeyboard||Is._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,An(hs,this)&&(Sn(hs,this,!1),xn(Ls,this,zs).call(this,"main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(t){t?(xn(Ls,this,Us).call(this),xn(Ls,this,qs).call(this),xn(Ls,this,Ys).call(this,{isEditing:An(_s,this)!==Wn.NONE,isEmpty:xn(Ls,this,ea).call(this),hasSomethingToUndo:An(Yr,this).hasSomethingToUndo(),hasSomethingToRedo:An(Yr,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(xn(Ls,this,Hs).call(this),xn(Ls,this,Xs).call(this),xn(Ls,this,Ys).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!An(ns,this)){Sn(ns,this,t);for(const t of An(ns,this))xn(Ls,this,Qs).call(this,t.defaultPropertiesToUpdate)}}getId(){return An(fs,this).id}get currentLayer(){return An(Gr,this).get(An(Zr,this))}getLayer(t){return An(Gr,this).get(t)}get currentPageIndex(){return An(Zr,this)}addLayer(t){An(Gr,this).set(t.pageIndex,t),An(ps,this)?t.enable():t.disable()}removeLayer(t){An(Gr,this).delete(t.pageIndex)}async updateMode(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(An(_s,this)!==t&&(!An(Ds,this)||(await An(Ds,this).promise,An(Ds,this)))){var a,o;if(Sn(Ds,this,Promise.withResolvers()),null===(e=An(Jr,this))||void 0===e||e.commitOrRemove(),Sn(_s,this,t),t===Wn.NONE)return this.setEditingState(!1),xn(Ls,this,Js).call(this),null===(a=this._editorUndoBar)||void 0===a||a.hide(),void An(Ds,this).resolve();if(t===Wn.SIGNATURE)await(null===(o=An(As,this))||void 0===o?void 0:o.loadSignatures());this.setEditingState(!0),await xn(Ls,this,$s).call(this),this.unselectAll();for(const e of An(Gr,this).values())e.updateMode(t);if(!n)return i&&this.addNewEditorFromKeyboard(),void An(Ds,this).resolve();for(const t of An(Vr,this).values())t.annotationElementId===n||t.id===n?(this.setSelected(t),s?t.editComment():r&&t.enterInEditMode()):t.unselect();An(Ds,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==An(_s,this)&&this._eventBus.dispatch("switchannotationeditormode",p({source:this},t))}updateParams(t,e){if(An(ns,this)){switch(t){case zn.CREATE:return void this.currentLayer.addNewEditor(e);case zn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(An(Es,this)||Sn(Es,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}if(this.hasSelection)for(const n of An(xs,this))n.updateParams(t,e);else for(const n of An(ns,this))n.updateDefaultParams(t,e)}}showAllEditors(t,e){var n,i;for(const r of An(Vr,this).values())r.editorType===t&&r.show(e);(null===(n=null===(i=An(Es,this))||void 0===i?void 0:i.get(zn.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&xn(Ls,this,Qs).call(this,[[zn.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(An(gs,this)!==t){Sn(gs,this,t);for(const e of An(Gr,this).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of An(Vr,this).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return An(Vr,this).get(t)}addEditor(t){An(Vr,this).set(t.id,t)}removeEditor(t){var e,n;(t.div.contains(document.activeElement)&&(An(ls,this)&&clearTimeout(An(ls,this)),Sn(ls,this,setTimeout(()=>{this.focusMainContainer(),Sn(ls,this,null)},0))),An(Vr,this).delete(t.id),t.annotationElementId)&&(null===(e=An(ys,this))||void 0===e||e.delete(t.annotationElementId));(this.unselect(t),t.annotationElementId&&An(ts,this).has(t.annotationElementId))||(null===(n=An(Xr,this))||void 0===n||n.remove(t.id))}addDeletedAnnotationElement(t){An(ts,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return An(ts,this).has(t)}removeDeletedAnnotationElement(t){An(ts,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){An(Hr,this)!==t&&(Sn(Hr,this,t),t&&xn(Ls,this,Qs).call(this,t.propertiesToUpdate))}updateUI(t){kn(Ls,this,ta)===t&&xn(Ls,this,Qs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){xn(Ls,this,Qs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(An(xs,this).has(t))return An(xs,this).delete(t),t.unselect(),void xn(Ls,this,Ys).call(this,{hasSelectedEditor:this.hasSelection});An(xs,this).add(t),t.select(),xn(Ls,this,Qs).call(this,t.propertiesToUpdate),xn(Ls,this,Ys).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),null===(e=An(Jr,this))||void 0===e||e.commitOrRemove();for(const n of An(xs,this))n!==t&&n.unselect();An(xs,this).clear(),An(xs,this).add(t),t.select(),xn(Ls,this,Qs).call(this,t.propertiesToUpdate),xn(Ls,this,Ys).call(this,{hasSelectedEditor:!0})}isSelected(t){return An(xs,this).has(t)}get firstSelectedEditor(){return An(xs,this).values().next().value}unselect(t){t.unselect(),An(xs,this).delete(t),xn(Ls,this,Ys).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==An(xs,this).size}get isEnterHandled(){return 1===An(xs,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var t;An(Yr,this).undo(),xn(Ls,this,Ys).call(this,{hasSomethingToUndo:An(Yr,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:xn(Ls,this,ea).call(this)}),null===(t=this._editorUndoBar)||void 0===t||t.hide()}redo(){An(Yr,this).redo(),xn(Ls,this,Ys).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:An(Yr,this).hasSomethingToRedo(),isEmpty:xn(Ls,this,ea).call(this)})}addCommands(t){An(Yr,this).add(t),xn(Ls,this,Ys).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:xn(Ls,this,ea).call(this)})}cleanUndoStack(t){An(Yr,this).cleanType(t)}delete(){var t;this.commitOrRemove();const e=null===(t=this.currentLayer)||void 0===t?void 0:t.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...An(xs,this)],i=()=>{for(const t of n)xn(Ls,this,Zs).call(this,t)};this.addCommands({cmd:()=>{var t;null===(t=this._editorUndoBar)||void 0===t||t.show(i,1===n.length?n[0].editorType:n.length);for(const e of n)e.remove()},undo:i,mustExec:!0})}commitOrRemove(){var t;null===(t=An(Hr,this))||void 0===t||t.commitOrRemove()}hasSomethingToControl(){return An(Hr,this)||this.hasSelection}selectAll(){for(const t of An(xs,this))t.commit();xn(Ls,this,na).call(this,An(Vr,this).values())}unselectAll(){var t;if((!An(Hr,this)||(An(Hr,this).commitOrRemove(),An(_s,this)===Wn.NONE))&&(null===(t=An(Jr,this))||void 0===t||!t.commitOrRemove())&&this.hasSelection){for(const t of An(xs,this))t.unselect();An(xs,this).clear(),xn(Ls,this,Ys).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;An(Ms,this)[0]+=t,An(Ms,this)[1]+=e;const[n,i]=An(Ms,this),r=[...An(xs,this)];An(Ts,this)&&clearTimeout(An(Ts,this)),Sn(Ts,this,setTimeout(()=>{Sn(Ts,this,null),An(Ms,this)[0]=An(Ms,this)[1]=0,this.addCommands({cmd:()=>{for(const t of r)An(Vr,this).has(t.id)&&(t.translateInPage(n,i),t.translationDone())},undo:()=>{for(const t of r)An(Vr,this).has(t.id)&&(t.translateInPage(-n,-i),t.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(t,e),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Sn(es,this,new Map);for(const t of An(xs,this))An(es,this).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!An(es,this))return!1;this.disableUserSelect(!1);const t=An(es,this);Sn(es,this,null);let e=!1;for(const[{x:i,y:r,pageIndex:s},a]of t)a.newX=i,a.newY=r,a.newPageIndex=s,e||(e=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!e)return!1;const n=(t,e,n,i)=>{if(An(Vr,this).has(t.id)){const r=An(Gr,this).get(i);r?t._setParentAndPosition(r,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:r,newPageIndex:s}]of t)n(e,i,r,s)},undo:()=>{for(const[e,{savedX:i,savedY:r,savedPageIndex:s}]of t)n(e,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(An(es,this))for(const n of An(es,this).keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===An(xs,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return An(Hr,this)===t}getActive(){return An(Hr,this)}getMode(){return An(_s,this)}get imageManager(){return gi(this,"imageManager",new Rr)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,c=e.rangeCount;l<c;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-i)/s,y:1-(t+a-n)/r,width:o/s,height:a/r});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-n)/r,y:1-(e+o-i)/s,width:a/r,height:o/s});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-i)/s,y:(t-n)/r,width:o/s,height:a/r});break;default:a=(t,e,a,o)=>({x:(t-n)/r,y:(e-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=e.rangeCount;l<c;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:n,width:i,height:r}of t.getClientRects())0!==i&&0!==r&&o.push(a(e,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:n}=t;(An(Kr,this)||Sn(Kr,this,new Map)).set(e,n)}removeChangedExistingAnnotation(t){var e;let{annotationElementId:n}=t;null===(e=An(Kr,this))||void 0===e||e.delete(n)}renderAnnotationElement(t){var e;const n=null===(e=An(Kr,this))||void 0===e?void 0:e.get(t.data.id);if(!n)return;const i=An(Xr,this).getRawValue(n);i&&(An(_s,this)!==Wn.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}setMissingCanvas(t,e,n){var i;const r=null===(i=An(ys,this))||void 0===i?void 0:i.get(t);r&&(r.setCanvas(e,n),An(ys,this).delete(t))}addMissingCanvas(t,e){(An(ys,this)||Sn(ys,this,new Map)).set(t,e)}}function Os(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function Fs(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of An(Gr,this).values())if(n.hasTextLayer(t))return n;return null}function js(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=xn(Ls,this,Os).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(An(ds,this)||Sn(ds,this,new wr(this)),An(ds,this).show(e,n,"ltr"===this.direction))}function Ws(){var t;const e=document.getSelection();if(!e||e.isCollapsed){var n;if(An(ks,this))null===(n=An(ds,this))||void 0===n||n.hide(),Sn(ks,this,null),xn(Ls,this,Ys).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=e;if(i===An(ks,this))return;const r=xn(Ls,this,Os).call(this,e).closest(".textLayer");var s;if(r){if(null===(t=An(ds,this))||void 0===t||t.hide(),Sn(ks,this,i),xn(Ls,this,Ys).call(this,{hasSelectedText:!0}),(An(_s,this)===Wn.HIGHLIGHT||An(_s,this)===Wn.NONE)&&(An(_s,this)===Wn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Sn(hs,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=An(_s,this)===Wn.HIGHLIGHT?xn(Ls,this,Fs).call(this,r):null;null===t||void 0===t||t.toggleDrawing();const e=new AbortController,n=this.combinedSignal(e),i=n=>{"pointerup"===n.type&&0!==n.button||(e.abort(),null===t||void 0===t||t.toggleDrawing(!0),"pointerup"===n.type&&xn(Ls,this,zs).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else An(ks,this)&&(null===(s=An(ds,this))||void 0===s||s.hide(),Sn(ks,this,null),xn(Ls,this,Ys).call(this,{hasSelectedText:!1}))}function zs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";An(_s,this)===Wn.HIGHLIGHT?this.highlightSelection(t):An(rs,this)&&xn(Ls,this,js).call(this)}function Bs(){document.addEventListener("selectionchange",xn(Ls,this,Ws).bind(this),{signal:this._signal})}function Us(){if(An(cs,this))return;Sn(cs,this,new AbortController);const t=this.combinedSignal(An(cs,this));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}function Hs(){var t;null===(t=An(cs,this))||void 0===t||t.abort(),Sn(cs,this,null)}function Vs(){if(An(ms,this))return;Sn(ms,this,new AbortController);const t=this.combinedSignal(An(ms,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}function Gs(){var t;null===(t=An(ms,this))||void 0===t||t.abort(),Sn(ms,this,null)}function qs(){if(An($r,this))return;Sn($r,this,new AbortController);const t=this.combinedSignal(An($r,this));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}function Xs(){var t;null===(t=An($r,this))||void 0===t||t.abort(),Sn($r,this,null)}function Ks(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function Ys(t){Object.entries(t).some(t=>{let[e,n]=t;return An(Cs,this)[e]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(An(Cs,this),t)}),An(_s,this)===Wn.HIGHLIGHT&&!1===t.hasSelectedEditor&&xn(Ls,this,Qs).call(this,[[zn.HIGHLIGHT_FREE,!0]]))}function Qs(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}async function $s(){if(!An(ps,this)){Sn(ps,this,!0);const t=[];for(const e of An(Gr,this).values())t.push(e.enable());await Promise.all(t);for(const e of An(Vr,this).values())e.enable()}}function Js(){if(this.unselectAll(),An(ps,this)){Sn(ps,this,!1);for(const t of An(Gr,this).values())t.disable();for(const t of An(Vr,this).values())t.disable()}}function Zs(t){const e=An(Gr,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function ta(t){let e=null;for(e of An(xs,t));return e}function ea(){if(0===An(Vr,this).size)return!0;if(1===An(Vr,this).size)for(const t of An(Vr,this).values())return t.isEmpty();return!1}function na(t){for(const e of An(xs,this))e.unselect();An(xs,this).clear();for(const e of t)e.isEmpty()||(An(xs,this).add(e),e.select());xn(Ls,this,Ys).call(this,{hasSelectedEditor:this.hasSelection})}d(Is,"TRANSLATE_SMALL",1),d(Is,"TRANSLATE_BIG",10);var ia=new WeakMap,ra=new WeakMap,sa=new WeakMap,aa=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,ha=new WeakMap,da=new WeakMap,fa=new WeakMap,pa=new WeakMap,ga=new WeakSet;class ma{constructor(t){wn(this,ga),_n(this,ia,null),_n(this,ra,!1),_n(this,sa,null),_n(this,aa,null),_n(this,oa,null),_n(this,la,null),_n(this,ca,!1),_n(this,ua,null),_n(this,ha,null),_n(this,da,null),_n(this,fa,null),_n(this,pa,!1),Sn(ha,this,t),Sn(pa,this,t._uiManager.useNewAltTextFlow),ya._||(ya._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){var e;null!==(e=ma._l10n)&&void 0!==e||(ma._l10n=t)}async render(){const t=Sn(sa,this,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=Sn(aa,this,document.createElement("span"));t.append(e),An(pa,this)?(t.classList.add("new"),t.setAttribute("data-l10n-id",ya._.missing),e.setAttribute("data-l10n-id",ya._["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=An(ha,this)._uiManager._signal;t.addEventListener("contextmenu",Gi,{signal:n}),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),An(ha,this)._uiManager.editAltText(An(ha,this)),An(pa,this)&&An(ha,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:kn(ga,this,va)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Sn(ca,this,!0),i(e))},{signal:n}),await xn(ga,this,ba).call(this),t}finish(){An(sa,this)&&(An(sa,this).focus({focusVisible:An(ca,this)}),Sn(ca,this,!1))}isEmpty(){return An(pa,this)?null===An(ia,this):!An(ia,this)&&!An(ra,this)}hasData(){return An(pa,this)?null!==An(ia,this)||!!An(da,this):this.isEmpty()}get guessedText(){return An(da,this)}async setGuessedText(t){null===An(ia,this)&&(Sn(da,this,t),Sn(fa,this,await ma._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),xn(ga,this,ba).call(this))}toggleAltTextBadge(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;if(!An(pa,this)||An(ia,this))return null===(e=An(ua,this))||void 0===e||e.remove(),void Sn(ua,this,null);if(!An(ua,this)){const t=Sn(ua,this,document.createElement("div"));t.className="noAltTextBadge",An(ha,this).div.append(t)}An(ua,this).classList.toggle("hidden",!t)}serialize(t){let e=An(ia,this);return t||An(da,this)!==e||(e=An(fa,this)),{altText:e,decorative:An(ra,this),guessedText:An(da,this),textWithDisclaimer:An(fa,this)}}get data(){return{altText:An(ia,this),decorative:An(ra,this)}}set data(t){let{altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=t;i&&(Sn(da,this,i),Sn(fa,this,r)),An(ia,this)===e&&An(ra,this)===n||(s||(Sn(ia,this,e),Sn(ra,this,n)),xn(ga,this,ba).call(this))}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];An(sa,this)&&(!t&&An(la,this)&&(clearTimeout(An(la,this)),Sn(la,this,null)),An(sa,this).disabled=!t)}shown(){An(ha,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:kn(ga,this,va)}})}destroy(){var t,e;null===(t=An(sa,this))||void 0===t||t.remove(),Sn(sa,this,null),Sn(aa,this,null),Sn(oa,this,null),null===(e=An(ua,this))||void 0===e||e.remove(),Sn(ua,this,null)}}function va(t){return(An(ia,t)?"added":null===An(ia,t)&&t.guessedText&&"review")||"missing"}async function ba(){const t=An(sa,this);if(!t)return;if(An(pa,this)){var e,n;if(t.classList.toggle("done",!!An(ia,this)),t.setAttribute("data-l10n-id",ya._[kn(ga,this,va)]),null===(e=An(aa,this))||void 0===e||e.setAttribute("data-l10n-id",ya._["".concat(kn(ga,this,va),"-label")]),!An(ia,this))return void(null===(n=An(oa,this))||void 0===n||n.remove())}else{var i;if(!An(ia,this)&&!An(ra,this))return t.classList.remove("done"),void(null===(i=An(oa,this))||void 0===i||i.remove());t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=An(oa,this);if(!r){Sn(oa,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(An(ha,this).id);const e=100,n=An(ha,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(An(la,this)),Sn(la,this,null)},{once:!0}),t.addEventListener("mouseenter",()=>{Sn(la,this,setTimeout(()=>{Sn(la,this,null),An(oa,this).classList.add("show"),An(ha,this)._reportTelemetry({action:"alt_text_tooltip"})},e))},{signal:n}),t.addEventListener("mouseleave",()=>{var t;An(la,this)&&(clearTimeout(An(la,this)),Sn(la,this,null)),null===(t=An(oa,this))||void 0===t||t.classList.remove("show")},{signal:n})}An(ra,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=An(ia,this)),r.parentNode||t.append(r);const s=An(ha,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var ya={_:null};d(ma,"_l10n",null);var wa=new WeakMap,_a=new WeakMap,xa=new WeakMap,ka=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,Ea=new WeakMap;class Ca{constructor(t){_n(this,wa,null),_n(this,_a,!1),_n(this,xa,null),_n(this,ka,null),_n(this,Aa,null),_n(this,Sa,null),_n(this,Ea,!1),Sn(xa,this,t),this.toolbar=null}render(){if(!An(xa,this)._uiManager.hasCommentManager())return null;const t=Sn(wa,this,document.createElement("button"));t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=An(xa,this)._uiManager._signal;t.addEventListener("contextmenu",Gi,{signal:e}),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:e});const n=t=>{t.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:e}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Sn(_a,this,!0),n(e))},{signal:e}),t}edit(){const{bottom:t,left:e,right:n}=An(xa,this).getClientDimensions(),i={top:t};"ltr"===An(xa,this)._uiManager.direction?i.right=n:i.left=e,An(xa,this)._uiManager.editComment(An(xa,this),i)}finish(){An(wa,this)&&(An(wa,this).focus({focusVisible:An(_a,this)}),Sn(_a,this,!1))}isDeleted(){return An(Ea,this)||""===An(Aa,this)}hasBeenEdited(){return this.isDeleted()||An(Aa,this)!==An(ka,this)}serialize(){return this.data}get data(){return{text:An(Aa,this),date:An(Sa,this),deleted:An(Ea,this)}}set data(t){if(null===t)return Sn(Aa,this,""),void Sn(Ea,this,!0);Sn(Aa,this,t),Sn(Sa,this,new Date),Sn(Ea,this,!1)}setInitialText(t){Sn(ka,this,t),this.data=t}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];An(wa,this)&&(An(wa,this).disabled=!t)}shown(){}destroy(){var t;null===(t=An(wa,this))||void 0===t||t.remove(),Sn(wa,this,null),Sn(Aa,this,""),Sn(Sa,this,null),Sn(xa,this,null),Sn(_a,this,!1),Sn(Ea,this,!1)}}var Ma=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,Na=new WeakMap,Da=new WeakMap,La=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,Fa=new WeakMap,ja=new WeakMap,Wa=new WeakMap,za=new WeakSet;class Ba{constructor(t){let{container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=t;wn(this,za),_n(this,Ma,void 0),_n(this,Ta,!1),_n(this,Pa,null),_n(this,Ra,void 0),_n(this,Na,void 0),_n(this,Da,void 0),_n(this,La,void 0),_n(this,Ia,null),_n(this,Oa,void 0),_n(this,Fa,null),_n(this,ja,void 0),_n(this,Wa,null),Sn(Ma,this,e),Sn(Pa,this,i),Sn(Ra,this,n),Sn(Na,this,r),Sn(Da,this,s),Sn(La,this,a),Sn(ja,this,new AbortController),Sn(Oa,this,AbortSignal.any([o,An(ja,this).signal])),e.addEventListener("touchstart",xn(za,this,Ua).bind(this),{passive:!1,signal:An(Oa,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Zi.pixelRatio}destroy(){var t,e;null===(t=An(ja,this))||void 0===t||t.abort(),Sn(ja,this,null),null===(e=An(Ia,this))||void 0===e||e.abort(),Sn(Ia,this,null)}}function Ua(t){var e,n;if(null!==(e=An(Ra,this))&&void 0!==e&&e.call(this))return;if(1===t.touches.length){if(An(Ia,this))return;const t=Sn(Ia,this,new AbortController),e=AbortSignal.any([An(Oa,this),t.signal]),n=An(Ma,this),i={capture:!0,signal:e,passive:!1},r=t=>{var e;"touch"===t.pointerType&&(null===(e=An(Ia,this))||void 0===e||e.abort(),Sn(Ia,this,null))};return n.addEventListener("pointerdown",t=>{"touch"===t.pointerType&&(qi(t),r(t))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!An(Wa,this)){var i;Sn(Wa,this,new AbortController);const t=AbortSignal.any([An(Oa,this),An(Wa,this).signal]),e=An(Ma,this),n={signal:t,capture:!1,passive:!1};e.addEventListener("touchmove",xn(za,this,Ha).bind(this),n);const r=xn(za,this,Va).bind(this);e.addEventListener("touchend",r,n),e.addEventListener("touchcancel",r,n),n.capture=!0,e.addEventListener("pointerdown",qi,n),e.addEventListener("pointermove",qi,n),e.addEventListener("pointercancel",qi,n),e.addEventListener("pointerup",qi,n),null===(i=An(Na,this))||void 0===i||i.call(this)}if(qi(t),2!==t.touches.length||null!==(n=An(Pa,this))&&void 0!==n&&n.call(this))return void Sn(Fa,this,null);let[r,s]=t.touches;r.identifier>s.identifier&&([r,s]=[s,r]),Sn(Fa,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function Ha(t){var e;if(!An(Fa,this)||2!==t.touches.length)return;qi(t);let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=An(Fa,this),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,f=h-c,p=d-u,g=a-r,m=o-s,v=Math.hypot(g,m)||1,b=Math.hypot(f,p)||1;if(!An(Ta,this)&&Math.abs(b-v)<=sn.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!An(Ta,this))return void Sn(Ta,this,!0);const y=[(r+a)/2,(s+o)/2];null===(e=An(Da,this))||void 0===e||e.call(this,y,b,v)}function Va(t){if(!(t.touches.length>=2)){var e;if(An(Wa,this))An(Wa,this).abort(),Sn(Wa,this,null),null===(e=An(La,this))||void 0===e||e.call(this);An(Fa,this)&&(qi(t),Sn(Fa,this,null),Sn(Ta,this,!1))}}sn=Ba;var Ga=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,$a=new WeakMap,Ja=new WeakMap,Za=new WeakMap,to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=new WeakMap,ro=new WeakMap,so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap,ho=new WeakMap,fo=new WeakMap,po=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakSet;class bo{static get _resizerKeyboardManager(){const t=bo.prototype._resizeWithKeyboard,e=Is.TRANSLATE_SMALL,n=Is.TRANSLATE_BIG;return gi(this,"_resizerKeyboardManager",new Wr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],bo.prototype._stopResizingWithKeyboard]]))}constructor(t){wn(this,vo),_n(this,Ga,null),_n(this,qa,null),_n(this,Xa,null),_n(this,Ka,null),_n(this,Ya,!1),_n(this,Qa,null),_n(this,$a,""),_n(this,Ja,!1),_n(this,Za,null),_n(this,to,null),_n(this,eo,null),_n(this,no,null),_n(this,io,""),_n(this,ro,!1),_n(this,so,null),_n(this,ao,!1),_n(this,oo,!1),_n(this,lo,!1),_n(this,co,null),_n(this,uo,0),_n(this,ho,0),_n(this,fo,null),_n(this,po,null),d(this,"isSelected",!1),d(this,"_isCopy",!1),d(this,"_editToolbar",null),d(this,"_initialOptions",Object.create(null)),d(this,"_initialData",null),d(this,"_isVisible",!0),d(this,"_uiManager",null),d(this,"_focusEventsAllowed",!0),_n(this,go,!1),_n(this,mo,bo._zIndex++),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return gi(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new jo({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){var n;if(null!==(n=bo._l10n)&&void 0!==n||(bo._l10n=t),bo._l10nResizer||(bo._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==bo._borderLineWidth)return;const i=getComputedStyle(document.documentElement);bo._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){hi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return An(go,this)}set _isDraggable(t){var e;Sn(go,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=An(mo,this)}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):xn(vo,this,Fo).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(An(ro,this)?Sn(ro,this,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=t.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/s,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){xn(vo,this,yo).call(this,this.parentDimensions,t,e)}translateInPage(t,e){An(so,this)||Sn(so,this,[this.x,this.y,this.width,this.height]),xn(vo,this,yo).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){An(so,this)||Sn(so,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!An(so,this)&&(An(so,this)[0]!==this.x||An(so,this)[1]!==this.y)}get _hasBeenResized(){return!!An(so,this)&&(An(so,this)[2]!==this.width||An(so,this)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=bo,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=n,o*=i,r*=n,s*=i,this._mustFixPosition)switch(t){case 0:r=Li(r,0,n-a),s=Li(s,0,i-o);break;case 90:r=Li(r,0,n-o),s=Li(s,a,i);break;case 180:r=Li(r,a,n),s=Li(s,o,i);break;case 270:r=Li(r,o,n),s=Li(s,0,i-a)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,e.left="".concat((100*r).toFixed(2),"%"),e.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,e){return wo.call(bo,t,e,this.parentRotation)}pageTranslationToScreen(t,e){return wo.call(bo,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*t/n).toFixed(2),"%"),An(Ja,this)||(r.height="".concat((100*e/i).toFixed(2),"%"))}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!An(Ja,this)&&e.endsWith("%");if(i&&r)return;const[s,a]=this.parentDimensions;i||(t.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),An(Ja,this)||r||(t.height="".concat((100*parseFloat(e)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(1e4*t)/1e4}_onResizing(){}altTextFinish(){var t;null===(t=An(Xa,this))||void 0===t||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||An(oo,this))return this._editToolbar;this._editToolbar=new cr(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(t=An(Xa,this))||void 0===t||t.destroy())}addContainer(t){var e;const n=null===(e=this._editToolbar)||void 0===e?void 0:e.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return An(Xa,this)||(ma.initialize(bo._l10n),Sn(Xa,this,new ma(this)),An(Ga,this)&&(An(Xa,this).data=An(Ga,this),Sn(Ga,this,null))),An(Xa,this)}get altTextData(){var t;return null===(t=An(Xa,this))||void 0===t?void 0:t.data}set altTextData(t){An(Xa,this)&&(An(Xa,this).data=t)}get guessedAltText(){var t;return null===(t=An(Xa,this))||void 0===t?void 0:t.guessedText}async setGuessedAltText(t){var e;await(null===(e=An(Xa,this))||void 0===e?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return null===(e=An(Xa,this))||void 0===e?void 0:e.serialize(t)}hasAltText(){return!!An(Xa,this)&&!An(Xa,this).isEmpty()}hasAltTextData(){var t,e;return null!==(t=null===(e=An(Xa,this))||void 0===e?void 0:e.hasData())&&void 0!==t&&t}addCommentButton(){return An(Ka,this)?An(Ka,this):Sn(Ka,this,new Ca(this))}get commentColor(){return null}get comment(){const t=An(Ka,this);return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){An(Ka,this)||Sn(Ka,this,new Ca(this)),An(Ka,this).data=t}setCommentData(t){An(Ka,this)||Sn(Ka,this,new Ca(this)),An(Ka,this).setInitialText(t)}get hasEditedComment(){var t;return null===(t=An(Ka,this))||void 0===t?void 0:t.hasBeenEdited()}async editComment(){An(Ka,this)||Sn(Ka,this,new Ca(this)),An(Ka,this).edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var t;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=An(Ya,this)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),xn(vo,this,No).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),e.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),Ar(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(An(po,this)||Sn(po,this,new Ba({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:xn(vo,this,Co).bind(this),onPinching:xn(vo,this,Mo).bind(this),onPinchEnd:xn(vo,this,To).bind(this),signal:this._uiManager._signal}))),null===(t=this._uiManager._editorUndoBar)||void 0===t||t.hide(),e}pointerdown(t){const{isMac:e}=Si.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(Sn(ro,this,!0),this._isDraggable?xn(vo,this,Ro).call(this,t):xn(vo,this,Po).call(this,t))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){An(co,this)&&clearTimeout(An(co,this)),Sn(co,this,setTimeout(()=>{var t;Sn(co,this,null),null===(t=this.parent)||void 0===t||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/i,c=e/i,u=this.x*r,h=this.y*s,d=this.width*r,f=this.height*s;switch(n){case 0:return[u+l+a,s-h-c-f+o,u+l+d+a,s-h-c+o];case 90:return[u+c+a,s-h+l+o,u+c+f+a,s-h+l+d+o];case 180:return[u-l-d+a,s-h+c+o,u-l+a,s-h+c+f+o];case 270:return[u-c-f+a,s-h-l-d+o,u-c+a,s-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,s]=t,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,e-s,a,o];case 90:return[n,e-i,o,a];case 180:return[r,e-i,a,o];case 270:return[r,e-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Sn(oo,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Sn(oo,this,!1),!0)}isInEditMode(){return An(oo,this)}shouldGetKeyboardEvents(){return An(lo,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return e<s&&i>0&&t<r&&n>0}rebuild(){xn(vo,this,No).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}serialize(){hi("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});i.rotation=t.rotation,Sn(Ga,i,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(t.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var t,e;if(null===(t=An(no,this))||void 0===t||t.abort(),Sn(no,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),An(co,this)&&(clearTimeout(An(co,this)),Sn(co,this,null)),xn(vo,this,Fo).call(this),this.removeEditToolbar(),An(fo,this)){for(const t of An(fo,this).values())clearTimeout(t);Sn(fo,this,null)}this.parent=null,null===(e=An(po,this))||void 0===e||e.destroy(),Sn(po,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(xn(vo,this,xo).call(this),An(Za,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),Sn(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=An(Za,this).children;if(!An(qa,this)){Sn(qa,this,Array.from(e));const t=xn(vo,this,Do).bind(this),n=xn(vo,this,Lo).bind(this),i=this._uiManager._signal;for(const e of An(qa,this)){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:i}),e.addEventListener("blur",n,{signal:i}),e.addEventListener("focus",xn(vo,this,Io).bind(this,r),{signal:i}),e.setAttribute("data-l10n-id",bo._l10nResizer[r])}}const n=An(qa,this)[0];let i=0;for(const s of e){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(An(qa,this).length/4);if(r!==i){if(r<i)for(let e=0;e<i-r;e++)An(Za,this).append(An(Za,this).firstChild);else if(r>i)for(let e=0;e<r-i;e++)An(Za,this).firstChild.before(An(Za,this).lastChild);let t=0;for(const n of e){const e=An(qa,this)[t++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",bo._l10nResizer[e])}}xn(vo,this,Oo).call(this,0),Sn(lo,this,!0),An(Za,this).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){An(lo,this)&&xn(vo,this,Eo).call(this,An(io,this),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){xn(vo,this,Fo).call(this),this.div.focus()}select(){var t,e,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this._editToolbar?(null===(e=this._editToolbar)||void 0===e||e.show(),null===(n=An(Xa,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var t,e;null!==(t=this.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=this._editToolbar)||void 0===e||e.show())}))}unselect(){var t,e,n,i,r;this.isSelected&&(this.isSelected=!1,null===(t=An(Za,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=An(Xa,this))||void 0===r||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return An(ao,this)}set isEditing(t){Sn(ao,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){Sn(Ja,this,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){An(fo,this)||Sn(fo,this,new Map);const{action:e}=t;let n=An(fo,this).get(e);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),An(fo,this).delete(e),0===An(fo,this).size&&Sn(fo,this,null)},bo._telemetryTimeout),void An(fo,this).set(e,n)}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),Sn(Ya,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Sn(Ya,this,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===(null===e||void 0===e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}}function yo(t,e,n){let[i,r]=t;[e,n]=this.screenToPageTranslation(e,n),this.x+=e/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function wo(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function _o(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}function xo(){if(An(Za,this))return;Sn(Za,this,document.createElement("div")),An(Za,this).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const t=document.createElement("div");An(Za,this).append(t),t.classList.add("resizer",n),t.setAttribute("data-resizer-name",n),t.addEventListener("pointerdown",xn(vo,this,ko).bind(this,n),{signal:e}),t.addEventListener("contextmenu",Gi,{signal:e}),t.tabIndex=-1}this.div.prepend(An(Za,this))}function ko(t,e){var n;e.preventDefault();const{isMac:i}=Si.platform;if(0!==e.button||e.ctrlKey&&i)return;null===(n=An(Xa,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,Sn(to,this,[e.screenX,e.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",xn(vo,this,Eo).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",qi,{passive:!1,signal:a}),window.addEventListener("contextmenu",Gi,{signal:a}),Sn(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var t;s.abort(),this.parent.togglePointerEvents(!0),null===(t=An(Xa,this))||void 0===t||t.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,xn(vo,this,So).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function Ao(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[r,s]=this.parentDimensions;this.setDims(r*n,s*i),this.fixAndSetPosition(),this._onResized()}function So(){if(!An(eo,this))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=An(eo,this);Sn(eo,this,null);const r=this.x,s=this.y,a=this.width,o=this.height;r===t&&s===e&&a===n&&o===i||this.addCommands({cmd:xn(vo,this,Ao).bind(this,r,s,a,o),undo:xn(vo,this,Ao).bind(this,t,e,n,i),mustExec:!0})}function Eo(t,e){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=an.MIN_SIZE/n,c=an.MIN_SIZE/i,u=xn(vo,this,_o).call(this,this.rotation),h=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e],d=xn(vo,this,_o).call(this,360-this.rotation);let f,p,g=!1,m=!1;switch(t){case"topLeft":g=!0,f=(t,e)=>[0,0],p=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],p=(t,e)=>[t/2,e];break;case"topRight":g=!0,f=(t,e)=>[t,0],p=(t,e)=>[0,e];break;case"middleRight":m=!0,f=(t,e)=>[t,e/2],p=(t,e)=>[0,e/2];break;case"bottomRight":g=!0,f=(t,e)=>[t,e],p=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],p=(t,e)=>[t/2,0];break;case"bottomLeft":g=!0,f=(t,e)=>[0,e],p=(t,e)=>[t,0];break;case"middleLeft":m=!0,f=(t,e)=>[0,e/2],p=(t,e)=>[t,e/2]}const v=f(a,o),b=p(a,o);let y=h(...b);const w=an._round(r+y[0]),_=an._round(s+y[1]);let x,k,A=1,S=1;if(e.fromKeyboard)({deltaX:x,deltaY:k}=e);else{const{screenX:t,screenY:n}=e,[i,r]=An(to,this);[x,k]=this.screenToPageTranslation(t-i,n-r),An(to,this)[0]=t,An(to,this)[1]=n}if([x,k]=((t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e])(x/n,k/i),g){const t=Math.hypot(a,o);A=S=Math.max(Math.min(Math.hypot(b[0]-v[0]-x,b[1]-v[1]-k)/t,1/a,1/o),l/a,c/o)}else m?A=Li(Math.abs(b[0]-v[0]-x),l,1)/a:S=Li(Math.abs(b[1]-v[1]-k),c,1)/o;const E=an._round(a*A),C=an._round(o*S);y=h(...p(E,C));const M=w-y[0],T=_-y[1];An(so,this)||Sn(so,this,[this.x,this.y,this.width,this.height]),this.width=E,this.height=C,this.x=M,this.y=T,this.setDims(n*E,i*C),this.fixAndSetPosition(),this._onResizing()}function Co(){var t;Sn(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(t=An(Xa,this))||void 0===t||t.toggle(!1),this.parent.togglePointerEvents(!1)}function Mo(t,e,n){let i=n/e*.7+1-.7;if(1===i)return;const r=xn(vo,this,_o).call(this,this.rotation),s=(t,e)=>[r[0]*t+r[2]*e,r[1]*t+r[3]*e],[a,o]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,d=an.MIN_SIZE/a,f=an.MIN_SIZE/o;i=Math.max(Math.min(i,1/u,1/h),d/u,f/h);const p=an._round(u*i),g=an._round(h*i);if(p===u&&g===h)return;An(so,this)||Sn(so,this,[l,c,u,h]);const m=s(u/2,h/2),v=an._round(l+m[0]),b=an._round(c+m[1]),y=s(p/2,g/2);this.x=v-y[0],this.y=b-y[1],this.width=p,this.height=g,this.setDims(a*p,o*g),this.fixAndSetPosition(),this._onResizing()}function To(){var t;null===(t=An(Xa,this))||void 0===t||t.toggle(!0),this.parent.togglePointerEvents(!0),xn(vo,this,So).call(this)}function Po(t){const{isMac:e}=Si.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Ro(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=t=>{i.abort(),Sn(Qa,this,null),Sn(ro,this,!1),this._uiManager.endDragSession()||xn(vo,this,Po).call(this,t),n&&this._onStopDragging()};e&&(Sn(uo,this,t.clientX),Sn(ho,this,t.clientY),Sn(Qa,this,t.pointerId),Sn($a,this,t.pointerType),window.addEventListener("pointermove",t=>{n||(n=!0,this._onStartDragging());const{clientX:e,clientY:i,pointerId:r}=t;if(r!==An(Qa,this))return void qi(t);const[s,a]=this.screenToPageTranslation(e-An(uo,this),i-An(ho,this));Sn(uo,this,e),Sn(ho,this,i),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",qi,s),window.addEventListener("pointerdown",t=>{t.pointerType===An($a,this)&&(An(po,this)||t.isPrimary)&&a(t),qi(t)},s));const o=t=>{An(Qa,this)&&An(Qa,this)!==t.pointerId?qi(t):a(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function No(){if(An(no,this)||!this.div)return;Sn(no,this,new AbortController);const t=this._uiManager.combinedSignal(An(no,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}function Do(t){an._resizerKeyboardManager.exec(this,t)}function Lo(t){var e;An(lo,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==An(Za,this)&&xn(vo,this,Fo).call(this)}function Io(t){Sn(io,this,An(lo,this)?t:"")}function Oo(t){if(An(qa,this))for(const e of An(qa,this))e.tabIndex=t}function Fo(){Sn(lo,this,!1),xn(vo,this,Oo).call(this,-1),xn(vo,this,So).call(this)}an=bo,d(bo,"_l10n",null),d(bo,"_l10nResizer",null),d(bo,"_borderLineWidth",-1),d(bo,"_colorManager",new Br),d(bo,"_zIndex",1),d(bo,"_telemetryTimeout",1e3);class jo extends bo{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Wo=3285377520,zo=4294901760,Bo=65535;class Uo{constructor(t){this.h1=t?4294967295&t:Wo,this.h2=t?4294967295&t:Wo}update(t){let e,n;if("string"===typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),n=e.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(e.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,f=13715;for(let p=0;p<i;p++)1&p?(a=s[p],a=a*u&zo|a*d&Bo,a=a<<15|a>>>17,a=a*h&zo|a*f&Bo,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[p],o=o*u&zo|o*d&Bo,o=o<<15|o>>>17,o=o*h&zo|o*f&Bo,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=e[4*i+2]<<16;case 2:a^=e[4*i+1]<<8;case 1:a^=e[4*i],a=a*u&zo|a*d&Bo,a=a<<15|a>>>17,a=a*h&zo|a*f&Bo,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&zo|36045*t&Bo,e=4283543511*e&zo|(2950163797*(e<<16|t>>>16)&zo)>>>16,t^=e>>>1,t=444984403*t&zo|60499*t&Bo,e=3301882366*e&zo|(3120437893*(e<<16|t>>>16)&zo)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ho=Object.freeze({map:null,hash:"",transfer:void 0});var Vo=new WeakMap,Go=new WeakMap,qo=new WeakMap,Xo=new WeakSet;class Ko{constructor(){wn(this,Xo),_n(this,Vo,!1),_n(this,Go,null),_n(this,qo,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=An(qo,this).get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return An(qo,this).get(t)}remove(t){if(An(qo,this).delete(t),0===An(qo,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const t of An(qo,this).values())if(t instanceof bo)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=An(qo,this).get(t);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(e))n[r]!==s&&(i=!0,n[r]=s);else i=!0,An(qo,this).set(t,e);i&&xn(Xo,this,Yo).call(this),e instanceof bo&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return An(qo,this).has(t)}get size(){return An(qo,this).size}resetModified(){An(Vo,this)&&(Sn(Vo,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new $o(this)}get serializable(){if(0===An(qo,this).size)return Ho;const t=new Map,e=new Uo,n=[],i=Object.create(null);let r=!1;for(const[s,a]of An(qo,this)){const n=a instanceof bo?a.serialize(!1,i):a;n&&(t.set(s,n),e.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of t.values())s.bitmap&&n.push(s.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Ho}get editorStats(){let t=null;const e=new Map;for(const r of An(qo,this).values()){var n;if(!(r instanceof bo))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const o=(n=t)[a]||(n[a]=new Map);for(const[t,e]of Object.entries(s)){var i;if("type"===t)continue;let n=o.get(t);n||(n=new Map,o.set(t,n));const r=null!==(i=n.get(e))&&void 0!==i?i:0;n.set(e,r+1)}}for(const[r,s]of e)t[r]=s.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){Sn(Go,this,null)}get modifiedIds(){if(An(Go,this))return An(Go,this);const t=[];for(const e of An(qo,this).values())e instanceof bo&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return Sn(Go,this,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return An(qo,this).entries()}}function Yo(){An(Vo,this)||(Sn(Vo,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Qo=new WeakMap;class $o extends Ko{constructor(t){super(),_n(this,Qo,void 0);const{map:e,hash:n,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);Sn(Qo,this,{map:r,hash:n,transfer:i})}get print(){hi("Should not call PrintAnnotationStorage.print")}get serializable(){return An(Qo,this)}get modifiedIds(){return gi(this,"modifiedIds",{ids:new Set,hash:""})}}var Jo=new WeakMap;class Zo{constructor(t){let{ownerDocument:e=globalThis.document,styleElement:n=null}=t;_n(this,Jo,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),An(Jo,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,disableFontFace:n,_inspectFont:i}=t;if(e&&!An(Jo,this).has(e.loadedName)){if(di(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:s}=e,a=new FontFace(t,n,s);this.addNativeFontFace(a);try{await a.load(),An(Jo,this).add(t),null===i||void 0===i||i(e)}catch(r){ui("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}hi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw ui("Failed to load font '".concat(e.family,"': '").concat(n,"'.")),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var t;return gi(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}get isSyncFontLoadingSupported(){return gi(this,"isSyncFontLoadingSupported",En||Si.platform.isFirefox)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for(di(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){return gi(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)d=d-h+n(c,r)|0;var f;r<c.length&&(d=d-h+n(c+"XXX",r)|0),u=i(u,16,4,(f=d,String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,255&f)));const p="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=v,m.append(t)}this._document.body.append(m),function t(e,n){if(++l>30)return ui("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,()=>{m.remove(),e.complete()})}}class tl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e="url(data:".concat(this.mimetype,";base64,").concat(Ii(this.data),");");let n;if(this.cssFontInfo){let t="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(t+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(t,"src:").concat(e,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(s){ui('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}function el(t){if("string"!==typeof t)return null;if(t.endsWith("/"))return t;throw new Error('Invalid factory url: "'.concat(t,'" must include trailing slash.'))}const nl=t=>"object"===typeof t&&Number.isInteger(null===t||void 0===t?void 0:t.num)&&t.num>=0&&Number.isInteger(null===t||void 0===t?void 0:t.gen)&&t.gen>=0,il=function(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i))return!1;if(!e(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,nl,t=>"object"===typeof t&&"string"===typeof(null===t||void 0===t?void 0:t.name));var rl=new WeakMap,sl=new WeakMap;class al{constructor(){_n(this,rl,new Map),_n(this,sl,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};An(sl,this).then(()=>{for(const[t]of An(rl,this))t.call(this,n)})}addEventListener(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void ui("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}An(rl,this).set(e,i)}removeEventListener(t,e){const n=An(rl,this).get(e);null===n||void 0===n||n(),An(rl,this).delete(e)}terminate(){for(const[,t]of An(rl,this))null===t||void 0===t||t();An(rl,this).clear()}}const ol=1,ll=2,cl=1,ul=2,hl=3,dl=4,fl=5,pl=6,gl=7,ml=8;function vl(){}function bl(t){if(t instanceof xi||t instanceof yi||t instanceof vi||t instanceof wi||t instanceof bi)return t;switch(t instanceof Error||"object"===typeof t&&null!==t||hi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new xi(t.message);case"InvalidPDFException":return new yi(t.message);case"PasswordException":return new vi(t.message,t.code);case"ResponseException":return new wi(t.message,t.status,t.missing);case"UnknownErrorException":return new bi(t.message,t.details)}return new bi(t.message,t.toString())}var yl=new WeakMap,wl=new WeakSet;class _l{constructor(t,e,n){wn(this,wl),_n(this,yl,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",xn(wl,this,xl).bind(this),{signal:An(yl,this).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:t,streamId:r,data:e,desiredSize:n.desiredSize},i),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[r].pullCall=e,o.postMessage({sourceName:s,targetName:a,stream:pl,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:t=>{di(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[r].cancelCall=e,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:cl,streamId:r,reason:bl(t)}),e.promise}},n)}destroy(){var t;null===(t=An(yl,this))||void 0===t||t.abort(),Sn(yl,this,null)}}function xl(t){let{data:e}=t;if(e.targetName!==this.sourceName)return;if(e.stream)return void xn(wl,this,Al).call(this,e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error("Cannot resolve callback ".concat(t));if(delete this.callbackCapabilities[t],e.callback===ol)n.resolve(e.data);else{if(e.callback!==ll)throw new Error("Unexpected callback case");n.reject(bl(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){const t=this.sourceName,i=e.sourceName,r=this.comObj;return void Promise.try(n,e.data).then(function(n){r.postMessage({sourceName:t,targetName:i,callback:ol,callbackId:e.callbackId,data:n})},function(n){r.postMessage({sourceName:t,targetName:i,callback:ll,callbackId:e.callbackId,reason:bl(n)})})}e.streamId?xn(wl,this,kl).call(this,e):n(e.data)}function kl(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this,a=this.actionHandler[t.action],o={enqueue(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:dl,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:hl,streamId:e}),delete s.streamSinks[e])},error(t){di(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:fl,streamId:e,reason:bl(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(a,t.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ml,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:ml,streamId:e,reason:bl(t)})})}function Al(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case ml:t.success?s.startCall.resolve():s.startCall.reject(bl(t.reason));break;case gl:t.success?s.pullCall.resolve():s.pullCall.reject(bl(t.reason));break;case pl:if(!a){r.postMessage({sourceName:n,targetName:i,stream:gl,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||vl).then(function(){r.postMessage({sourceName:n,targetName:i,stream:gl,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:gl,streamId:e,reason:bl(t)})});break;case dl:if(di(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case hl:if(di(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),xn(wl,this,Sl).call(this,s,e);break;case fl:di(s,"error should have stream controller"),s.controller.error(bl(t.reason)),xn(wl,this,Sl).call(this,s,e);break;case ul:t.success?s.cancelCall.resolve():s.cancelCall.reject(bl(t.reason)),xn(wl,this,Sl).call(this,s,e);break;case cl:if(!a)break;const o=bl(t.reason);Promise.try(a.onCancel||vl,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ul,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:ul,streamId:e,reason:bl(t)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async function Sl(t,e){var n,i,r;await Promise.allSettled([null===(n=t.startCall)||void 0===n?void 0:n.promise,null===(i=t.pullCall)||void 0===i?void 0:i.promise,null===(r=t.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[e]}var El=new WeakMap;class Cl{constructor(t){let{enableHWA:e=!1}=t;_n(this,El,!1),Sn(El,this,e)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!An(El,this)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){hi("Abstract method `_createCanvas` called.")}}class Ml extends Cl{constructor(t){let{ownerDocument:e=globalThis.document,enableHWA:n=!1}=t;super({enableHWA:n}),this._document=e}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Tl{constructor(t){let{baseUrl:e=null,isCompressed:n=!0}=t;this.baseUrl=e,this.isCompressed=n}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(t=>({cMapData:t,isCompressed:this.isCompressed})).catch(t=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(t){hi("Abstract method `_fetch` called.")}}class Pl extends Tl{async _fetch(t){const e=await ji(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Ai(e)}}class Rl{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(){}}var Nl=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,jl=new WeakMap,Wl=new WeakSet;class zl extends Rl{constructor(t){let{docId:e,ownerDocument:n=globalThis.document}=t;super(),wn(this,Wl),_n(this,Nl,void 0),_n(this,Dl,void 0),_n(this,Ll,void 0),_n(this,Il,void 0),_n(this,Ol,void 0),_n(this,Fl,void 0),_n(this,jl,0),Sn(Il,this,e),Sn(Ol,this,n)}addFilter(t){var e,n;if(!t)return"none";let i=kn(Wl,this,Bl).get(t);if(i)return i;const[r,s,a]=xn(Wl,this,Vl).call(this,t),o=1===t.length?r:"".concat(r).concat(s).concat(a);if(i=kn(Wl,this,Bl).get(o),i)return kn(Wl,this,Bl).set(t,i),i;const l="g_".concat(An(Il,this),"_transfer_map_").concat((Sn(jl,this,(e=An(jl,this),n=e++,e)),n)),c=xn(Wl,this,Gl).call(this,l);kn(Wl,this,Bl).set(t,c),kn(Wl,this,Bl).set(o,c);const u=xn(Wl,this,Kl).call(this,l);return xn(Wl,this,Ql).call(this,r,s,a,u),c}addHCMFilter(t,e){var n;const i="".concat(t,"-").concat(e),r="base";let s=kn(Wl,this,Ul).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},kn(Wl,this,Ul).set(r,s));if(!t||!e)return s.url;const o=xn(Wl,this,Jl).call(this,t);t=Ci.makeHexColor(...o);const l=xn(Wl,this,Jl).call(this,e);if(e=Ci.makeHexColor(...l),kn(Wl,this,Hl).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const c=new Array(256);for(let p=0;p<=255;p++){const t=p/255;c[p]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const u=c.join(","),h="g_".concat(An(Il,this),"_hcm_filter"),d=s.filter=xn(Wl,this,Kl).call(this,h);xn(Wl,this,Ql).call(this,u,u,u,d),xn(Wl,this,Xl).call(this,d);const f=(t,e)=>{const n=o[t]/255,i=l[t]/255,r=new Array(e+1);for(let s=0;s<=e;s++)r[s]=n+s/e*(i-n);return r.join(",")};return xn(Wl,this,Ql).call(this,f(0,5),f(1,5),f(2,5),d),s.url=xn(Wl,this,Gl).call(this,h),s.url}addAlphaFilter(t){var e,n;let i=kn(Wl,this,Bl).get(t);if(i)return i;const[r]=xn(Wl,this,Vl).call(this,[t]),s="alpha_".concat(r);if(i=kn(Wl,this,Bl).get(s),i)return kn(Wl,this,Bl).set(t,i),i;const a="g_".concat(An(Il,this),"_alpha_map_").concat((Sn(jl,this,(e=An(jl,this),n=e++,e)),n)),o=xn(Wl,this,Gl).call(this,a);kn(Wl,this,Bl).set(t,o),kn(Wl,this,Bl).set(s,o);const l=xn(Wl,this,Kl).call(this,a);return xn(Wl,this,$l).call(this,r,l),o}addLuminosityFilter(t){var e,n;let i,r,s=kn(Wl,this,Bl).get(t||"luminosity");if(s)return s;if(t?([i]=xn(Wl,this,Vl).call(this,[t]),r="luminosity_".concat(i)):r="luminosity",s=kn(Wl,this,Bl).get(r),s)return kn(Wl,this,Bl).set(t,s),s;const a="g_".concat(An(Il,this),"_luminosity_map_").concat((Sn(jl,this,(e=An(jl,this),n=e++,e)),n)),o=xn(Wl,this,Gl).call(this,a);kn(Wl,this,Bl).set(t,o),kn(Wl,this,Bl).set(r,o);const l=xn(Wl,this,Kl).call(this,a);return xn(Wl,this,ql).call(this,l),t&&xn(Wl,this,$l).call(this,i,l),o}addHighlightHCMFilter(t,e,n,i,r){var s;const a="".concat(e,"-").concat(n,"-").concat(i,"-").concat(r);let o=kn(Wl,this,Ul).get(t);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},kn(Wl,this,Ul).set(t,o));if(!e||!n)return o.url;const[c,u]=[e,n].map(xn(Wl,this,Jl).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[f,p]=[i,r].map(xn(Wl,this,Jl).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),kn(Wl,this,Hl).style.color="";const g=(t,e,n)=>{const i=new Array(256),r=(d-h)/n,s=t/255,a=(e-t)/(255*n);let o=0;for(let l=0;l<=n;l++){const t=Math.round(h+l*r),e=s+l*a;for(let n=o;n<=t;n++)i[n]=e;o=t+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(An(Il,this),"_hcm_").concat(t,"_filter"),v=o.filter=xn(Wl,this,Kl).call(this,m);return xn(Wl,this,Xl).call(this,v),xn(Wl,this,Ql).call(this,g(f[0],p[0],5),g(f[1],p[1],5),g(f[2],p[2],5),v),o.url=xn(Wl,this,Gl).call(this,m),o.url}destroy(){var t,e,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(t=An(Fl,this))&&void 0!==t&&t.size||(null===(e=An(Ll,this))||void 0===e||e.parentNode.parentNode.remove(),Sn(Ll,this,null),null===(n=An(Dl,this))||void 0===n||n.clear(),Sn(Dl,this,null),null===(i=An(Fl,this))||void 0===i||i.clear(),Sn(Fl,this,null),Sn(jl,this,0))}}function Bl(t){return An(Dl,t)||Sn(Dl,t,new Map)}function Ul(t){return An(Fl,t)||Sn(Fl,t,new Map)}function Hl(t){if(!An(Ll,t)){const e=An(Ol,t).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=An(Ol,t).createElementNS(Oi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Sn(Ll,t,An(Ol,t).createElementNS(Oi,"defs")),e.append(i),i.append(An(Ll,t)),An(Ol,t).body.append(e)}return An(Ll,t)}function Vl(t){if(1===t.length){const e=t[0],n=new Array(256);for(let t=0;t<256;t++)n[t]=e[t]/255;const i=n.join(",");return[i,i,i]}const[e,n,i]=t,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=e[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function Gl(t){if(void 0===An(Nl,this)){Sn(Nl,this,"");const t=An(Ol,this).URL;t!==An(Ol,this).baseURI&&(Bi(t)?ui('#createUrl: ignore "data:"-URL for performance reasons.'):Sn(Nl,this,pi(t,"")))}return"url(".concat(An(Nl,this),"#").concat(t,")")}function ql(t){const e=An(Ol,this).createElementNS(Oi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function Xl(t){const e=An(Ol,this).createElementNS(Oi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function Kl(t){const e=An(Ol,this).createElementNS(Oi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),kn(Wl,this,Hl).append(e),e}function Yl(t,e,n){const i=An(Ol,this).createElementNS(Oi,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function Ql(t,e,n,i){const r=An(Ol,this).createElementNS(Oi,"feComponentTransfer");i.append(r),xn(Wl,this,Yl).call(this,r,"feFuncR",t),xn(Wl,this,Yl).call(this,r,"feFuncG",e),xn(Wl,this,Yl).call(this,r,"feFuncB",n)}function $l(t,e){const n=An(Ol,this).createElementNS(Oi,"feComponentTransfer");e.append(n),xn(Wl,this,Yl).call(this,n,"feFuncA",t)}function Jl(t){return kn(Wl,this,Hl).style.color=t,Yi(getComputedStyle(kn(Wl,this,Hl)).getPropertyValue("color"))}class Zl{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(t){hi("Abstract method `_fetch` called.")}}class tc extends Zl{async _fetch(t){const e=await ji(t,"arraybuffer");return new Uint8Array(e)}}class ec{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(t){hi("Abstract method `_fetch` called.")}}class nc extends ec{async _fetch(t){const e=await ji(t,"arraybuffer");return new Uint8Array(e)}}async function ic(t){const e=process.getBuiltinModule("fs"),n=await e.promises.readFile(t);return new Uint8Array(n)}En&&ui("Please use the `legacy` build in Node.js environments.");class rc extends Rl{}class sc extends Cl{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire("file:///Users/charalambosthemistocleous/Documents/teaching/STATISTICS_COURSE_2025/stats-website/introduction-to-statistics/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(t,e)}}class ac extends Tl{async _fetch(t){return ic(t)}}class oc extends Zl{async _fetch(t){return ic(t)}}class lc extends ec{async _fetch(t){return ic(t)}}const cc="Fill",uc="Stroke",hc="Shading";function dc(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class fc{isModifyingCurrentTransform(){return!1}getPattern(){hi("Abstract method `getPattern` called.")}}class pc extends fc{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===uc||i===cc){const s=e.current.getClippedPathBoundingBox(i,Qi(t))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=Ci.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),dc(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else dc(t,this._bbox),r=this._createGradient(t);return r}}function gc(t,e,n,i,r,s,a,o){const l=e.coords,c=e.colors,u=t.data,h=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d);const f=(l[n]+e.offsetX)*e.scaleX,p=(l[n+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(p>=b)return;const y=c[s],w=c[s+1],_=c[s+2],x=c[a],k=c[a+1],A=c[a+2],S=c[o],E=c[o+1],C=c[o+2],M=Math.round(p),T=Math.round(b);let P,R,N,D,L,I,O,F;for(let j=M;j<=T;j++){if(j<m){const t=j<p?0:(p-j)/(p-m);P=f-(f-g)*t,R=y-(y-x)*t,N=w-(w-k)*t,D=_-(_-A)*t}else{let t;t=j>b?1:m===b?0:(m-j)/(m-b),P=g-(g-v)*t,R=x-(x-S)*t,N=k-(k-E)*t,D=A-(A-C)*t}let t;t=j<p?0:j>b?1:(p-j)/(p-b),L=f-(f-v)*t,I=y-(y-S)*t,O=w-(w-E)*t,F=_-(_-C)*t;const e=Math.round(Math.min(P,L)),n=Math.round(Math.max(P,L));let i=h*j+4*e;for(let r=e;r<=n;r++)t=(P-r)/(P-L),t<0?t=0:t>1&&(t=1),u[i++]=R-(R-I)*t|0,u[i++]=N-(N-O)*t|0,u[i++]=D-(D-F)*t|0,u[i++]=255}}function mc(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let e=s*o;for(let s=0;s<c;s++,e++)gc(t,n,i[e],i[e+1],i[e+o],r[e],r[e+1],r[e+o]),gc(t,n,i[e+o+1],i[e+1],i[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)gc(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class vc extends fc{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=s/o,u=a/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},d=o+4,f=l+4,p=n.getCanvas("mesh",d,f),g=p.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const v of this._figures)mc(m,v,h);g.putImageData(m,2,2);return{canvas:p.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){dc(t,this._bbox);const r=new Float32Array(2);if(i===hc)Ci.singularValueDecompose2dScale(Qi(t),r);else if(this.matrix){Ci.singularValueDecompose2dScale(this.matrix,r);const[t,n]=r;Ci.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=t,r[1]*=n}else Ci.singularValueDecompose2dScale(e.baseTransform,r);const s=this._createMeshCanvas(r,i===hc?null:this._background,e.cachedCanvases);return i!==hc&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}class bc extends fc{getPattern(){return"hotpink"}}const yc=1,wc=2;class _c{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:r,color:s,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),ci("TilingType: "+r);const c=e[0],u=e[1],h=e[2],d=e[3],f=h-c,p=d-u,g=new Float32Array(2);Ci.singularValueDecompose2dScale(this.matrix,g);const[m,v]=g;Ci.singularValueDecompose2dScale(this.baseTransform,g);const b=m*g[0],y=v*g[1];let w=f,_=p,x=!1,k=!1;const A=Math.ceil(o*b),S=Math.ceil(l*y);A>=Math.ceil(f*b)?w=o:x=!0,S>=Math.ceil(p*y)?_=l:k=!0;const E=this.getSizeAndScale(w,this.ctx.canvas.width,b),C=this.getSizeAndScale(_,this.ctx.canvas.height,y),M=t.cachedCanvases.getCanvas("pattern",E.size,C.size),T=M.context,P=a.createCanvasGraphics(T);if(P.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(P,i,s),T.translate(-E.scale*c,-C.scale*u),P.transform(E.scale,0,0,C.scale,0,0),T.save(),this.clipBbox(P,c,u,h,d),P.baseTransform=Qi(P.ctx),P.executeOperatorList(n),P.endDrawing(),T.restore(),x||k){const e=M.canvas;x&&(w=o),k&&(_=l);const n=this.getSizeAndScale(w,this.ctx.canvas.width,b),i=this.getSizeAndScale(_,this.ctx.canvas.height,y),r=n.size,s=i.size,a=t.cachedCanvases.getCanvas("pattern-workaround",r,s),h=a.context,d=x?Math.floor(f/o):0,g=k?Math.floor(p/l):0;for(let t=0;t<=d;t++)for(let n=0;n<=g;n++)h.drawImage(e,r*t,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:u}}return{canvas:M.canvas,scaleX:E.scale,scaleY:C.scale,offsetX:c,offsetY:u}}getSizeAndScale(t,e,n){const i=Math.max(_c.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const s=i-e,a=r-n;t.ctx.rect(e,n,s,a),Ci.axialAlignedBoundingBox([e,n,i,r],Qi(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case yc:const{fillStyle:t,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=t,i.strokeStyle=r.strokeColor=s;break;case wc:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new _i("Unsupported paint type: ".concat(e))}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i){let r=n;i!==hc&&(r=Ci.transform(r,e.baseTransform),this.matrix&&(r=Ci.transform(r,this.matrix)));const s=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const o=t.createPattern(s.canvas,"repeat");return o.setTransform(a),o}}function xc(t){let{src:e,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=Si.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],h=r>>3,d=7&r,f=e.length;i=new Uint32Array(i.buffer);let p=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const t=n<f?e[n]:255;i[p++]=128&t?u:c,i[p++]=64&t?u:c,i[p++]=32&t?u:c,i[p++]=16&t?u:c,i[p++]=8&t?u:c,i[p++]=4&t?u:c,i[p++]=2&t?u:c,i[p++]=1&t?u:c}if(0===d)continue;const t=n<f?e[n++]:255;for(let e=0;e<d;e++)i[p++]=t&1<<7-e?u:c}return{srcPos:n,destPos:p}}d(_c,"MAX_PATTERN_SIZE",3e3);const kc=16,Ac=new DOMMatrix,Sc=new Float32Array(2),Ec=new Float32Array([1/0,1/0,-1/0,-1/0]);class Cc{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Mc(t,e,n,i,r,s,a,o,l,c){const[u,h,d,f,p,g]=Qi(t);if(0===h&&0===d){const m=a*u+p,v=Math.round(m),b=o*f+g,y=Math.round(b),w=(a+l)*u+p,_=Math.abs(Math.round(w)-v)||1,x=(o+c)*f+g,k=Math.abs(Math.round(x)-y)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(f),v,y),t.drawImage(e,n,i,r,s,0,0,_,k),t.setTransform(u,h,d,f,p,g),[_,k]}if(0===u&&0===f){const m=o*d+p,v=Math.round(m),b=a*h+g,y=Math.round(b),w=(o+c)*d+p,_=Math.abs(Math.round(w)-v)||1,x=(a+l)*h+g,k=Math.abs(Math.round(x)-y)||1;return t.setTransform(0,Math.sign(h),Math.sign(d),0,v,y),t.drawImage(e,n,i,r,s,0,0,k,_),t.setTransform(u,h,d,f,p,g),[k,_]}t.drawImage(e,n,i,r,s,a,o,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,f)*c]}class Tc{constructor(t,e){d(this,"alphaIsShape",!1),d(this,"fontSize",0),d(this,"fontSizeScale",1),d(this,"textMatrix",null),d(this,"textMatrixScale",1),d(this,"fontMatrix",Cn),d(this,"leading",0),d(this,"x",0),d(this,"y",0),d(this,"lineX",0),d(this,"lineY",0),d(this,"charSpacing",0),d(this,"wordSpacing",0),d(this,"textHScale",1),d(this,"textRenderingMode",Bn),d(this,"textRise",0),d(this,"fillColor","#000000"),d(this,"strokeColor","#000000"),d(this,"patternFill",!1),d(this,"patternStroke",!1),d(this,"fillAlpha",1),d(this,"strokeAlpha",1),d(this,"lineWidth",1),d(this,"activeSMask",null),d(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ec.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(t===uc){e||hi("Stroke bounding box must include transform."),Ci.singularValueDecompose2dScale(e,Sc);const t=Sc[0]*this.lineWidth/2,i=Sc[1]*this.lineWidth/2;n[0]-=t,n[1]-=i,n[2]+=t,n[3]+=i}return n}updateClipFromPath(){const t=Ci.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ec,0)}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ci.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Pc(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,r=n%kc,s=(n-r)/kc,a=0===r?s:s+1,o=t.createImageData(i,kc);let l,c=0;const u=e.data,h=o.data;let d,f,p,g;if(e.kind===Xn.GRAYSCALE_1BPP){const e=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,b=Si.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<s?kc:r,l=0,f=0;f<p;f++){const t=e-c;let r=0;const s=t>m?i:8*t-7,a=-8&s;let o=0,h=0;for(;r<a;r+=8)h=u[c++],n[l++]=128&h?v:b,n[l++]=64&h?v:b,n[l++]=32&h?v:b,n[l++]=16&h?v:b,n[l++]=8&h?v:b,n[l++]=4&h?v:b,n[l++]=2&h?v:b,n[l++]=1&h?v:b;for(;r<s;r++)0===o&&(h=u[c++],o=128),n[l++]=h&o?v:b,o>>=1}for(;l<g;)n[l++]=0;t.putImageData(o,0,d*kc)}}else if(e.kind===Xn.RGBA_32BPP){for(f=0,g=i*kc*4,d=0;d<s;d++)h.set(u.subarray(c,c+g)),c+=g,t.putImageData(o,0,f),f+=kc;d<a&&(g=i*r*4,h.set(u.subarray(c,c+g)),t.putImageData(o,0,f))}else{if(e.kind!==Xn.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(p=kc,g=i*p,d=0;d<a;d++){for(d>=s&&(p=r,g=i*p),l=0,f=g;f--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;t.putImageData(o,0,d*kc)}}}function Rc(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,r=n%kc,s=(n-r)/kc,a=0===r?s:s+1,o=t.createImageData(i,kc);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const e=h<s?kc:r;({srcPos:l}=xc({src:c,srcPos:l,dest:u,width:i,height:e,nonBlackColor:0})),t.putImageData(o,0,h*kc)}}function Nc(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Dc(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}function Lc(t,e){if(e)return!0;Ci.singularValueDecompose2dScale(t,Sc);const n=Math.fround(Zi.pixelRatio*Fi.PDF_TO_CSS_UNITS);return Sc[0]<=n&&Sc[1]<=n}const Ic=["butt","round","square"],Oc=["miter","round","bevel"],Fc={},jc={};var Wc=new WeakSet;class zc{constructor(t,e,n,i,r,s,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=s;wn(this,Wc),this.ctx=t,this.current=new Tc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new Cc(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:n,transparency:i=!1,background:r=null}=t;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const t=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...Qi(this.compositeCtx))}this.ctx.save(),Dc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Qi(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,s=t.fnArray;let a=e||0;const o=r.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let u=0;const h=this.commonObjs,d=this.objs;let f;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(f=s[a],f!==ei.dependency)this[f].apply(this,r[a]);else for(const t of r[a]){const e=t.startsWith("g_")?h:d;if(!e.has(t))return e.get(t,n),a}if(a++,a===o)return a;if(l&&++u>10){if(Date.now()>c)return n(),a;u=0}}}endDrawing(){xn(Wc,this,Bc).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),xn(Wc,this,Uc).call(this)}_scaleImage(t,e){var n,i;const r=null!==(n=t.width)&&void 0!==n?n:t.displayWidth,s=null!==(i=t.height)&&void 0!==i?i:t.displayHeight;let a,o,l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=r,h=s,d="prescale1";for(;l>2&&u>1||c>2&&h>1;){let e=u,n=h;l>2&&u>1&&(e=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/e),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),a=this.cachedCanvases.getCanvas(d,e,n),o=a.context,o.clearRect(0,0,e,n),o.drawImage(t,0,0,u,h,0,0,e,n),t=a.canvas,u=e,h=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,s=this.current.patternFill,a=Qi(e);let o,l,c,u;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(s?a:[a.slice(0,4),r]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const n=o.get(l);if(n&&!s){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(u=this.cachedCanvases.getCanvas("maskCanvas",n,i),Rc(u.context,t));let h=Ci.transform(a,[1/n,0,0,-1/i,0,0]);h=Ci.transform(h,[1,0,0,1,0,-i]);const d=Ec.slice();Ci.axialAlignedBoundingBox([0,0,n,i],h,d);const[f,p,g,m]=d,v=Math.round(g-f)||1,b=Math.round(m-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",v,b),w=y.context,_=f,x=p;w.translate(-_,-x),w.transform(...h),c||(c=this._scaleImage(u.canvas,$i(w)),c=c.img,o&&s&&o.set(l,c)),w.imageSmoothingEnabled=Lc(Qi(w),t.interpolate),Mc(w,c,0,0,c.width,c.height,0,0,n,i),w.globalCompositeOperation="source-in";const k=Ci.transform($i(w),[1,0,0,1,-_,-x]);return w.fillStyle=s?r.getPattern(e,this,k,cc):r,w.fillRect(0,0,n,i),o&&!s&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(_),offsetY:Math.round(x)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Ic[t]}setLineJoin(t){this.ctx.lineJoin=Oc[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),Nc(this.suspendedCtx,r),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,r,s,a){e.transform(t,n,i,r,s,a),this.__originalTransform(t,n,i,r,s,a)},t.setTransform=function(t,n,i,r,s,a){e.setTransform(t,n,i,r,s,a),this.__originalSetTransform(t,n,i,r,s,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,r,s,a){e.bezierCurveTo(t,n,i,r,s,a),this.__originalBezierCurveTo(t,n,i,r,s,a)},t.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(e.context,n,a,o,e.subtype,e.backdrop,e.transferMap,r,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,s,a,o,l,c,u){let h=t.canvas,d=o-c,f=l-u;if(s)if(d<0||f<0||d+n>h.width||f+i>h.height){const t=this.cachedCanvases.getCanvas("maskExtension",n,i),e=t.context;e.drawImage(h,-d,-f),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(0,0,n,i),e.globalCompositeOperation="source-over",h=t.canvas,d=f=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(d,f,n,i),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(d,f,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(e.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(o,l,n,i),e.clip(p),e.globalCompositeOperation="destination-in",e.drawImage(h,d,f,n,i,o,l,n,i),e.restore()}save(){this.inSMaskMode&&Nc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(t,e,n,i,r,s){this.ctx.transform(t,e,n,i,r,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[i]=e;if(!n)return i||(i=e[0]=new Path2D),void this[t](i);if(!(i instanceof Path2D)){const t=e[0]=new Path2D;for(let e=0,n=i.length;e<n;)switch(i[e++]){case ni:t.moveTo(i[e++],i[e++]);break;case ii:t.lineTo(i[e++],i[e++]);break;case ri:t.bezierCurveTo(i[e++],i[e++],i[e++],i[e++],i[e++],i[e++]);break;case si:t.closePath();break;default:ui("Unrecognized drawing path operator: ".concat(i[e-1]))}i=t}Ci.axialAlignedBoundingBox(n,Qi(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof i&&null!==i&&void 0!==i&&i.getPattern){const e=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,$i(n),uc),e){const i=new Path2D;i.addPath(t,n.getTransform().invertSelf().multiplySelf(e)),t=i}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(uc,Qi(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.fillColor;let r=!1;if(this.current.patternFill){const e=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,$i(n),cc),e){const i=new Path2D;i.addPath(t,n.getTransform().invertSelf().multiplySelf(e)),t=i}r=!0}const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),r&&n.restore(),e&&this.consumePath(t,s)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=Fc}eoClip(){this.pendingClip=jc}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0===t)return;const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:s,y:a,fontSize:o,path:l}of t)l&&n.addPath(l,new DOMMatrix(r).preMultiplySelf(i).translate(s,a).scale(o,-o));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var n;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(r.fontMatrix=i.fontMatrix||Cn,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||ui("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(s,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,r){const s=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,u=l&Gn,h=!!(l&qn),d=a.patternFill&&!o.missingFile,f=a.patternStroke&&!o.missingFile;let p;if((o.disableFontFace||h||d||f)&&!o.missingFile&&(p=o.getPathGenerator(this.commonObjs,t)),p&&(o.disableFontFace||d||f)){let t;if(s.save(),s.translate(e,n),s.scale(c,-c),u!==Bn&&u!==Hn||(i?(t=s.getTransform(),s.setTransform(...i),s.fill(xn(Wc,this,Hc).call(this,p,t,i))):s.fill(p)),u===Un||u===Hn)if(r){t||(t=s.getTransform()),s.setTransform(...r);const{a:e,b:n,c:i,d:a}=t,o=Ci.inverseTransform(r),l=Ci.transform([e,n,i,a,0,0],o);Ci.singularValueDecompose2dScale(l,Sc),s.lineWidth*=Math.max(Sc[0],Sc[1])/c,s.stroke(xn(Wc,this,Hc).call(this,p,t,r))}else s.lineWidth/=c,s.stroke(p);s.restore()}else u!==Bn&&u!==Hn||s.fillText(t,e,n),u!==Un&&u!==Hn||s.strokeText(t,e,n);if(h){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Qi(s),x:e,y:n,fontSize:c,path:p})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return gi(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(0===i)return;const r=this.ctx,s=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,c=e.textHScale*l,u=t.length,h=n.vertical,d=h?1:-1,f=n.defaultVMetrics,p=i*e.fontMatrix[0],g=e.textRenderingMode===Bn&&!n.disableFontFace&&!e.patternFill;let m,v;if(r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),l>0?r.scale(c,-1):r.scale(c,1),e.patternFill){r.save();const t=e.fillColor.getPattern(r,this,$i(r),cc);m=Qi(r),r.restore(),r.fillStyle=t}if(e.patternStroke){r.save();const t=e.strokeColor.getPattern(r,this,$i(r),uc);v=Qi(r),r.restore(),r.strokeStyle=t}let b=e.lineWidth;const y=e.textMatrixScale;if(0===y||0===b){const t=e.textRenderingMode&Gn;t!==Un&&t!==Hn||(b=this.getSinglePixelWidth())}else b/=y;if(1!==s&&(r.scale(s,s),b/=s),r.lineWidth=b,n.isInvalidPDFjsFont){const n=[];let i=0;for(const e of t)n.push(e.unicode),i+=e.width;return r.fillText(n.join(""),0,0),e.x+=i*p*c,r.restore(),void this.compose()}let w,_=0;for(w=0;w<u;++w){const e=t[w];if("number"===typeof e){_+=d*e*i/1e3;continue}let c=!1;const u=(e.isSpace?o:0)+a,b=e.fontChar,y=e.accent;let x,k,A=e.width;if(h){const t=e.vmetric||f,n=-(e.vmetric?t[1]:.5*A)*p,i=t[2]*p;A=t?-t[0]:A,x=n/s,k=(_+i)/s}else x=_/s,k=0;if(n.remeasure&&A>0){const t=1e3*r.measureText(b).width/i*s;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;c=!0,r.save(),r.scale(e,1),x/=e}else A!==t&&(x+=(A-t)/2e3*i/s)}if(this.contentVisible&&(e.isInFont||n.missingFile))if(g&&!y)r.fillText(b,x,k);else if(this.paintChar(b,x,k,m,v),y){const t=x+i*y.offset.x/s,e=k-i*y.offset.y/s;this.paintChar(y.fontChar,t,e,m,v)}_+=h?A*p-u*l:A*p+u*l,c&&r.restore()}h?e.y-=_:e.x+=_*c,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,s=n.fontDirection,a=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*s,u=n.fontMatrix||Cn,h=t.length;let d,f,p,g;if(!(n.textRenderingMode===Vn)&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(c,s),d=0;d<h;++d){if(f=t[d],"number"===typeof f){g=a*f*r/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const s=(f.isSpace?l:0)+o,h=i.charProcOperatorList[f.operatorListId];h?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...u),this.executeOperatorList(h),this.restore()):ui('Type3 character "'.concat(f.operatorListId,'" is not available.'));const m=[f.width,0];Ci.applyTransform(m,u),p=m[0]*r+s,e.translate(p,0),n.x+=p*c}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,s){const a=new Path2D;a.rect(n,i,r-n,s-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const n=this.baseTransform||Qi(this.ctx),i={createCanvasGraphics:t=>new zc(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new _c(t,this.ctx,i,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new pc(t);case"Mesh":return new vc(t);case"Dummy":return new bc}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,$i(e),hc);const i=$i(e);if(i){const{width:t,height:n}=e.canvas,r=Ec.slice();Ci.axialAlignedBoundingBox([0,0,t,n],i,r);const[s,a,o,l]=r;this.ctx.fillRect(s,a,o-s,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){hi("Should not call beginInlineImage")}beginImageData(){hi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Qi(this.ctx),e)){Ci.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[t,n,i,r]=e,s=new Path2D;s.rect(t,n,i-t,r-n),this.ctx.clip(s),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||ci("TODO: Support non-isolated groups."),t.knockout&&ui("Knockout groups not supported.");const n=Qi(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Ec.slice();Ci.axialAlignedBoundingBox(t.bbox,Qi(e),i);const r=[0,0,e.canvas.width,e.canvas.height];i=Ci.intersect(i,r)||[0,0,0,0];const s=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-s,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,o,l),h=u.context;h.translate(-s,-a),h.transform(...n);let d=new Path2D;const[f,p,g,m]=t.bbox;if(d.rect(f,p,g-f,m-p),t.matrix){const e=new Path2D;e.addPath(d,new DOMMatrix(t.matrix)),d=e}h.clip(d),t.smask?this.smaskStack.push({canvas:u.canvas,context:h,offsetX:s,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.save()),Nc(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=Qi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const n=Ec.slice();Ci.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t,n),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,i,r){if(xn(Wc,this,Bc).call(this),Dc(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const i=e[2]-e[0],s=e[3]-e[1];if(r&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=i,e[3]=s,Ci.singularValueDecompose2dScale(Qi(this.ctx),Sc);const{viewportScale:r}=this,a=Math.ceil(i*this.outputScaleX*r),o=Math.ceil(s*this.outputScaleY*r);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(Sc[0],0,0,-Sc[1],0,s*Sc[1]),Dc(this.ctx)}else{Dc(this.ctx),this.endPath();const t=new Path2D;t.rect(e[0],e[1],i,s),this.ctx.clip(t)}}this.current=new Tc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),xn(Wc,this,Uc).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const n=this.ctx,i=this._createMaskCanvas(t),r=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=Qi(a);a.transform(e,n,i,r,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,u=s.length;c<u;c+=2){const t=Ci.transform(o,[e,n,i,r,s[c],s[c+1]]);a.drawImage(l.canvas,t[4],t[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:t,width:s,height:a,transform:o}=r,l=this.cachedCanvases.getCanvas("maskCanvas",s,a),c=l.context;c.save();Rc(c,this.getObject(t,r)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,$i(e),cc):n,c.fillRect(0,0,s,a),c.restore(),e.save(),e.transform(...o),e.scale(1,-1),Mc(e,l.canvas,0,0,s,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):ui("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r)return void ui("Dependent image isn't ready yet");const s=r.width,a=r.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[e,0,0,n,i[l],i[l+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(r,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;this.save();const{filter:r}=i;let s;if("none"!==r&&""!==r&&(i.filter="none"),i.scale(1/e,-1/n),t.bitmap)s=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)s=t;else{const i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Pc(i,t),s=this.applyTransferMapsToCanvas(i)}const a=this._scaleImage(s,$i(i));i.imageSmoothingEnabled=Lc(Qi(i),t.interpolate),Mc(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const e=t.width,n=t.height,r=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Pc(r,t),i=this.applyTransferMapsToCanvas(r)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Mc(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===jc?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qi(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(r);if(n===i)if(0===t)s=a=1/n;else{const e=n*t;s=a=e<1?1/e:1}else if(0===t)s=1/n,a=1/i;else{const e=n*t,r=i*t;s=e<1?1/e:1,a=r<1?1/r:1}}else{const o=Math.abs(e*r-n*i),l=Math.hypot(e,n),c=Math.hypot(i,r);if(0===t)s=c/o,a=l/o;else{const e=t*o;s=c>e?c/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(t);const a=n.getLineDash();e&&n.save(),n.scale(r,s),Ac.a=1/r,Ac.d=1/s;const o=new Path2D;if(o.addPath(t,Ac),a.length>0){const t=Math.max(r,s);n.setLineDash(a.map(e=>e/t)),n.lineDashOffset/=t}n.lineWidth=i||1,n.stroke(o),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}function Bc(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Uc(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}function Hc(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}for(const $b in ei)void 0!==zc.prototype[$b]&&(zc.prototype[ei[$b]]=zc.prototype[$b]);class Vc{static get workerPort(){return xn(Vc,this,Gc)._}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");Gc._=xn(Vc,this,t)}static get workerSrc(){return xn(Vc,this,qc)._}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");qc._=xn(Vc,this,t)}}var Gc={_:null},qc={_:""},Xc=new WeakMap,Kc=new WeakMap;class Yc{constructor(t){let{parsedData:e,rawData:n}=t;_n(this,Xc,void 0),_n(this,Kc,void 0),Sn(Xc,this,e),Sn(Kc,this,n)}getRaw(){return An(Kc,this)}get(t){var e;return null!==(e=An(Xc,this).get(t))&&void 0!==e?e:null}[Symbol.iterator](){return An(Xc,this).entries()}}const Qc=Symbol("INTERNAL");var $c=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,tu=new WeakMap;class eu{constructor(t,e){let{name:n,intent:i,usage:r,rbGroups:s}=e;_n(this,$c,!1),_n(this,Jc,!1),_n(this,Zc,!1),_n(this,tu,!0),Sn($c,this,!!(t&Pn)),Sn(Jc,this,!!(t&Rn)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(An(Zc,this))return An(tu,this);if(!An(tu,this))return!1;const{print:t,view:e}=this.usage;return An($c,this)?"OFF"!==(null===e||void 0===e?void 0:e.viewState):!An(Jc,this)||"OFF"!==(null===t||void 0===t?void 0:t.printState)}_setVisible(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Qc&&hi("Internal method `_setVisible` called."),Sn(Zc,this,n),Sn(tu,this,e)}}var nu=new WeakMap,iu=new WeakMap,ru=new WeakMap,su=new WeakMap,au=new WeakSet;class ou{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;if(wn(this,au),_n(this,nu,null),_n(this,iu,new Map),_n(this,ru,null),_n(this,su,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,Sn(su,this,t.order);for(const n of t.groups)An(iu,this).set(n.id,new eu(e,n));if("OFF"===t.baseState)for(const t of An(iu,this).values())t._setVisible(Qc,!1);for(const e of t.on)An(iu,this).get(e)._setVisible(Qc,!0);for(const e of t.off)An(iu,this).get(e)._setVisible(Qc,!1);Sn(ru,this,this.getHash())}}isVisible(t){if(0===An(iu,this).size)return!0;if(!t)return ci("Optional content group not defined."),!0;if("OCG"===t.type)return An(iu,this).has(t.id)?An(iu,this).get(t.id).visible:(ui("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return xn(au,this,lu).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!An(iu,this).has(e))return ui("Optional content group not found: ".concat(e)),!0;if(An(iu,this).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!An(iu,this).has(e))return ui("Optional content group not found: ".concat(e)),!0;if(!An(iu,this).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!An(iu,this).has(e))return ui("Optional content group not found: ".concat(e)),!0;if(!An(iu,this).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!An(iu,this).has(e))return ui("Optional content group not found: ".concat(e)),!0;if(An(iu,this).get(e).visible)return!1}return!0}return ui("Unknown optional content policy ".concat(t.policy,".")),!0}return ui("Unknown group type ".concat(t.type,".")),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=An(iu,this).get(t);if(i){if(n&&e&&i.rbGroups.length)for(const e of i.rbGroups)for(const n of e){var r;if(n!==t)null===(r=An(iu,this).get(n))||void 0===r||r._setVisible(Qc,!1,!0)}i._setVisible(Qc,!!e,!0),Sn(nu,this,null)}else ui("Optional content group not found: ".concat(t))}setOCGState(t){let e,{state:n,preserveRB:i}=t;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":e=r;continue}const t=An(iu,this).get(r);if(t)switch(e){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!t.visible,i)}}Sn(nu,this,null)}get hasInitialVisibility(){return null===An(ru,this)||this.getHash()===An(ru,this)}getOrder(){return An(iu,this).size?An(su,this)?An(su,this).slice():[...An(iu,this).keys()]:null}getGroup(t){return An(iu,this).get(t)||null}getHash(){if(null!==An(nu,this))return An(nu,this);const t=new Uo;for(const[e,n]of An(iu,this))t.update("".concat(e,":").concat(n.visible));return Sn(nu,this,t.hexdigest())}[Symbol.iterator](){return An(iu,this).entries()}}function lu(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let r;if(Array.isArray(e))r=xn(au,this,lu).call(this,e);else{if(!An(iu,this).has(e))return ui("Optional content group not found: ".concat(e)),!0;r=An(iu,this).get(e).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class cu{constructor(t,e){let{disableRange:n=!1,disableStream:i=!1}=e;di(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),t.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),t.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:n}=t;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{di(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}_onProgress(t){var e,n,i,r;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){di(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new uu(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new hu(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class uu{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=n||!1,this._filename=Ui(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class hu{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function du(t,e){const n=new Headers;if(!t||!e||"object"!==typeof e)return n;for(const i in e){const t=e[i];void 0!==t&&n.append(i,t)}return n}function fu(t){var e,n;return null!==(e=null===(n=URL.parse(t))||void 0===n?void 0:n.origin)&&void 0!==e?e:null}function pu(t){let{responseHeaders:e,isHttp:n,rangeChunkSize:i,disableRange:r}=t;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==e.get("Accept-Ranges"))return s;return"identity"!==(e.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function gu(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=a(n);return t=unescape(t),t=o(t),t=l(t),s(t)}if(n=function(t){const e=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(t));){let[,t,i,r]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,r]}const s=[];for(let i=0;i<e.length&&i in e;++i){let[t,n]=e[i];n=a(n),t&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(t),n)return s(l(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=a(n);return t=l(t),s(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function r(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),r=Ai(n);n=i.decode(r),e=!1}catch(i){}}return n}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=r("utf-8",t),e&&(t=r("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:r(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,i){if("q"===n||"Q"===n)return r(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{i=atob(i)}catch(s){}return r(e,i)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(n){}if(Ui(t))return t}return null}function mu(t,e){return new wi("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t,404===t||0===t&&e.startsWith("file:"))}function vu(t){return 200===t||206===t}function bu(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function yu(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ui("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}class wu{constructor(t){d(this,"_responseOrigin",null),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=du(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return di(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _u(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new xu(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class _u{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,bu(n,this._withCredentials,this._abortController)).then(e=>{if(t._responseOrigin=fu(e.url),!vu(e.status))throw mu(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const n=e.headers,{allowRangeRequests:r,suggestedLength:s}=pu({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=gu(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:yu(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class xu{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range","bytes=".concat(e,"-").concat(n-1));const s=i.url;fetch(s,bu(r,this._withCredentials,this._abortController)).then(e=>{const n=fu(e.url);if(n!==t._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(t._responseOrigin,'".'));if(!vu(e.status))throw mu(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded}),{value:yu(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class ku{constructor(t){let{url:e,httpHeaders:n,withCredentials:i}=t;d(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=du(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,s]of this.headers)e.setRequestHeader(r,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",di(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(t){const e=t.response;return"string"!==typeof e?e:Ai(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?n.onDone({begin:parseInt(e[1],10),chunk:s}):(ui('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Au{constructor(t){this._source=t,this._manager=new ku(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return di(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Su(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Eu(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Su{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=fu(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(t=>{const[e,...n]=t.split(": ");return[e,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=pu({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=gu(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=mu(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Eu{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=fu(null===(t=this._manager.getRequestXhr(this._requestId))||void 0===t?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(e,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){var e;null!==(e=this._storedError)&&void 0!==e||(this._storedError=mu(t,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Cu=/^[a-z][a-z0-9\-+.]+:/i;class Mu{constructor(t){this.source=t,this.url=function(t){if(Cu.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),di("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return di(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Tu(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Pu(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Tu{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(t=>{this._contentLength=t.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},t=>{"ENOENT"===t.code&&(t=mu(0,this._url.href)),this._storedError=t,this._headersCapability.reject(t)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Pu{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ru=Symbol("INITIAL_DATA");var Nu=new WeakMap,Du=new WeakSet;class Lu{constructor(){wn(this,Du),_n(this,Nu,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const n=xn(Du,this,Iu).call(this,t);return n.promise.then(()=>e(n.data)),null}const n=An(Nu,this)[t];if(!n||n.data===Ru)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}has(t){const e=An(Nu,this)[t];return!!e&&e.data!==Ru}delete(t){const e=An(Nu,this)[t];return!(!e||e.data===Ru)&&(delete An(Nu,this)[t],!0)}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=xn(Du,this,Iu).call(this,t);n.data=e,n.resolve()}clear(){for(const e in An(Nu,this)){var t;const{data:n}=An(Nu,this)[e];null===n||void 0===n||null===(t=n.bitmap)||void 0===t||t.close()}Sn(Nu,this,Object.create(null))}*[Symbol.iterator](){for(const t in An(Nu,this)){const{data:e}=An(Nu,this)[t];e!==Ru&&(yield[t,e])}}}function Iu(t){var e;return(e=An(Nu,this))[t]||(e[t]=p(p({},Promise.withResolvers()),{},{data:Ru}))}var Ou=new WeakMap,Fu=new WeakMap,ju=new WeakMap,Wu=new WeakMap,zu=new WeakMap,Bu=new WeakMap,Uu=new WeakMap,Hu=new WeakMap,Vu=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Xu=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,$u=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,th=new WeakSet;class eh{constructor(t){var e;let{textContentSource:n,container:i,viewport:r}=t;if(wn(this,th),_n(this,Ou,Promise.withResolvers()),_n(this,Fu,null),_n(this,ju,!1),_n(this,Wu,!(null===(e=globalThis.FontInspector)||void 0===e||!e.enabled)),_n(this,zu,null),_n(this,Bu,null),_n(this,Uu,0),_n(this,Hu,0),_n(this,Vu,null),_n(this,Gu,null),_n(this,qu,0),_n(this,Xu,0),_n(this,Ku,Object.create(null)),_n(this,Yu,[]),_n(this,Qu,null),_n(this,$u,[]),_n(this,Ju,new WeakMap),_n(this,Zu,null),n instanceof ReadableStream)Sn(Qu,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Sn(Qu,this,new ReadableStream({start(t){t.enqueue(n),t.close()}}))}Sn(Fu,this,Sn(Gu,this,i)),Sn(Xu,this,r.scale*Zi.pixelRatio),Sn(qu,this,r.rotation),Sn(Bu,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;Sn(Zu,this,[1,0,0,-1,-o,l+a]),Sn(Hu,this,s),Sn(Uu,this,a),oh.call(eh),Ji(i,r),An(Ou,this).promise.finally(()=>{fh._.delete(this),Sn(Bu,this,null),Sn(Ku,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Si.platform;return gi(this,"fontFamilyMap",new Map([["sans-serif","".concat(t&&e?"Calibri, ":"","sans-serif")],["monospace","".concat(t&&e?"Lucida Console, ":"","monospace")]]))}render(){const t=()=>{An(Vu,this).read().then(e=>{var n;let{value:i,done:r}=e;r?An(Ou,this).resolve():(null!==(n=An(zu,this))&&void 0!==n||Sn(zu,this,i.lang),Object.assign(An(Ku,this),i.styles),xn(th,this,nh).call(this,i.items),t())},An(Ou,this).reject)};return Sn(Vu,this,An(Qu,this).getReader()),fh._.add(this),t(),An(Ou,this).promise}update(t){let{viewport:e,onBefore:n=null}=t;const i=e.scale*Zi.pixelRatio,r=e.rotation;if(r!==An(qu,this)&&(null===n||void 0===n||n(),Sn(qu,this,r),Ji(An(Gu,this),{rotation:r})),i!==An(Xu,this)){null===n||void 0===n||n(),Sn(Xu,this,i);const t={div:null,properties:null,ctx:sh.call(eh,An(zu,this))};for(const e of An($u,this))t.properties=An(Ju,this).get(e),t.div=e,xn(th,this,rh).call(this,t)}}cancel(){var t;const e=new xi("TextLayer task cancelled.");null===(t=An(Vu,this))||void 0===t||t.cancel(e).catch(()=>{}),Sn(Vu,this,null),An(Ou,this).reject(e)}get textDivs(){return An($u,this)}get textContentItemsStr(){return An(Yu,this)}static cleanup(){if(!(xn(eh,this,fh)._.size>0)){xn(eh,this,ch)._.clear();for(const{canvas:t}of xn(eh,this,uh)._.values())t.remove();xn(eh,this,uh)._.clear()}}}function nh(t){var e,n;if(An(ju,this))return;null!==(n=(e=An(Bu,this)).ctx)&&void 0!==n||(e.ctx=sh.call(on,An(zu,this)));const i=An($u,this),r=An(Yu,this);for(const s of t){if(i.length>1e5)return ui("Ignoring additional textDivs for performance reasons."),void Sn(ju,this,!0);if(void 0!==s.str)r.push(s.str),xn(th,this,ih).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const t=An(Fu,this);Sn(Fu,this,document.createElement("span")),An(Fu,this).classList.add("markedContent"),s.id&&An(Fu,this).setAttribute("id","".concat(s.id)),t.append(An(Fu,this))}else"endMarkedContent"===s.type&&Sn(Fu,this,An(Fu,this).parentNode)}}function ih(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};An($u,this).push(e);const i=Ci.transform(An(Zu,this),t.transform);let r=Math.atan2(i[1],i[0]);const s=An(Ku,this)[t.fontName];s.vertical&&(r+=Math.PI/2);let a=An(Wu,this)&&s.fontSubstitution||s.fontFamily;a=on.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*lh.call(on,a,s,An(zu,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",d=e.style;An(Fu,this)===An(Gu,this)?(d.left="".concat((100*c/An(Hu,this)).toFixed(2),"%"),d.top="".concat((100*u/An(Uu,this)).toFixed(2),"%")):(d.left="".concat(h).concat(c.toFixed(2),"px)"),d.top="".concat(h).concat(u.toFixed(2),"px)")),d.fontSize="".concat(h).concat((dh._*o).toFixed(2),"px)"),d.fontFamily=a,n.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,An(Wu,this)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==r&&(n.angle=r*(180/Math.PI));let f=!1;if(t.str.length>1)f=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(f=!0)}if(f&&(n.canvasWidth=s.vertical?t.height:t.width),An(Ju,this).set(e,n),An(Bu,this).div=e,An(Bu,this).properties=n,xn(th,this,rh).call(this,An(Bu,this)),n.hasText&&An(Fu,this).append(e),n.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),An(Fu,this).append(t)}}function rh(t){const{div:e,properties:n,ctx:i}=t,{style:r}=e;let s="";if(dh._>1&&(s="scale(".concat(1/dh._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:t}=r,{canvasWidth:a,fontSize:o}=n;ah.call(on,i,o*An(Xu,this),t);const{width:l}=i.measureText(e.textContent);l>0&&(s="scaleX(".concat(a*An(Xu,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function sh(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=xn(on,this,uh)._.get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),xn(on,this,uh)._.set(t,e),xn(on,this,hh)._.set(e,{size:0,family:""})}return e}function ah(t,e,n){const i=xn(on,this,hh)._.get(t);e===i.size&&n===i.family||(t.font="".concat(e,"px ").concat(n),i.size=e,i.family=n)}function oh(){if(null!==xn(on,this,dh)._)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),dh._=xn(on,this,t.getBoundingClientRect().height),t.remove()}function lh(t,e,n){const i=xn(on,this,ch)._.get(t);if(i)return i;const r=xn(on,this,sh).call(this,n);r.canvas.width=r.canvas.height=30,xn(on,this,ah).call(this,r,30,t);const s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(Si.platform.isFirefox&&ui("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?l=e.ascent:e.descent&&(l=1+e.descent)),xn(on,this,ch)._.set(t,l),l}on=eh;var ch={_:new Map},uh={_:new Map},hh={_:new WeakMap},dh={_:null},fh={_:new Set};class ph{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!ph.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&e.push({str:r}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}function gh(){var t,e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new mh,{docId:r}=i,s=n.url?function(t){if(t instanceof URL)return t.href;if("string"===typeof t){if(En)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(t){if(En&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return Ai(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(null===t||void 0===t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(t=n.password)&&void 0!==t?t:null,u=n.range instanceof kh?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof Lh?n.worker:null;const f=n.verbosity,p="string"!==typeof n.docBaseUrl||Bi(n.docBaseUrl)?null:n.docBaseUrl,g=el(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(En?ac:Pl),b=el(n.iccUrl),y=el(n.standardFontDataUrl),w=n.StandardFontDataFactory||(En?oc:tc),_=el(n.wasmUrl),x=n.WasmFactory||(En?lc:nc),k=!0!==n.stopAtErrors,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!En,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!En&&(Si.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T="boolean"===typeof n.disableFontFace?n.disableFontFace:En,P=!0===n.fontExtraProperties,R=!0===n.enableXfa,N=n.ownerDocument||globalThis.document,D=!0===n.disableRange,L=!0===n.disableStream,I=!0===n.disableAutoFetch,O=!0===n.pdfBug,F=n.CanvasFactory||(En?sc:Ml),j=n.FilterFactory||(En?rc:zl),W=!0===n.enableHWA,z=!1!==n.useWasm,B=u?u.length:null!==(e=n.length)&&void 0!==e?e:NaN,U="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!En&&!T,H="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===Pl&&w===tc&&x===nc&&g&&y&&_&&Vi(g,document.baseURI)&&Vi(y,document.baseURI)&&Vi(_,document.baseURI));oi(f);const V={canvasFactory:new F({ownerDocument:N,enableHWA:W}),filterFactory:new j({docId:r,ownerDocument:N}),cMapReaderFactory:H?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:H?null:new w({baseUrl:y}),wasmFactory:H?null:new x({baseUrl:_})};d||(d=Lh.create({verbosity:f,port:Vc.workerPort}),i._worker=d);const G={docId:r,apiVersion:"5.4.54",data:a,password:c,disableAutoFetch:I,rangeChunkSize:h,length:B,docBaseUrl:p,enableXfa:R,evaluatorOptions:{maxImageSize:A,disableFontFace:T,ignoreErrors:k,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:M,fontExtraProperties:P,useSystemFonts:U,useWasm:z,useWorkerFetch:H,cMapUrl:g,iccUrl:b,standardFontDataUrl:y,wasmUrl:_}},q={ownerDocument:N,pdfBug:O,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:R}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",G,a?[a.buffer]:null);let e;if(u)e=new cu(u,{disableRange:D,disableStream:L});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const t=Vi(s)?wu:En?Mu:Au;e=new t({url:s,length:B,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:D,disableStream:L})}return t.then(t=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new _l(r,t,d.port),s=new Yh(n,i,e,q,V,W);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class mh{constructor(){d(this,"_capability",Promise.withResolvers()),d(this,"_transport",null),d(this,"_worker",null),d(this,"docId","d".concat((vh._=(ln=vh._,cn=ln++,ln),cn))),d(this,"destroyed",!1),d(this,"onPassword",null),d(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0;try{var e,n;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(t=this._worker)||void 0===t||t.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var vh={_:0},bh=new WeakMap,yh=new WeakMap,wh=new WeakMap,_h=new WeakMap,xh=new WeakMap;class kh{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_n(this,bh,Promise.withResolvers()),_n(this,yh,[]),_n(this,wh,[]),_n(this,_h,[]),_n(this,xh,[]),this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){An(xh,this).push(t)}addProgressListener(t){An(_h,this).push(t)}addProgressiveReadListener(t){An(wh,this).push(t)}addProgressiveDoneListener(t){An(yh,this).push(t)}onDataRange(t,e){for(const n of An(xh,this))n(t,e)}onDataProgress(t,e){An(bh,this).promise.then(()=>{for(const n of An(_h,this))n(t,e)})}onDataProgressiveRead(t){An(bh,this).promise.then(()=>{for(const e of An(wh,this))e(t)})}onDataProgressiveDone(){An(bh,this).promise.then(()=>{for(const t of An(yh,this))t()})}transportReady(){An(bh,this).resolve()}requestDataRange(t,e){hi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Ah{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gi(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Sh=new WeakMap,Eh=new WeakSet;class Ch{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];wn(this,Eh),_n(this,Sh,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new Hi:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Lu,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Wi({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gi(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null}render(t){var e,n;let{canvasContext:i,canvas:r=i.canvas,viewport:s,intent:a="display",annotationMode:o=Fn.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:p=!1}=t;null===(e=this._stats)||void 0===e||e.time("Overall");const g=this._transport.getRenderingIntent(a,o,f,p),{renderingIntent:m,cacheKey:v}=g;Sn(Sh,this,!1),u||(u=this._transport.getOptionalContentConfig(m));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const y=!!(m&Rn);var w;b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(w=this._stats)||void 0===w||w.time("Page Request"),this._pumpOperatorList(g));const _=t=>{var e;(b.renderTasks.delete(x),y&&Sn(Sh,this,!0),xn(Eh,this,Mh).call(this),t?(x.capability.reject(t),this._abortOperatorList({intentState:b,reason:t instanceof Error?t:new Error(t)})):x.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new td({callback:_,params:{canvas:r,canvasContext:i,viewport:s,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA});((n=b).renderTasks||(n.renderTasks=new Set)).add(x);const k=x.task;return Promise.all([b.displayReadyCapability.promise,u]).then(t=>{var e;let[n,i]=t;if(this.destroyed)_();else{if(null===(e=this._stats)||void 0===e||e.time("Rendering"),!(i.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:n,optionalContentConfig:i}),x.operatorListChanged()}}).catch(_),k}getOperatorList(){let{intent:t="display",annotationMode:e=Fn.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(t,e,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(t=>ph.textContent(t));const e=this.streamTextContent(t);return new Promise(function(t,n){const i=e.getReader(),r={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?t(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),e())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),Sn(Sh,this,!1),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Sn(Sh,this,!0);const e=xn(Eh,this,Mh).call(this);return t&&e&&this._stats&&(this._stats=new Hi),e}_startRenderPage(t,e){var n,i;const r=this._intentStates.get(e);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&xn(Eh,this,Mh).call(this)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=t;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(t=>{let{value:e,done:n}=t;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,l),c())},t=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const t of l.renderTasks)t.operatorListChanged();xn(Eh,this,Mh).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}})};c()}_abortOperatorList(t){let{intentState:e,reason:n,force:i=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof zi){let t=100;return n.extraDelay>0&&n.extraDelay<1e3&&(t+=n.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},t))}}if(e.streamReader.cancel(new xi(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}function Mh(){if(!An(Sh,this)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Sn(Sh,this,!1),!0}var Th=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,Nh=new WeakMap,Dh=new WeakSet;class Lh{constructor(){let{name:t=null,port:e=null,verbosity:n=li()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(wn(this,Dh),_n(this,Th,Promise.withResolvers()),_n(this,Ph,null),_n(this,Rh,null),_n(this,Nh,null),this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Uh._.has(e))throw new Error("Cannot use more than one PDFWorker per port.");Uh._.set(e,this),xn(Dh,this,Oh).call(this,e)}else xn(Dh,this,Fh).call(this)}get promise(){return An(Th,this).promise}get port(){return An(Rh,this)}get messageHandler(){return An(Ph,this)}destroy(){var t,e;this.destroyed=!0,null===(t=An(Nh,this))||void 0===t||t.terminate(),Sn(Nh,this,null),Uh._.delete(An(Rh,this)),Sn(Rh,this,null),null===(e=An(Ph,this))||void 0===e||e.destroy(),Sn(Ph,this,null)}static create(t){const e=xn(Lh,this,Uh)._.get(null===t||void 0===t?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Lh(t)}static get workerSrc(){if(Vc.workerSrc)return Vc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return gi(this,"_setupFakeWorkerGlobal",(async()=>{if(kn(Lh,this,Wh))return kn(Lh,this,Wh);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function Ih(){An(Th,this).resolve(),An(Ph,this).send("configure",{verbosity:this.verbosity})}function Oh(t){Sn(Rh,this,t),Sn(Ph,this,new _l("main","worker",t)),An(Ph,this).on("ready",()=>{}),xn(Dh,this,Ih).call(this)}function Fh(){if(Bh._||Wh(un))return void xn(Dh,this,jh).call(this);let{workerSrc:t}=un;try{un._isSameOrigin(window.location,t)||(t=un._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new _l("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?An(Th,this).reject(new Error("Worker was destroyed")):xn(Dh,this,jh).call(this)},r=new AbortController;e.addEventListener("error",()=>{An(Nh,this)||i()},{signal:r.signal}),n.on("test",t=>{r.abort(),!this.destroyed&&t?(Sn(Ph,this,n),Sn(Rh,this,e),Sn(Nh,this,e),xn(Dh,this,Ih).call(this)):i()}),n.on("ready",t=>{if(r.abort(),this.destroyed)i();else try{s()}catch(e){xn(Dh,this,jh).call(this)}});const s=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void s()}catch(e){ci("The worker has been disabled.")}xn(Dh,this,jh).call(this)}function jh(){Bh._||(ui("Setting up fake worker."),Bh._=!0),un._setupFakeWorkerGlobal.then(t=>{var e,n;if(this.destroyed)return void An(Th,this).reject(new Error("Worker was destroyed"));const i=new al;Sn(Rh,this,i);const r="fake".concat((zh._=(e=zh._,n=e++,e),n)),s=new _l(r+"_worker",r,i);t.setup(s,i),Sn(Ph,this,new _l(r,r+"_worker",i)),xn(Dh,this,Ih).call(this)}).catch(t=>{An(Th,this).reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}function Wh(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(n){return null}}un=Lh;var zh={_:0},Bh={_:!1},Uh={_:new WeakMap};En&&(Bh._=xn(un,un,!0),Vc.workerSrc||(Vc.workerSrc="./pdf.worker.mjs")),un._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(e,n);return n.origin===i.origin},un._createCDNWrapper=t=>{const e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},un.fromPort=t=>{var e;if(e="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+e),null===t||void 0===t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return un.create(t)};var Hh=new WeakMap,Vh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Kh=new WeakSet;class Yh{constructor(t,e,n,i,r,s){wn(this,Kh),_n(this,Hh,new Map),_n(this,Vh,new Map),_n(this,Gh,new Map),_n(this,qh,new Map),_n(this,Xh,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Lu,this.fontLoader=new Zo({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return gi(this,"annotationStorage",new Ko)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fn.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Pn,a=Ho;switch(t){case"any":s=Tn;break;case"display":break;case"print":s=Rn;break;default:ui("getRenderingIntent - invalid intent: ".concat(t))}const o=s&Rn&&n instanceof $o?n:this.annotationStorage;switch(e){case Fn.DISABLE:s+=Ln;break;case Fn.ENABLE:break;case Fn.ENABLE_FORMS:s+=Nn;break;case Fn.ENABLE_STORAGE:s+=Dn,a=o.serializable;break;default:ui("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(s+=In),r&&(s+=On);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=An(Xh,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of An(Vh,this).values())e.push(i._destroy());An(Vh,this).clear(),An(Gh,this).clear(),An(qh,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var t,e;this.commonObjs.clear(),this.fontLoader.clear(),An(Hh,this).clear(),this.filterFactory.destroy(),eh.cleanup(),null===(t=this._networkStream)||void 0===t||t.cancelAllRequests(new xi("Worker was terminated.")),null===(e=this.messageHandler)||void 0===e||e.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{di(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function(t){let{value:n,done:i}=t;i?e.close():(di(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",async t=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=e.onProgress)||void 0===s||s.call(e,this._lastProgress);this._fullReader.onProgress=t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),t.on("GetRangeReader",(t,e)=>{di(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then(function(t){let{value:n,done:i}=t;i?e.close():(di(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{n.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",t=>{let{pdfInfo:n}=t;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Ah(n,this))}),t.on("DocException",t=>{e._capability.reject(bl(t))}),t.on("PasswordRequest",t=>{Sn(Xh,this,Promise.withResolvers());try{if(!e.onPassword)throw bl(t);const n=t=>{t instanceof Error?An(Xh,this).reject(t):An(Xh,this).resolve({password:t})};e.onPassword(n,t.code)}catch(n){An(Xh,this).reject(n)}return An(Xh,this).promise}),t.on("DataLoaded",t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{if(this.destroyed)return;An(Vh,this).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",e=>{var n;let[i,r,s]=e;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const t=s.error;ui("Error during font loading: ".concat(t)),this.commonObjs.resolve(i,t);break}const e=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,a=new tl(s,e);this.fontLoader.bind(a).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(i,a)});break;case"CopyLocalImage":const{imageRef:o}=s;di(o,"The imageRef must be defined.");for(const t of An(Vh,this).values())for(const[,e]of t.objs)if((null===e||void 0===e?void 0:e.ref)===o)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),t.on("obj",t=>{let[e,n,i,r]=t;if(this.destroyed)return;const s=An(Vh,this).get(n);var a;if(!s.objs.has(e))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(e,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),t.on("DocProgress",t=>{var n;this.destroyed||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}),t.on("FetchBinaryData",async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const e=this[t.type];if(!e)throw new Error("".concat(t.type," not initialized, see the `useWorkerFetch` parameter."));return e.fetch(t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;this.annotationStorage.size<=0&&ui("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=An(Gh,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&An(qh,this).set(n.refStr,t);const i=new Ch(e,n,this,this._params.pdfBug);return An(Vh,this).set(e,i),i});return An(Gh,this).set(e,i),i}getPageIndex(t){return nl(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return xn(Kh,this,Qh).call(this,"GetFieldObjects")}hasJSActions(){return xn(Kh,this,Qh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return xn(Kh,this,Qh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return xn(Kh,this,Qh).call(this,"GetOptionalContentConfig").then(e=>new ou(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=An(Hh,this).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(t=>{var e,n,i,r;return{info:t[0],metadata:t[1]?new Yc(t[1]):null,contentDispositionFilename:null!==(e=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==e?e:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return An(Hh,this).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of An(Vh,this).values()){if(!t.cleanup())throw new Error("startCleanup: Page ".concat(t.pageNumber," is currently rendering."))}this.commonObjs.clear(),t||this.fontLoader.clear(),An(Hh,this).clear(),this.filterFactory.destroy(!0),eh.cleanup()}}cachedPageNumber(t){var e;if(!nl(t))return null;const n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=An(qh,this).get(n))&&void 0!==e?e:null}}function Qh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=An(Hh,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return An(Hh,this).set(t,i),i}var $h=new WeakMap;class Jh{constructor(t){_n(this,$h,null),d(this,"onContinue",null),d(this,"onError",null),Sn($h,this,t)}get promise(){return An($h,this).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;An($h,this).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=An($h,this).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=An($h,this);return t.form||t.canvas&&(null===e||void 0===e?void 0:e.size)>0}}var Zh=new WeakMap;class td{constructor(t){let{callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1}=t;_n(this,Zh,null),this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Jh(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(t){var e,n;let{transparency:i=!1,optionalContentConfig:r}=t;if(this.cancelled)return;if(this._canvas){if(ed._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ed._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new zc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var t,e,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),An(Zh,this)&&(window.cancelAnimationFrame(An(Zh,this)),Sn(Zh,this,null)),ed._.delete(this._canvas),i||(i=new zi("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(e=(n=this.task).onError)||void 0===e||e.call(n,i)}operatorListChanged(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Sn(Zh,this,window.requestAnimationFrame(()=>{Sn(Zh,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ed._.delete(this._canvas),this.callback())))}}var ed={_:new WeakSet};var nd=new WeakMap,id=new WeakMap,rd=new WeakMap,sd=new WeakMap,ad=new WeakMap,od=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,hd=new WeakMap,dd=new WeakSet;class fd{static get _keyboardManager(){return gi(this,"_keyboardManager",new Wr([[["Escape","mac+Escape"],fd.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fd.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fd.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fd.prototype._moveToPrevious],[["Home","mac+Home"],fd.prototype._moveToBeginning],[["End","mac+End"],fd.prototype._moveToEnd]]))}constructor(t){var e,n;let{editor:i=null,uiManager:r=null}=t;wn(this,dd),_n(this,nd,null),_n(this,id,null),_n(this,rd,void 0),_n(this,sd,null),_n(this,ad,!1),_n(this,od,!1),_n(this,ld,null),_n(this,cd,void 0),_n(this,ud,null),_n(this,hd,null),i?(Sn(od,this,!1),Sn(ld,this,i)):Sn(od,this,!0),Sn(hd,this,(null===i||void 0===i?void 0:i._uiManager)||r),Sn(cd,this,An(hd,this)._eventBus),Sn(rd,this,(null===i||void 0===i||null===(e=i.color)||void 0===e?void 0:e.toUpperCase())||(null===(n=An(hd,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),wd._||(wd._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const t=Sn(nd,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",An(ld,this)&&(t.ariaControls="".concat(An(ld,this).id,"_colorpicker_dropdown"));const e=An(hd,this)._signal;t.addEventListener("click",xn(dd,this,vd).bind(this),{signal:e}),t.addEventListener("keydown",xn(dd,this,md).bind(this),{signal:e});const n=Sn(id,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=An(rd,this),t.append(n),t}renderMainDropdown(){const t=Sn(sd,this,xn(dd,this,pd).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===An(nd,this))return void xn(dd,this,vd).call(this,t);const e=t.target.getAttribute("data-color");e&&xn(dd,this,gd).call(this,e,t)}_moveToNext(t){var e,n;kn(dd,this,yd)?t.target!==An(nd,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=An(sd,this).firstChild)||void 0===n||n.focus():xn(dd,this,vd).call(this,t)}_moveToPrevious(t){var e,n;t.target!==(null===(e=An(sd,this))||void 0===e?void 0:e.firstChild)&&t.target!==An(nd,this)?(kn(dd,this,yd)||xn(dd,this,vd).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):kn(dd,this,yd)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;kn(dd,this,yd)?null===(e=An(sd,this).firstChild)||void 0===e||e.focus():xn(dd,this,vd).call(this,t)}_moveToEnd(t){var e;kn(dd,this,yd)?null===(e=An(sd,this).lastChild)||void 0===e||e.focus():xn(dd,this,vd).call(this,t)}hideDropdown(){var t,e;null===(t=An(sd,this))||void 0===t||t.classList.add("hidden"),An(nd,this).ariaExpanded="false",null===(e=An(ud,this))||void 0===e||e.abort(),Sn(ud,this,null)}_hideDropdownFromKeyboard(){var t;An(od,this)||(kn(dd,this,yd)?(this.hideDropdown(),An(nd,this).focus({preventScroll:!0,focusVisible:An(ad,this)})):null===(t=An(ld,this))||void 0===t||t.unselect())}updateColor(t){if(An(id,this)&&(An(id,this).style.backgroundColor=t),!An(sd,this))return;const e=An(hd,this).highlightColors.values();for(const n of An(sd,this).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;null===(t=An(nd,this))||void 0===t||t.remove(),Sn(nd,this,null),Sn(id,this,null),null===(e=An(sd,this))||void 0===e||e.remove(),Sn(sd,this,null)}}function pd(){const t=document.createElement("div"),e=An(hd,this)._signal;t.addEventListener("contextmenu",Gi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),An(ld,this)&&(t.id="".concat(An(ld,this).id,"_colorpicker_dropdown"));for(const[n,i]of An(hd,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",wd._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===An(rd,this),r.addEventListener("click",xn(dd,this,gd).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",xn(dd,this,md).bind(this),{signal:e}),t}function gd(t,e){e.stopPropagation(),An(cd,this).dispatch("switchannotationeditorparams",{source:this,type:zn.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}function md(t){hn._keyboardManager.exec(this,t)}function vd(t){if(kn(dd,this,yd))return void this.hideDropdown();if(Sn(ad,this,0===t.detail),An(ud,this)||(Sn(ud,this,new AbortController),window.addEventListener("pointerdown",xn(dd,this,bd).bind(this),{signal:An(hd,this).combinedSignal(An(ud,this))})),An(nd,this).ariaExpanded="true",An(sd,this))return void An(sd,this).classList.remove("hidden");const e=Sn(sd,this,xn(dd,this,pd).call(this));An(nd,this).append(e)}function bd(t){var e;null!==(e=An(sd,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function yd(t){return An(sd,t)&&!An(sd,t).classList.contains("hidden")}hn=fd;var wd={_:null},_d=new WeakMap,xd=new WeakMap,kd=new WeakMap;class Ad{constructor(t){_n(this,_d,null),_n(this,xd,null),_n(this,kd,null),Sn(xd,this,t),Sn(kd,this,t._uiManager),Sd._||(Sd._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(An(_d,this))return An(_d,this);const{editorType:t,colorType:e,colorValue:n}=An(xd,this),i=Sn(_d,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Sd._[t]),i.addEventListener("input",()=>{An(kd,this).updateParams(e,i.value)},{signal:An(kd,this)._signal}),i}update(t){An(_d,this)&&(An(_d,this).value=t)}destroy(){var t;null===(t=An(_d,this))||void 0===t||t.remove(),Sn(_d,this,null)}hideDropdown(){}}var Sd={_:null};function Ed(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Cd(t){return Math.max(0,Math.min(255,255*t))}class Md{static CMYK_G(t){let[e,n,i,r]=t;return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=Cd(e),[e,e,e]}static G_HTML(t){let[e]=t;const n=Ed(e);return"#".concat(n).concat(n).concat(n)}static RGB_G(t){let[e,n,i]=t;return["G",.3*e+.59*n+.11*i]}static RGB_rgb(t){return t.map(Cd)}static RGB_HTML(t){return"#".concat(t.map(Ed).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,n,i,r]=t;return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(t){let[e,n,i,r]=t;return[Cd(1-Math.min(1,e+r)),Cd(1-Math.min(1,i+r)),Cd(1-Math.min(1,n+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,n,i]=t;const r=1-e,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class Td{create(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){hi("Abstract method `_createSVG` called.")}}class Pd extends Td{_createSVG(t){return document.createElementNS(Oi,t)}}class Rd{static setupStorage(t,e,n,i,r){const s=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?t.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})})}break;case"select":if(null!==s.value){t.setAttribute("value",s.value);for(const t of n.children)t.attributes.value===s.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",t=>{const n=t.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:r})})}}static setAttributes(t){let{html:e,element:n,storage:i=null,intent:r,linkService:s}=t;const{attributes:a}=n,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=t.div;if(o.append(s),t.viewport){const e="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const t=document.createTextNode(i.value);s.append(t),a&&ph.shouldBuildText(i.name)&&l.push(t)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,h;const[t,i,s]=c.at(-1);if(i+1===t.children.length){c.pop();continue}const o=t.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const t=document.createTextNode(o.value);l.push(t),s.append(t);continue}const f=null!==o&&void 0!==o&&null!==(u=o.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(s.append(f),o.attributes&&this.setAttributes({html:f,element:o,storage:e,intent:r,linkService:n}),(null===(h=o.children)||void 0===h?void 0:h.length)>0)c.push([o,-1,f]);else if(o.value){const t=document.createTextNode(o.value);a&&ph.shouldBuildText(d)&&l.push(t),f.append(t)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}const Nd=new WeakSet,Dd=60*(new Date).getTimezoneOffset()*1e3;class Ld{static create(t){switch(t.data.annotationType){case Kn.LINK:return new Ud(t);case Kn.TEXT:return new qd(t);case Kn.WIDGET:switch(t.data.fieldType){case"Tx":return new Kd(t);case"Btn":return t.data.radioButton?new $d(t):t.data.checkBox?new Qd(t):new Jd(t);case"Ch":return new Zd(t);case"Sig":return new Yd(t)}return new Xd(t);case Kn.POPUP:return new tf(t);case Kn.FREETEXT:return new Lf(t);case Kn.LINE:return new Of(t);case Kn.SQUARE:return new jf(t);case Kn.CIRCLE:return new zf(t);case Kn.POLYLINE:return new Uf(t);case Kn.CARET:return new Vf(t);case Kn.INK:return new Kf(t);case Kn.POLYGON:return new Hf(t);case Kn.HIGHLIGHT:return new Qf(t);case Kn.UNDERLINE:return new $f(t);case Kn.SQUIGGLY:return new Jf(t);case Kn.STRIKEOUT:return new Zf(t);case Kn.STAMP:return new tp(t);case Kn.FILEATTACHMENT:return new ip(t);default:return new Wd(t)}}}var Id=new WeakMap,Od=new WeakMap,Fd=new WeakMap,jd=new WeakSet;class Wd{constructor(t){let{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wn(this,jd),_n(this,Id,null),_n(this,Od,!1),_n(this,Fd,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(t){let{contentsObj:e,richText:n}=t;return!!(null!==e&&void 0!==e&&e.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wd._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;t.rect&&(An(Id,this)||Sn(Id,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=t;n&&xn(jd,this,zd).call(this,n);let r=(null===(e=An(Fd,this))||void 0===e?void 0:e.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=An(Fd,this).popup),r&&(r.updateEdited(t),null!==i&&void 0!==i&&i.deleted&&(r.remove(),Sn(Fd,this,null),this.popup=null))}resetEdited(){var t;An(Id,this)&&(xn(jd,this,zd).call(this,An(Id,this).rect),null===(t=An(Fd,this))||void 0===t||t.popup.resetEdited(),Sn(Id,this,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Xd||this instanceof Ud||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof tf){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,r),r}const{width:a,height:o}=this;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e="calc(".concat(t,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=e}else if(this instanceof $d){const t="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=t}switch(e.borderStyle.style){case Yn:s.borderStyle="solid";break;case Qn:s.borderStyle="dashed";break;case $n:ui("Unimplemented border style: beveled");break;case Jn:ui("Unimplemented border style: inset");break;case Zn:s.borderBottomStyle="solid"}const i=e.borderColor||null;i?(Sn(Od,this,!0),s.borderColor=Ci.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=Ci.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-d)/u,"%");const{rotation:f}=e;return e.hasOwnCanvas||0===f?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/u,"%")):this.setRotation(f,r),r}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;t%180!==0&&([r,s]=[s,r]),e.style.width="".concat(100*r/n,"%"),e.style.height="".concat(100*s/i,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],r=i[0],s=i.slice(1);n.target.style[e]=Md["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[e]:Md["".concat(r,"_rgb")](s)})};return gi(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];null===r||void 0===r||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const s=n[i];if(s){s({detail:{[i]:r},target:t}),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(t=>Math.fround(t));if(8===t.length){const[s,a,o,l]=t.subarray(2,6);if(i===s&&r===a&&e===o&&n===l)return}const{style:s}=this.container;let a;if(An(Od,this)){const{borderColor:t,borderWidth:e}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(e,'">')],this.container.classList.add("hasBorder")}const o=i-e,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),f="clippath_".concat(this.data.id);d.setAttribute("id",f),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let g=2,m=t.length;g<m;g+=8){var p;const n=t[g],i=t[g+1],s=t[g+2],u=t[g+3],h=c.createElement("rect"),f=(s-e)/o,m=(r-i)/l,v=(n-s)/o,b=(i-u)/l;h.setAttribute("x",f),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",b),d.append(h),null===(p=a)||void 0===p||p.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(m,'" width="').concat(v,'" height="').concat(b,'"/>'))}An(Od,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const r=Sn(Fd,this,new tf({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}get hasPopupElement(){return!!(An(Fd,this)||this.popup||this.data.popupRef)}render(){hi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:r,exportValues:s}of i){if(-1===t)continue;if(r===e)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||Nd.has(a)?n.push({id:r,exportValue:i,domElement:a}):ui("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,r=i.getAttribute("data-element-id");r!==e&&(Nd.has(i)&&n.push({id:r,exportValue:t,domElement:i}))}return n}show(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function zd(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...t),e.left="".concat(100*(t[0]-a)/r,"%"),e.top="".concat(100*(s-t[3]+o)/s,"%"),0===i?(e.width="".concat(100*(t[2]-t[0])/r,"%"),e.height="".concat(100*(t[3]-t[1])/s,"%")):this.setRotation(i)}var Bd=new WeakSet;class Ud extends Wd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null===e||void 0===e||!e.ignoreBorder),createQuadrilaterals:!0}),wn(this,Bd),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(xn(Bd,this,Vd).call(this,n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(xn(Bd,this,Gd).call(this,n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&xn(Bd,this,Hd).call(this),n&&(t.title=n)}_bindNamedAction(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),xn(Bd,this,Hd).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>{var t;return null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),xn(Bd,this,Hd).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),xn(Bd,this,Hd).call(this),!this._fieldObjects)return ui('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{null===n||void 0===n||n();const{fields:t,refs:i,include:r}=e,s=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===r&&s.push(n)}else for(const e of Object.values(this._fieldObjects))s.push(...e);const a=this.annotationStorage,o=[];for(const e of s){const{id:t}=e;switch(o.push(t),e.type){case"text":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;a.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(t,'"]'));n&&(Nd.has(n)?n.dispatchEvent(new Event("resetform")):ui("_bindResetFormAction - element not allowed: ".concat(t)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Hd(){this.container.setAttribute("data-internal-link","")}function Vd(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>{var t;return null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},xn(Bd,this,Hd).call(this)}function Gd(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),xn(Bd,this,Hd).call(this)}class qd extends Wd{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Xd extends Wd{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Si.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,t=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(n,t=>{var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}}))})}_setEventListeners(t,e,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||e||(e={focused:!1}),this._setEventListener(t,e,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Ci.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=t.style;let s;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(Mn*i))||1);s=Math.min(i,a(e/Mn))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(t/Mn))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=Ci.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Kd extends Xd{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=n),r.setValue(s.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nd.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:d}=this.data,f=!!h&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",t=>{var e;const i=null!==(e=this.data.defaultFieldValue)&&void 0!==e?e:"";n.value=c.userValue=i,c.formattedValue=null});let p=t=>{const{formattedValue:e}=c;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",t=>{var e;if(c.focused)return;const{target:n}=t;if(f&&(n.type=h,d&&(n.step=d)),c.userValue){const t=c.userValue;if(f)if("time"===h){const e=new Date(t),i=[e.getHours(),e.getMinutes(),e.getSeconds()];n.value=i.map(t=>t.toString().padStart(2,"0")).join(":")}else n.value=new Date(t-Dd).toISOString().split("date"===h?"T":".",1)[0];else n.value=t}c.lastCommittedValue=n.value,c.commitKey=1,null!==(e=this.data.actions)&&void 0!==e&&e.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",f||t.setValue(e,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};f&&(r.value=i),t.setValue(e,r)},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,t.setValue(e,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",t=>{var n;c.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=t.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const i=p;p=null,n.addEventListener("blur",t=>{var n;if(!c.focused||!t.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=t;let{value:s}=r;if(f){if(s&&"time"===h){const t=s.split(":").map(t=>parseInt(t,10));s=new Date(2e3,0,1,t[0],t[1],t[2]||0).valueOf(),r.step=""}else s=new Date(s).valueOf();r.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}));i(t)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",t=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=t,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,u=o;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(a).match(/^[^\w]*\w*/);t&&(u+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(u+=1)}t.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(p&&n.addEventListener("blur",p),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(t,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Yd extends Xd{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Qd extends Xd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Nd.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=n),t.setValue(a.id,{value:n})}t.setValue(n,{value:s})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $d extends Xd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const s of this._getElementsByName(e.fieldName,n))t.setValue(s.id,{value:!1});const r=document.createElement("input");if(Nd.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",e=>{const{name:i,checked:r}=e.target;for(const s of this._getElementsByName(i,n))t.setValue(s.id,{value:!1});t.setValue(n,{value:r})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue;t.target.checked=null!==n&&void 0!==n&&n===e.buttonValue}),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;r.addEventListener("updatefromsandbox",e=>{const r={value:e=>{const r=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=r&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jd extends Ud{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class Zd extends Xd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Nd.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===e});for(const c of this.data.options){const t=document.createElement("option");t.textContent=c.displayValue,t.value=c.exportValue,n.value.includes(c.exportValue)&&(t.setAttribute("selected",!0),r=!1),i.append(t)}let s=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),s=()=>{t.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=t=>{const e=t?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,t=>t.selected).map(t=>t[e]):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const t of i.options)t.selected=c.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,t=>t.selected)&&(r[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,u?u.before(h):i.append(h),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of r){const{displayValue:e,exportValue:n}=t,r=document.createElement("option");r.textContent=e,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);t.setValue(e,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):i.addEventListener("input",function(n){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class tf extends Wd{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Wd._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new kf({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(t=>"".concat(Di).concat(t)).join(",")),this.container}}var ef=new WeakMap,nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap,cf=new WeakMap,uf=new WeakMap,hf=new WeakMap,df=new WeakMap,ff=new WeakMap,pf=new WeakMap,gf=new WeakMap,mf=new WeakMap,vf=new WeakMap,bf=new WeakMap,yf=new WeakMap,wf=new WeakMap,_f=new WeakMap,xf=new WeakSet;class kf{constructor(t){let{container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h}=t;wn(this,xf),_n(this,ef,xn(xf,this,Tf).bind(this)),_n(this,nf,xn(xf,this,Df).bind(this)),_n(this,rf,xn(xf,this,Nf).bind(this)),_n(this,sf,xn(xf,this,Rf).bind(this)),_n(this,af,null),_n(this,of,null),_n(this,lf,null),_n(this,cf,null),_n(this,uf,null),_n(this,hf,null),_n(this,df,null),_n(this,ff,!1),_n(this,pf,null),_n(this,gf,null),_n(this,mf,null),_n(this,vf,null),_n(this,bf,null),_n(this,yf,null),_n(this,wf,null),_n(this,_f,!1),Sn(of,this,e),Sn(yf,this,r),Sn(lf,this,a),Sn(bf,this,o),Sn(hf,this,l),Sn(af,this,n),Sn(vf,this,c),Sn(df,this,u),Sn(uf,this,i),Sn(cf,this,Xi.toDateObject(s)),this.trigger=i.flatMap(t=>t.getElementsToTriggerPopup()),xn(xf,this,Af).call(this),An(of,this).hidden=!0,h&&xn(xf,this,Rf).call(this)}render(){var t;if(An(pf,this))return;const e=Sn(pf,this,document.createElement("div"));if(e.className="popup",An(af,this)){const t=e.style.outlineColor=Ci.makeHexColor(...An(af,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const n=document.createElement("span");if(n.className="header",null!==(t=An(yf,this))&&void 0!==t&&t.str){const t=document.createElement("span");t.className="title",n.append(t),({dir:t.dir,str:t.textContent}=An(yf,this))}if(e.append(n),An(cf,this)){const t=document.createElement("time");t.className="popupDate",t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:An(cf,this).valueOf()})),t.dateTime=An(cf,this).toISOString(),n.append(t)}const i=kn(xf,this,Sf);if(i)Rd.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(An(lf,this));e.append(t)}An(of,this).append(e)}_formatContents(t){let{str:e,dir:n}=t;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const t=r[s];i.append(document.createTextNode(t)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited(t){var e;let{rect:n,popup:i,deleted:r}=t;r||null!==i&&void 0!==i&&i.deleted?this.remove():(xn(xf,this,Af).call(this),An(wf,this)||Sn(wf,this,{contentsObj:An(lf,this),richText:An(bf,this)}),n&&Sn(mf,this,null),i&&(Sn(bf,this,xn(xf,this,Mf).call(this,i.text)),Sn(cf,this,Xi.toDateObject(i.date)),Sn(lf,this,null)),null===(e=An(pf,this))||void 0===e||e.remove(),Sn(pf,this,null))}resetEdited(){var t;An(wf,this)&&(({contentsObj:bn(Sn,[lf,this])._,richText:bn(Sn,[bf,this])._}=An(wf,this)),Sn(wf,this,null),null===(t=An(pf,this))||void 0===t||t.remove(),Sn(pf,this,null),Sn(mf,this,null))}remove(){var t,e;null===(t=An(gf,this))||void 0===t||t.abort(),Sn(gf,this,null),null===(e=An(pf,this))||void 0===e||e.remove(),Sn(pf,this,null),Sn(_f,this,!1),Sn(ff,this,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){Sn(_f,this,this.isVisible),An(_f,this)&&(An(of,this).hidden=!0)}maybeShow(){xn(xf,this,Af).call(this),An(_f,this)&&(An(pf,this)||xn(xf,this,Nf).call(this),Sn(_f,this,!1),An(of,this).hidden=!1)}get isVisible(){return!1===An(of,this).hidden}}function Af(){if(An(gf,this))return;Sn(gf,this,new AbortController);const{signal:t}=An(gf,this);for(const n of this.trigger)n.addEventListener("click",An(sf,this),{signal:t}),n.addEventListener("mouseenter",An(rf,this),{signal:t}),n.addEventListener("mouseleave",An(nf,this),{signal:t}),n.classList.add("popupTriggerArea");for(const n of An(uf,this)){var e;null===(e=n.container)||void 0===e||e.addEventListener("keydown",An(ef,this),{signal:t})}}function Sf(t){const e=An(bf,t),n=An(lf,t);return null===e||void 0===e||!e.str||null!==n&&void 0!==n&&n.str&&n.str!==e.str?null:An(bf,t).html||null}function Ef(t){var e;return(null===(e=kn(xf,t,Sf))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Cf(t){var e;return(null===(e=kn(xf,t,Sf))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function Mf(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:kn(xf,this,Cf),fontSize:kn(xf,this,Ef)?"calc(".concat(kn(xf,this,Ef),"px * var(--total-scale-factor))"):""}};for(const r of t.split("\n"))e.push({name:"span",value:r,attributes:i});return n}function Tf(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&An(ff,this))&&xn(xf,this,Rf).call(this)}function Pf(){if(null!==An(mf,this))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=An(hf,this);let s=!!An(df,this),a=An(s?df:vf,this);for(const d of An(uf,this))if(!a||null!==Ci.intersect(d.data.rect,a)){a=d.data.rect,s=!0;break}const o=Ci.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,u=o[1];Sn(mf,this,[100*(c-i)/e,100*(u-r)/n]);const{style:h}=An(of,this);h.left="".concat(An(mf,this)[0],"%"),h.top="".concat(An(mf,this)[1],"%")}function Rf(){Sn(ff,this,!An(ff,this)),An(ff,this)?(xn(xf,this,Nf).call(this),An(of,this).addEventListener("click",An(sf,this)),An(of,this).addEventListener("keydown",An(ef,this))):(xn(xf,this,Df).call(this),An(of,this).removeEventListener("click",An(sf,this)),An(of,this).removeEventListener("keydown",An(ef,this)))}function Nf(){An(pf,this)||this.render(),this.isVisible?An(ff,this)&&An(of,this).classList.add("focused"):(xn(xf,this,Pf).call(this),An(of,this).hidden=!1,An(of,this).style.zIndex=parseInt(An(of,this).style.zIndex)+1e3)}function Df(){An(of,this).classList.remove("focused"),!An(ff,this)&&this.isVisible&&(An(of,this).hidden=!0,An(of,this).style.zIndex=parseInt(An(of,this).style.zIndex)-1e3)}class Lf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Wn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var If=new WeakMap;class Of extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),_n(this,If,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=Sn(If,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return An(If,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Ff=new WeakMap;class jf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),_n(this,Ff,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=Sn(Ff,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return An(Ff,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Wf=new WeakMap;class zf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),_n(this,Wf,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=Sn(Wf,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",e/2),s.setAttribute("cy",n/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return An(Wf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Bf=new WeakMap;class Uf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),_n(this,Bf,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!e)return this.container;const a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,u=e.length;c<u;c+=2){const n=e[c]-t[0],i=t[3]-e[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=Sn(Bf,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return An(Bf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class Hf extends Uf{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Vf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Gf=new WeakMap,qf=new WeakMap,Xf=new WeakSet;class Kf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),wn(this,Xf),_n(this,Gf,null),_n(this,qf,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Wn.HIGHLIGHT:Wn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:a,height:o}=xn(Xf,this,Yf).call(this,e,t),l=this.svgFactory.create(a,o,!0),c=Sn(Gf,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let u=0,h=n.length;u<h;u++){const t=this.svgFactory.createElement(this.svgElementName);An(qf,this).push(t),t.setAttribute("points",n[u].join(",")),c.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,r=An(Gf,this);if(e>=0&&r.setAttribute("stroke-width",e||1),n)for(let s=0,a=An(qf,this).length;s<a;s++)An(qf,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:t,width:e,height:n}=xn(Xf,this,Yf).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),r.setAttribute("transform",t)}}getElementsToTriggerPopup(){return An(qf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Yf(t,e){switch(t){case 90:return{transform:"rotate(90) translate(".concat(-e[0],",").concat(e[1],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:"rotate(180) translate(".concat(-e[2],",").concat(e[1],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:"rotate(270) translate(".concat(-e[2],",").concat(e[3],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:"translate(".concat(-e[0],",").concat(e[3],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]}}}class Qf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wn.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const e=document.createElement("mark");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class $f extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Jf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Zf extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const e=document.createElement("s");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class tp extends Wd{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ep=new WeakMap,np=new WeakSet;class ip extends Wd{constructor(t){var e;super(t,{isRenderable:!0}),wn(this,np),_n(this,ep,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("fileattachmentannotation",p({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(e.name)?"paperclip":"pushpin",".svg"),e.fillAlpha&&e.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*e.fillAlpha),"%);"))),n.addEventListener("dblclick",xn(np,this,rp).bind(this)),Sn(ep,this,n);const{isMac:i}=Si.platform;return t.addEventListener("keydown",t=>{"Enter"===t.key&&(i?t.metaKey:t.ctrlKey)&&xn(np,this,rp).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return An(ep,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function rp(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var sp=new WeakMap,ap=new WeakMap,op=new WeakMap,lp=new WeakMap,cp=new WeakSet;class up{constructor(t){let{div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}=t;wn(this,cp),_n(this,sp,null),_n(this,ap,null),_n(this,op,new Map),_n(this,lp,null),this.div=e,Sn(sp,this,n),Sn(ap,this,i),Sn(lp,this,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return An(op,this).size>0}async render(t){const{annotations:e}=t,n=this.div;Ji(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Pd,annotationStorage:t.annotationStorage||new Ko,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const t=a.annotationType===Kn.POPUP;if(t){const t=i.get(a.id);if(!t)continue;r.elements=t}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const e=Ld.create(r);if(!e.isRenderable)continue;if(!t&&a.popupRef){const t=i.get(a.popupRef);t?t.push(e):i.set(a.popupRef,[e])}const n=e.render();var s;if(a.hidden&&(n.style.visibility="hidden"),await xn(cp,this,hp).call(this,n,a.id,r.elements),e._isEditable)An(op,this).set(e.data.id,e),null===(s=this._annotationEditorUIManager)||void 0===s||s.renderAnnotationElement(e)}xn(cp,this,dp).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new Pd,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=up._defaultBorderStyle),n.data=i;const t=Ld.create(n);if(!t.isRenderable)continue;const e=t.render();await xn(cp,this,hp).call(this,e,i.id,null)}}update(t){let{viewport:e}=t;const n=this.div;this.viewport=e,Ji(n,{rotation:e.rotation}),xn(cp,this,dp).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(An(op,this).values())}getEditableAnnotation(t){return An(op,this).get(t)}static get _defaultBorderStyle(){return gi(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Yn,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function hp(t,e,n){var i;const r=t.firstChild||t,s=r.id="".concat(Di).concat(e),a=await(null===(i=An(lp,this))||void 0===i?void 0:i.getAriaAttributes(s));if(a)for(const[l,c]of a)r.setAttribute(l,c);var o;n?n.at(-1).container.after(t):(this.div.append(t),null===(o=An(sp,this))||void 0===o||o.moveElementInDOM(this.div,t,r,!1))}function dp(){if(!An(ap,this))return;const t=this.div;for(const[n,i]of An(ap,this)){const r=t.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=An(op,this).get(n);var e;if(a)if(a._hasNoCanvas)null===(e=this._annotationEditorUIManager)||void 0===e||e.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1;else a.canvas=i}An(ap,this).clear()}const fp=/\r\n?|\n/g;var pp=new WeakMap,gp=new WeakMap,mp=new WeakMap,vp=new WeakMap,bp=new WeakMap,yp=new WeakSet;class wp extends bo{static get _keyboardManager(){const t=wp.prototype,e=t=>t.isEmpty(),n=Is.TRANSLATE_SMALL,i=Is.TRANSLATE_BIG;return gi(this,"_keyboardManager",new Wr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}constructor(t){super(p(p({},t),{},{name:"freeTextEditor"})),wn(this,yp),_n(this,pp,void 0),_n(this,gp,""),_n(this,mp,"".concat(this.id,"-editor")),_n(this,vp,null),_n(this,bp,void 0),d(this,"_colorPicker",null),Sn(pp,this,t.color||wp._defaultColor||bo._defaultLineColor),Sn(bp,this,t.fontSize||wp._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){bo.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case zn.FREETEXT_SIZE:wp._defaultFontSize=e;break;case zn.FREETEXT_COLOR:wp._defaultColor=e}}updateParams(t,e){switch(t){case zn.FREETEXT_SIZE:xn(yp,this,_p).call(this,e);break;case zn.FREETEXT_COLOR:xn(yp,this,xp).call(this,e)}}static get defaultPropertiesToUpdate(){return[[zn.FREETEXT_SIZE,wp._defaultFontSize],[zn.FREETEXT_COLOR,wp._defaultColor||bo._defaultLineColor]]}get propertiesToUpdate(){return[[zn.FREETEXT_SIZE,An(bp,this)],[zn.FREETEXT_COLOR,An(pp,this)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ad(this)),[["colorPicker",this._colorPicker]]}get colorType(){return zn.FREETEXT_COLOR}get colorValue(){return An(pp,this)}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-wp._internalPadding*t,-(wp._internalPadding+An(bp,this))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Sn(vp,this,new AbortController);const t=this._uiManager.combinedSignal(An(vp,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",An(mp,this)),this._isDraggable=!0,null===(t=An(vp,this))||void 0===t||t.abort(),Sn(vp,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var e;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=An(gp,this),e=Sn(gp,this,xn(yp,this,kp).call(this).trimEnd());if(t===e)return;const n=t=>{Sn(gp,this,t),t?(xn(yp,this,Ep).call(this),this._uiManager.rebuild(this),xn(yp,this,Ap).call(this)):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),xn(yp,this,Ap).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){wp._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",An(mp,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(An(bp,this),"px * var(--total-scale-factor))"),n.color=An(pp,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=t+(r[0]-c)/o,d=e+this.height-(r[1]-u)/l;break;case 90:h=t+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[a,-s];break;case 180:h=t-this.width+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[-s,-a];break;case 270:h=t+(r[0]-c-this.height*l)/o,d=e+(r[1]-u-this.width*o)/l,[s,a]=[-a,s]}this.setAt(h*n,d*i,s,a)}else this._moveAfterPaste(t,e);xn(yp,this,Ep).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(1===n.length&&"text/plain"===n[0])return;t.preventDefault();const i=Mp.call(wp,e.getData("text")||"").replaceAll(fp,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(fp,"")),t!==this.editorDiv){let e=l;for(const n of this.editorDiv.childNodes)n!==t?e.push(Sp.call(wp,n)):e=c}l.push(a.nodeValue.slice(0,o).replaceAll(fp,""))}else if(a===this.editorDiv){let t=l,e=0;for(const n of this.editorDiv.childNodes)e++===o&&(t=c),t.push(Sp.call(wp,n))}Sn(gp,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),xn(yp,this,Ep).call(this);const u=new Range;let h=Math.sumPrecise(l.map(t=>t.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const t=d.nodeValue.length;if(h<=t){u.setStart(d,h),u.setEnd(d,h);break}h-=t}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let i=null;if(t instanceof Lf){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:r,rotation:s,id:a,popupRef:o,contentsObj:l},textContent:c,textPosition:u,parent:{page:{pageNumber:h}}}=t;if(!c||0===c.length)return null;i=t={annotationType:Wn.FREETEXT,color:Array.from(n),fontSize:e,value:c.join("\n"),position:u,pageIndex:h-1,rect:r.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===l||void 0===l?void 0:l.str)||null}}const r=await super.deserialize(t,e,n);return Sn(bp,r,t.fontSize),Sn(pp,r,Ci.makeHexColor(...t.color)),Sn(gp,r,Mp.call(wp,t.value)),r._initialData=i,t.comment&&r.setCommentData(t.comment),r}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=wp._internalPadding*this.parentScale,n=this.getRect(e,e),i=bo._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:An(pp,this)),r={annotationType:Wn.FREETEXT,color:i,fontSize:An(bp,this),value:xn(yp,this,Cp).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!xn(yp,this,Tp).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t),{style:n}=e;n.fontSize="calc(".concat(An(bp,this),"px * var(--total-scale-factor))"),n.color=An(pp,this),e.replaceChildren();for(const s of An(gp,this).split("\n")){const t=document.createElement("div");t.append(s?document.createTextNode(s):document.createElement("br")),e.append(t)}const i=wp._internalPadding*this.parentScale,r={rect:this.getRect(i,i)};return r.popup=this.hasEditedComment?this.comment:{text:An(gp,this)},t.updateEdited(r),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}function _p(t){const e=t=>{this.editorDiv.style.fontSize="calc(".concat(t,"px * var(--total-scale-factor))"),this.translate(0,-(t-An(bp,this))*this.parentScale),Sn(bp,this,t),xn(yp,this,Ap).call(this)},n=An(bp,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function xp(t){const e=t=>{var e;Sn(pp,this,this.editorDiv.style.color=t),null===(e=this._colorPicker)||void 0===e||e.update(t)},n=An(pp,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function kp(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=e)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(t.push(Sp.call(dn,i)),e=i)}return t.join("\n")}function Ap(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display,r=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i,e.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}function Sp(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(fp,"")}function Ep(){if(this.editorDiv.replaceChildren(),An(gp,this))for(const t of An(gp,this).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}function Cp(){return An(gp,this).replaceAll("\xa0"," ")}function Mp(t){return t.replaceAll(" ","\xa0")}function Tp(t){const{value:e,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((t,e)=>t!==i[e])||t.pageIndex!==r}dn=wp,d(wp,"_freeTextDefaultContent",""),d(wp,"_internalPadding",0),d(wp,"_defaultColor",null),d(wp,"_defaultFontSize",10),d(wp,"_type","freetext"),d(wp,"_editorType",Wn.FREETEXT);class Pp{toSVGPath(){hi("Abstract method `toSVGPath` must be implemented.")}get box(){hi("Abstract getter `box` must be implemented.")}serialize(t,e){hi("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a]*i,s[a+1]=n+t[a+1]*r;return s}static _rescaleAndSwap(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a+1]*i,s[a+1]=n+t[a]*r;return s}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,s=t.length;r<s;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,s){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}d(Pp,"PRECISION",1e-4);var Rp=new WeakMap,Np=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,Ip=new WeakMap,Op=new WeakMap,Fp=new WeakMap,jp=new WeakMap,Wp=new WeakMap,zp=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Hp=new WeakMap,Vp=new WeakSet;class Gp{constructor(t,e,n,i,r){let{x:s,y:a}=t,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;wn(this,Vp),_n(this,Rp,void 0),_n(this,Np,[]),_n(this,Dp,void 0),_n(this,Lp,void 0),_n(this,Ip,[]),_n(this,Op,new Float32Array(18)),_n(this,Fp,void 0),_n(this,jp,void 0),_n(this,Wp,void 0),_n(this,zp,void 0),_n(this,Bp,void 0),_n(this,Up,void 0),_n(this,Hp,[]),Sn(Rp,this,e),Sn(Up,this,i*n),Sn(Lp,this,r),An(Op,this).set([NaN,NaN,NaN,NaN,s,a],6),Sn(Dp,this,o),Sn(zp,this,Zp._*n),Sn(Wp,this,tg._*n),Sn(Bp,this,n),An(Hp,this).push(s,a)}isEmpty(){return isNaN(An(Op,this)[8])}add(t){var e;let{x:n,y:i}=t;Sn(Fp,this,n),Sn(jp,this,i);const[r,s,a,o]=An(Rp,this);let[l,c,u,h]=An(Op,this).subarray(8,12);const d=n-u,f=i-h,p=Math.hypot(d,f);if(p<An(Wp,this))return!1;const g=p-An(zp,this),m=g/p,v=m*d,b=m*f;let y=l,w=c;l=u,c=h,u+=v,h+=b,null===(e=An(Hp,this))||void 0===e||e.push(n,i);const _=v/g,x=-b/g*An(Up,this),k=_*An(Up,this);if(An(Op,this).set(An(Op,this).subarray(2,8),0),An(Op,this).set([u+x,h+k],4),An(Op,this).set(An(Op,this).subarray(14,18),12),An(Op,this).set([u-x,h-k],16),isNaN(An(Op,this)[6]))return 0===An(Ip,this).length&&(An(Op,this).set([l+x,c+k],2),An(Ip,this).push(NaN,NaN,NaN,NaN,(l+x-r)/a,(c+k-s)/o),An(Op,this).set([l-x,c-k],14),An(Np,this).push(NaN,NaN,NaN,NaN,(l-x-r)/a,(c-k-s)/o)),An(Op,this).set([y,w,l,c,u,h],6),!this.isEmpty();An(Op,this).set([y,w,l,c,u,h],6);return Math.abs(Math.atan2(w-c,y-l)-Math.atan2(b,v))<Math.PI/2?([l,c,u,h]=An(Op,this).subarray(2,6),An(Ip,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/a,((c+h)/2-s)/o),[l,c,y,w]=An(Op,this).subarray(14,18),An(Np,this).push(NaN,NaN,NaN,NaN,((y+l)/2-r)/a,((w+c)/2-s)/o),!0):([y,w,l,c,u,h]=An(Op,this).subarray(0,6),An(Ip,this).push(((y+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),[u,h,l,c,y,w]=An(Op,this).subarray(12,18),An(Np,this).push(((y+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const t=An(Ip,this),e=An(Np,this);if(isNaN(An(Op,this)[6])&&!this.isEmpty())return xn(Vp,this,Xp).call(this);const n=[];n.push("M".concat(t[4]," ").concat(t[5]));for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));xn(Vp,this,Yp).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));return xn(Vp,this,Kp).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,s){return new cg(t,e,n,i,r,s)}getOutlines(){var t,e;const n=An(Ip,this),i=An(Np,this),r=An(Op,this),[s,a,o,l]=An(Rp,this),c=new Float32Array((null!==(t=null===(e=An(Hp,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2);for(let d=0,f=c.length-2;d<f;d+=2)c[d]=(An(Hp,this)[d]-s)/o,c[d+1]=(An(Hp,this)[d+1]-a)/l;if(c[c.length-2]=(An(Fp,this)-s)/o,c[c.length-1]=(An(jp,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return xn(Vp,this,Qp).call(this,c);const u=new Float32Array(An(Ip,this).length+24+An(Np,this).length);let h=n.length;for(let d=0;d<h;d+=2)isNaN(n[d])?u[d]=u[d+1]=NaN:(u[d]=n[d],u[d+1]=n[d+1]);h=xn(Vp,this,Jp).call(this,u,h);for(let d=i.length-6;d>=6;d-=6)for(let t=0;t<6;t+=2)isNaN(i[d+t])?(u[h]=u[h+1]=NaN,h+=2):(u[h]=i[d+t],u[h+1]=i[d+t+1],h+=2);return xn(Vp,this,$p).call(this,u,h),this.newFreeDrawOutline(u,c,An(Rp,this),An(Bp,this),An(Dp,this),An(Lp,this))}}function qp(){const t=An(Op,this).subarray(4,6),e=An(Op,this).subarray(16,18),[n,i,r,s]=An(Rp,this);return[(An(Fp,this)+(t[0]-e[0])/2-n)/r,(An(jp,this)+(t[1]-e[1])/2-i)/s,(An(Fp,this)+(e[0]-t[0])/2-n)/r,(An(jp,this)+(e[1]-t[1])/2-i)/s]}function Xp(){const[t,e,n,i]=An(Rp,this),[r,s,a,o]=xn(Vp,this,qp).call(this);return"M".concat((An(Op,this)[2]-t)/n," ").concat((An(Op,this)[3]-e)/i," L").concat((An(Op,this)[4]-t)/n," ").concat((An(Op,this)[5]-e)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((An(Op,this)[16]-t)/n," ").concat((An(Op,this)[17]-e)/i," L").concat((An(Op,this)[14]-t)/n," ").concat((An(Op,this)[15]-e)/i," Z")}function Kp(t){const e=An(Np,this);t.push("L".concat(e[4]," ").concat(e[5]," Z"))}function Yp(t){const[e,n,i,r]=An(Rp,this),s=An(Op,this).subarray(4,6),a=An(Op,this).subarray(16,18),[o,l,c,u]=xn(Vp,this,qp).call(this);t.push("L".concat((s[0]-e)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(u," L").concat((a[0]-e)/i," ").concat((a[1]-n)/r))}function Qp(t){const e=An(Op,this),[n,i,r,s]=An(Rp,this),[a,o,l,c]=xn(Vp,this,qp).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/s,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/s,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/s],0),this.newFreeDrawOutline(u,t,An(Rp,this),An(Bp,this),An(Dp,this),An(Lp,this))}function $p(t,e){const n=An(Np,this);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6}function Jp(t,e){const n=An(Op,this).subarray(4,6),i=An(Op,this).subarray(16,18),[r,s,a,o]=An(Rp,this),[l,c,u,h]=xn(Vp,this,qp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],e),e+24}var Zp={_:8},tg={_:Zp._+2},eg=new WeakMap,ng=new WeakMap,ig=new WeakMap,rg=new WeakMap,sg=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakSet;class cg extends Pp{constructor(t,e,n,i,r,s){super(),wn(this,lg),_n(this,eg,void 0),_n(this,ng,new Float32Array(4)),_n(this,ig,void 0),_n(this,rg,void 0),_n(this,sg,void 0),_n(this,ag,void 0),_n(this,og,void 0),Sn(og,this,t),Sn(sg,this,e),Sn(eg,this,n),Sn(ag,this,i),Sn(ig,this,r),Sn(rg,this,s),this.lastPoint=[NaN,NaN],xn(lg,this,ug).call(this,s);const[a,o,l,c]=An(ng,this);for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/c;for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/c}toSVGPath(){const t=["M".concat(An(og,this)[4]," ").concat(An(og,this)[5])];for(let e=6,n=An(og,this).length;e<n;e+=6)isNaN(An(og,this)[e])?t.push("L".concat(An(og,this)[e+4]," ").concat(An(og,this)[e+5])):t.push("C".concat(An(og,this)[e]," ").concat(An(og,this)[e+1]," ").concat(An(og,this)[e+2]," ").concat(An(og,this)[e+3]," ").concat(An(og,this)[e+4]," ").concat(An(og,this)[e+5]));return t.push("Z"),t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=r-n,o=s-i;let l,c;switch(e){case 0:l=Pp._rescale(An(og,this),n,s,a,-o),c=Pp._rescale(An(sg,this),n,s,a,-o);break;case 90:l=Pp._rescaleAndSwap(An(og,this),n,i,a,o),c=Pp._rescaleAndSwap(An(sg,this),n,i,a,o);break;case 180:l=Pp._rescale(An(og,this),r,i,-a,o),c=Pp._rescale(An(sg,this),r,i,-a,o);break;case 270:l=Pp._rescaleAndSwap(An(og,this),r,s,-a,-o),c=Pp._rescaleAndSwap(An(sg,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return An(ng,this)}newOutliner(t,e,n,i,r){return new Gp(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(t,e){const[n,i,r,s]=An(ng,this),[a,o,l,c]=An(eg,this),u=r*l,h=s*c,d=n*l+a,f=i*c+o,p=this.newOutliner({x:An(sg,this)[0]*u+d,y:An(sg,this)[1]*h+f},An(eg,this),An(ag,this),t,An(rg,this),null!==e&&void 0!==e?e:An(ig,this));for(let g=2;g<An(sg,this).length;g+=2)p.add({x:An(sg,this)[g]*u+d,y:An(sg,this)[g+1]*h+f});return p.getOutlines()}}function ug(t){const e=An(og,this);let n=e[4],i=e[5];const r=[n,i,n,i];let s=n,a=i;const o=t?Math.max:Math.min;for(let c=6,u=e.length;c<u;c+=6){const t=e[c+4],l=e[c+5];if(isNaN(e[c]))Ci.pointBoundingBox(t,l,r),a<l?(s=t,a=l):a===l&&(s=o(s,t));else{const t=[1/0,1/0,-1/0,-1/0];Ci.bezierBoundingBox(n,i,...e.slice(c,c+6),t),Ci.rectBoundingBox(...t,r),a<t[3]?(s=t[2],a=t[3]):a===t[3]&&(s=o(s,t[2]))}n=t,i=l}const l=An(ng,this);l[0]=r[0]-An(ig,this),l[1]=r[1]-An(ig,this),l[2]=r[2]-r[0]+2*An(ig,this),l[3]=r[3]-r[1]+2*An(ig,this),this.lastPoint=[s,a]}var hg=new WeakMap,dg=new WeakMap,fg=new WeakMap,pg=new WeakMap,gg=new WeakSet;class mg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];wn(this,gg),_n(this,hg,void 0),_n(this,dg,void 0),_n(this,fg,[]),_n(this,pg,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:d,y:f,width:p,height:g}of t){const t=Math.floor((d-e)/s)*s,n=Math.ceil((d+p+e)/s)*s,i=Math.floor((f-e)/s)*s,a=Math.ceil((f+g+e)/s)*s,o=[t,i,a,!0],l=[n,i,a,!1];An(fg,this).push(o,l),Ci.rectBoundingBox(t,i,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n,u=An(fg,this).at(i?-1:-2),h=[u[0],u[2]];for(const d of An(fg,this)){const[t,e,n]=d;d[0]=(t-l)/a,d[1]=(e-c)/o,d[2]=(n-c)/o}Sn(hg,this,new Float32Array([l,c,a,o])),Sn(dg,this,h)}getOutlines(){An(fg,this).sort((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]);const t=[];for(const e of An(fg,this))e[3]?(t.push(...xn(gg,this,_g).call(this,e)),xn(gg,this,yg).call(this,e)):(xn(gg,this,wg).call(this,e),t.push(...xn(gg,this,_g).call(this,e)));return xn(gg,this,vg).call(this,t)}}function vg(t){const e=[],n=new Set;for(const s of t){const[t,n,i]=s;e.push([t,n,s],[t,i,s])}e.sort((t,e)=>t[1]-e[1]||t[0]-e[0]);for(let s=0,a=e.length;s<a;s+=2){const t=e[s][2],i=e[s+1][2];t.push(i),i.push(t),n.add(t),n.add(i)}const i=[];let r;for(;n.size>0;){const t=n.values().next().value;let[e,s,a,o,l]=t;n.delete(t);let c=e,u=s;for(r=[e,a],i.push(r);;){let t;if(n.has(o))t=o;else{if(!n.has(l))break;t=l}n.delete(t),[e,s,a,o,l]=t,c!==e&&(r.push(c,u,e,u===s?s:a),c=e),u=u===s?a:s}r.push(c,u)}return new Ag(i,An(hg,this),An(dg,this))}function bg(t){const e=An(pg,this);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,s=e[r][0];if(s===t)return r;s<t?n=r+1:i=r-1}return i+1}function yg(t){let[,e,n]=t;const i=xn(gg,this,bg).call(this,e);An(pg,this).splice(i,0,[e,n])}function wg(t){let[,e,n]=t;const i=xn(gg,this,bg).call(this,e);for(let r=i;r<An(pg,this).length;r++){const[t,i]=An(pg,this)[r];if(t!==e)break;if(t===e&&i===n)return void An(pg,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[t,i]=An(pg,this)[r];if(t!==e)break;if(t===e&&i===n)return void An(pg,this).splice(r,1)}}function _g(t){const[e,n,i]=t,r=[[e,n,i]],s=xn(gg,this,bg).call(this,i);for(let a=0;a<s;a++){const[t,n]=An(pg,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=t))if(a>=t)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=t,o>n&&r.push([e,n,o])}}return r}var xg=new WeakMap,kg=new WeakMap;class Ag extends Pp{constructor(t,e,n){super(),_n(this,xg,void 0),_n(this,kg,void 0),Sn(kg,this,t),Sn(xg,this,e),this.lastPoint=n}toSVGPath(){const t=[];for(const e of An(kg,this)){let[n,i]=e;t.push("M".concat(n," ").concat(i));for(let r=2;r<e.length;r+=2){const s=e[r],a=e[r+1];s===n?(t.push("V".concat(a)),i=a):a===i&&(t.push("H".concat(s)),n=s)}t.push("Z")}return t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=r-n,l=s-i;for(const c of An(kg,this)){const t=new Array(c.length);for(let e=0;e<c.length;e+=2)t[e]=n+c[e]*o,t[e+1]=s-c[e+1]*l;a.push(t)}return a}get box(){return An(xg,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Sg extends Gp{newFreeDrawOutline(t,e,n,i,r,s){return new Eg(t,e,n,i,r,s)}}class Eg extends cg{newOutliner(t,e,n,i,r){return new Sg(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Cg=new WeakMap,Mg=new WeakMap,Tg=new WeakMap,Pg=new WeakMap,Rg=new WeakMap,Ng=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,Ig=new WeakMap,Og=new WeakMap,Fg=new WeakMap,jg=new WeakMap,Wg=new WeakMap,zg=new WeakMap,Bg=new WeakMap,Ug=new WeakMap,Hg=new WeakMap,Vg=new WeakMap,Gg=new WeakSet;class qg extends bo{static get _keyboardManager(){const t=qg.prototype;return gi(this,"_keyboardManager",new Wr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(p(p({},t),{},{name:"highlightEditor"})),wn(this,Gg),_n(this,Cg,null),_n(this,Mg,0),_n(this,Tg,void 0),_n(this,Pg,null),_n(this,Rg,null),_n(this,Ng,null),_n(this,Dg,null),_n(this,Lg,0),_n(this,Ig,null),_n(this,Og,null),_n(this,Fg,null),_n(this,jg,!1),_n(this,Wg,null),_n(this,zg,void 0),_n(this,Bg,null),_n(this,Ug,""),_n(this,Hg,void 0),_n(this,Vg,""),this.color=t.color||qg._defaultColor,Sn(Hg,this,t.thickness||qg._defaultThickness),Sn(zg,this,t.opacity||qg._defaultOpacity),Sn(Tg,this,t.boxes||null),Sn(Vg,this,t.methodOfCreation||""),Sn(Ug,this,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(Sn(jg,this,!0),xn(Gg,this,Kg).call(this,t),xn(Gg,this,Zg).call(this)):An(Tg,this)&&(Sn(Cg,this,t.anchorNode),Sn(Mg,this,t.anchorOffset),Sn(Dg,this,t.focusNode),Sn(Lg,this,t.focusOffset),xn(Gg,this,Xg).call(this),xn(Gg,this,Zg).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:An(jg,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:An(Hg,this),methodOfCreation:An(Vg,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;bo.initialize(t,e),qg._defaultColor||(qg._defaultColor=(null===(n=e.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case zn.HIGHLIGHT_COLOR:qg._defaultColor=e;break;case zn.HIGHLIGHT_THICKNESS:qg._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return An(Wg,this)}updateParams(t,e){switch(t){case zn.HIGHLIGHT_COLOR:xn(Gg,this,Yg).call(this,e);break;case zn.HIGHLIGHT_THICKNESS:xn(Gg,this,Qg).call(this,e)}}static get defaultPropertiesToUpdate(){return[[zn.HIGHLIGHT_COLOR,qg._defaultColor],[zn.HIGHLIGHT_THICKNESS,qg._defaultThickness]]}get propertiesToUpdate(){return[[zn.HIGHLIGHT_COLOR,this.color||qg._defaultColor],[zn.HIGHLIGHT_THICKNESS,An(Hg,this)||qg._defaultThickness],[zn.HIGHLIGHT_FREE,An(jg,this)]]}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",Sn(Rg,this,new fd({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(xn(Gg,this,im).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,xn(Gg,this,im).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){xn(Gg,this,Jg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(xn(Gg,this,Zg).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)xn(Gg,this,Jg).call(this);else if(t){var n;xn(Gg,this,Zg).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(t){const{drawLayer:e}=this.parent;let n;An(jg,this)?(t=(t-this.rotation+360)%360,n=tm.call(qg,An(Og,this).box,t)):n=tm.call(qg,[this.x,this.y,this.width,this.height],t),e.updateProperties(An(Fg,this),{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(An(Bg,this),{bbox:tm.call(qg,An(Ng,this).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();An(Ug,this)&&(t.setAttribute("aria-label",An(Ug,this)),t.setAttribute("role","mark")),An(jg,this)?t.classList.add("free"):this.div.addEventListener("keydown",xn(Gg,this,em).bind(this),{signal:this._uiManager._signal});const e=Sn(Ig,this,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=An(Pg,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Ar(this,An(Ig,this),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(An(Bg,this),{rootClass:{hovered:!0}}))}pointerleave(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(An(Bg,this),{rootClass:{hovered:!1}}))}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:xn(Gg,this,nm).call(this,!0);break;case 1:case 3:xn(Gg,this,nm).call(this,!1)}}select(){var t;super.select(),An(Bg,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(An(Bg,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),An(Bg,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(An(Bg,this),{rootClass:{selected:!1}}),An(jg,this)||xn(Gg,this,nm).call(this,!1))}get _mustFixPosition(){return!An(jg,this)}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(An(Fg,this),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(An(Bg,this),{rootClass:{hidden:!t}}))}static startHighlighting(t,e,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=e=>{u.abort(),xn(qg,this,om).call(this,t,e)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",qi,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Gi,{signal:h}),i.addEventListener("pointermove",xn(qg,this,am).bind(this,t),{signal:h}),this._freeHighlight=new Sg({x:r,y:s},[a,o,l,c],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(t,e,n){let i=null;if(t instanceof Qf){const{data:{quadPoints:e,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l,contentsObj:c},parent:{page:{pageNumber:u}}}=t;i=t={annotationType:Wn.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null===c||void 0===c?void 0:c.str)||null}}else if(t instanceof Kf){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,contentsObj:c},parent:{page:{pageNumber:u}}}=t;i=t={annotationType:Wn.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null===c||void 0===c?void 0:c.str)||null}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=t,l=await super.deserialize(t,e,n);l.color=Ci.makeHexColor(...r),Sn(zg,l,o||1),a&&Sn(Hg,l,t.thickness),l._initialData=i,t.comment&&l.setCommentData(t.comment);const[c,u]=l.pageDimensions,[h,d]=l.pageTranslation;if(s){const t=Sn(Tg,l,[]);for(let e=0;e<s.length;e+=8)t.push({x:(s[e]-h)/c,y:1-(s[e+1]-d)/u,width:(s[e+2]-s[e])/c,height:(s[e+1]-s[e+5])/u});xn(Gg,l,Xg).call(l),xn(Gg,l,Zg).call(l),l.rotate(l.rotation)}else if(a){Sn(jg,l,!0);const t=a[0],n={x:t[0]-h,y:u-(t[1]-d)},i=new Sg(n,[0,0,c,u],1,An(Hg,l)/2,!0,.001);for(let e=0,a=t.length;e<a;e+=2)n.x=t[e]-h,n.y=u-(t[e+1]-d),i.add(n);const{id:r,clipPathId:s}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);xn(Gg,l,Kg).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),xn(Gg,l,Zg).call(l),l.rotate(l.parentRotation)}return l}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=bo._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:Wn.HIGHLIGHT,color:n,opacity:An(zg,this),thickness:An(Hg,this),quadPoints:xn(Gg,this,rm).call(this),outlines:xn(Gg,this,sm).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:xn(Gg,this,im).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!xn(Gg,this,lm).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}function Xg(){const t=new mg(An(Tg,this),.001);Sn(Og,this,t.getOutlines()),[this.x,this.y,this.width,this.height]=An(Og,this).box;const e=new mg(An(Tg,this),.0025,.001,"ltr"===this._uiManager.direction);Sn(Ng,this,e.getOutlines());const{lastPoint:n}=An(Ng,this);Sn(Wg,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function Kg(t){let{highlightOutlines:e,highlightId:n,clipPathId:i}=t;Sn(Og,this,e);if(Sn(Ng,this,e.getNewOutline(An(Hg,this)/2+1.5,.0025)),n>=0)Sn(Fg,this,n),Sn(Pg,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),Sn(Bg,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:An(Ng,this).box,path:{d:An(Ng,this).toSVGPath()}},!0));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(An(Fg,this),{bbox:tm.call(fn,An(Og,this).box,(t-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(An(Bg,this),{bbox:tm.call(fn,An(Ng,this).box,t),path:{d:An(Ng,this).toSVGPath()}})}const[r,s,a,o]=e.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*e/t,this.height=o*t/e;break}}const{lastPoint:l}=An(Ng,this);Sn(Wg,this,[(l[0]-r)/a,(l[1]-s)/o])}function Yg(t){const e=(t,e)=>{var n,i;this.color=t,Sn(zg,this,e),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(An(Fg,this),{root:{fill:t,"fill-opacity":e}}),null===(i=An(Rg,this))||void 0===i||i.updateColor(t)},n=this.color,i=An(zg,this);this.addCommands({cmd:e.bind(this,t,fn._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}function Qg(t){const e=An(Hg,this),n=t=>{Sn(Hg,this,t),xn(Gg,this,$g).call(this,t)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function $g(t){if(!An(jg,this))return;xn(Gg,this,Kg).call(this,{highlightOutlines:An(Og,this).getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}function Jg(){null!==An(Fg,this)&&this.parent&&(this.parent.drawLayer.remove(An(Fg,this)),Sn(Fg,this,null),this.parent.drawLayer.remove(An(Bg,this)),Sn(Bg,this,null))}function Zg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===An(Fg,this)&&(({id:bn(Sn,[Fg,this])._,clipPathId:bn(Sn,[Pg,this])._}=t.drawLayer.draw({bbox:An(Og,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":An(zg,this)},rootClass:{highlight:!0,free:An(jg,this)},path:{d:An(Og,this).toSVGPath()}},!1,!0)),Sn(Bg,this,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:An(jg,this)},bbox:An(Ng,this).box,path:{d:An(Ng,this).toSVGPath()}},An(jg,this))),An(Ig,this)&&(An(Ig,this).style.clipPath=An(Pg,this)))}function tm(t,e){let[n,i,r,s]=t;switch(e){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function em(t){fn._keyboardManager.exec(this,t)}function nm(t){if(!An(Cg,this))return;const e=window.getSelection();t?e.setPosition(An(Cg,this),An(Mg,this)):e.setPosition(An(Dg,this),An(Lg,this))}function im(){return An(jg,this)?this.rotation:0}function rm(){if(An(jg,this))return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,r=An(Tg,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:u}of r){const r=o*t+n,h=(1-l)*e+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=h,s[a+2]=s[a+6]=r+c*t,s[a+5]=s[a+7]=h-u*e,a+=8}return s}function sm(t){return An(Og,this).serialize(t,xn(Gg,this,im).call(this))}function am(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function om(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function lm(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((t,n)=>t!==e[n])}fn=qg,d(qg,"_defaultColor",null),d(qg,"_defaultOpacity",1),d(qg,"_defaultThickness",12),d(qg,"_type","highlight"),d(qg,"_editorType",Wn.HIGHLIGHT),d(qg,"_freeHighlightId",-1),d(qg,"_freeHighlight",null),d(qg,"_freeHighlightClipId","");var cm=new WeakMap;class um{constructor(){_n(this,cm,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){An(cm,this)[t]=e}toSVGProperties(){const t=An(cm,this);return Sn(cm,this,Object.create(null)),{root:t}}reset(){Sn(cm,this,Object.create(null))}updateAll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(t)}clone(){hi("Not implemented")}}var hm=new WeakMap,dm=new WeakMap,fm=new WeakSet;class pm extends bo{constructor(t){super(t),wn(this,fm),_n(this,hm,null),_n(this,dm,void 0),d(this,"_colorPicker",null),d(this,"_drawId",null),Sn(dm,this,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(xn(fm,this,gm).call(this,t),xn(fm,this,bm).call(this))}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))n.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){hi("Not implemented")}static get typesMap(){hi("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(km._.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,r=i[e],s=n=>{var r;i.updateProperty(e,n);const s=An(hm,this).updateProperty(e,n);var a;(s&&xn(fm,this,_m).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType)&&(null===(a=this._colorPicker)||void 0===a||a.update(n))};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pm._mergeSVGProperties(An(hm,this).getPathResizingSVGProperties(xn(fm,this,wm).call(this)),{bbox:xn(fm,this,xm).call(this)}))}_onResized(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pm._mergeSVGProperties(An(hm,this).getPathResizedSVGProperties(xn(fm,this,wm).call(this)),{bbox:xn(fm,this,xm).call(this)}))}_onTranslating(t,e){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:xn(fm,this,xm).call(this)})}_onTranslated(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pm._mergeSVGProperties(An(hm,this).getPathTranslatedSVGProperties(xn(fm,this,wm).call(this),this.parentDimensions),{bbox:xn(fm,this,xm).call(this)}))}_onStartDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,An(dm,this)&&(Sn(dm,this,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){xn(fm,this,vm).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(xn(fm,this,bm).call(this),xn(fm,this,_m).call(this,An(hm,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)this._uiManager.removeShouldRescale(this),xn(fm,this,vm).call(this);else if(t){var n;this._uiManager.addShouldRescale(this),xn(fm,this,bm).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),e&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,pm._mergeSVGProperties({bbox:xn(fm,this,xm).call(this)},An(hm,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&xn(fm,this,_m).call(this,An(hm,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,r){hi("Not implemented")}static startDrawing(t,e,n,i){var r,s;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=i;if(Cm._&&Cm._!==u)return;const{viewport:{rotation:h}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=Am._=new AbortController,g=t.combinedSignal(p);Em._||(Em._=c),null!==(r=Cm._)&&void 0!==r||(Cm._=u),window.addEventListener("pointerup",t=>{var e;Em._===t.pointerId?this._endDraw(t):null===(e=Mm._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointercancel",t=>{var e;Em._===t.pointerId?this._currentParent.endDrawingSession():null===(e=Mm._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointerdown",t=>{Cm._===t.pointerType&&((Mm._||(Mm._=new Set)).add(t.pointerId),km._.isCancellable()&&(km._.removeLastElement(),km._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Gi,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",t=>{t.timeStamp===Tm._&&qi(t)},{signal:g}),t.toggleDrawing(),null===(s=e._editorUndoBar)||void 0===s||s.hide(),km._?t.drawLayer.updateProperties(this._currentDrawId,km._.startNew(o,l,d,f,h)):(e.updateUIForDefaultProperties(this),km._=this.createDrawerInstance(o,l,d,f,h),Sm._=this.getDefaultDrawingOptions(),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Sm._.toSVGProperties(),km._.defaultSVGProperties),!0,!1)))}static _drawMove(t){var e;if(Tm._=-1,!km._)return;const{offsetX:n,offsetY:i,pointerId:r}=t;Em._===r&&((null===(e=Mm._)||void 0===e?void 0:e.size)>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,km._.add(n,i)),Tm._=t.timeStamp,qi(t)))}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,km._=null,Sm._=null,Cm._=null,Tm._=NaN),Am._&&(Am._.abort(),Am._=null,Em._=NaN,Mm._=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),(null===t||void 0===t?void 0:t.target)===e.div&&e.drawLayer.updateProperties(this._currentDrawId,km._.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const t=km._,n=this._currentDrawId,i=t.getLastElement();return void e.addCommands({cmd:()=>{e.drawLayer.updateProperties(n,t.setLastElement(i))},undo:()=>{e.drawLayer.updateProperties(n,t.removeLastElement())},mustExec:!1,type:zn.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(zn.DRAW_STEP),!km._.isEmpty()){const{pageDimensions:[n,i],scale:r}=e,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:km._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:Sm._,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,r,s){hi("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=e.viewport,o=this.deserializeDraw(s,a,i,r,this._INNER_MARGIN,t),l=await super.deserialize(t,e,n);return l.createDrawingOptions(t),xn(fm,l,gm).call(l,{drawOutlines:o}),xn(fm,l,bm).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(t){const[e,n]=this.pageTranslation,[i,r]=this.pageDimensions;return An(hm,this).serialize([e,n,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function gm(t){let{drawOutlines:e,drawId:n,drawingOptions:i}=t;Sn(hm,this,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=xn(fm,this,mm).call(this,e,this.parent),xn(fm,this,_m).call(this,e.box)}function mm(t,e){const{id:n}=e.drawLayer.draw(pn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}function vm(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function bm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=xn(fm,this,mm).call(this,An(hm,this),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))}function ym(t){let[e,n,i,r]=t;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}function wm(){const{x:t,y:e,width:n,height:i,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-e,t,n*(r/s),i*(s/r)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(r/s),i*(s/r)];default:return[t,e,n,i]}}function _m(t){if([this.x,this.y,this.width,this.height]=xn(fm,this,ym).call(this,t),this.div){this.fixAndSetPosition();const[t,e]=this.parentDimensions;this.setDims(this.width*t,this.height*e)}this._onResized()}function xm(){const{x:t,y:e,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-e,t,n*(a/o),i*(o/a)];case 6:return[1-t-i*(o/a),1-e,i*(o/a),n*(a/o)];case 7:return[e-n*(a/o),1-t-i*(o/a),n*(a/o),i*(o/a)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(o/a),e,i*(o/a),n*(a/o)];case 13:return[1-e-n*(a/o),t-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-t,1-e-n*(a/o),i*(o/a),n*(a/o)];case 15:return[e,1-t,n*(a/o),i*(o/a)];default:return[t,e,n,i]}}pn=pm,d(pm,"_currentDrawId",-1),d(pm,"_currentParent",null);var km={_:null},Am={_:null},Sm={_:null},Em={_:NaN},Cm={_:null},Mm={_:null},Tm={_:NaN};d(pm,"_INNER_MARGIN",3);var Pm=new WeakMap,Rm=new WeakMap,Nm=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Im=new WeakMap,Om=new WeakMap,Fm=new WeakMap,jm=new WeakMap,Wm=new WeakMap,zm=new WeakMap,Bm=new WeakSet;class Um{constructor(t,e,n,i,r,s){wn(this,Bm),_n(this,Pm,new Float64Array(6)),_n(this,Rm,void 0),_n(this,Nm,void 0),_n(this,Dm,void 0),_n(this,Lm,void 0),_n(this,Im,void 0),_n(this,Om,""),_n(this,Fm,0),_n(this,jm,new tv),_n(this,Wm,void 0),_n(this,zm,void 0),Sn(Wm,this,n),Sn(zm,this,i),Sn(Dm,this,r),Sn(Lm,this,s),[t,e]=xn(Bm,this,Hm).call(this,t,e);const a=Sn(Rm,this,[NaN,NaN,NaN,NaN,t,e]);Sn(Im,this,[t,e]),Sn(Nm,this,[{line:a,points:An(Im,this)}]),An(Pm,this).set(a,0)}updateProperty(t,e){"stroke-width"===t&&Sn(Lm,this,e)}isEmpty(){return!An(Nm,this)||0===An(Nm,this).length}isCancellable(){return An(Im,this).length<=10}add(t,e){[t,e]=xn(Bm,this,Hm).call(this,t,e);const[n,i,r,s]=An(Pm,this).subarray(2,6),a=t-r,o=e-s;return Math.hypot(An(Wm,this)*a,An(zm,this)*o)<=2?null:(An(Im,this).push(t,e),isNaN(n)?(An(Pm,this).set([r,s,t,e],2),An(Rm,this).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(An(Pm,this)[0])&&An(Rm,this).splice(6,6),An(Pm,this).set([n,i,r,s,t,e],0),An(Rm,this).push(...Pp.createBezierPoints(n,i,r,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(2===An(Im,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){Sn(Wm,this,n),Sn(zm,this,i),Sn(Dm,this,r),[t,e]=xn(Bm,this,Hm).call(this,t,e);const s=Sn(Rm,this,[NaN,NaN,NaN,NaN,t,e]);Sn(Im,this,[t,e]);const a=An(Nm,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),An(Nm,this).push({line:s,points:An(Im,this)}),An(Pm,this).set(s,0),Sn(Fm,this,0),this.toSVGPath(),null}getLastElement(){return An(Nm,this).at(-1)}setLastElement(t){return An(Nm,this)?(An(Nm,this).push(t),Sn(Rm,this,t.line),Sn(Im,this,t.points),Sn(Fm,this,0),{path:{d:this.toSVGPath()}}):An(jm,this).setLastElement(t)}removeLastElement(){if(!An(Nm,this))return An(jm,this).removeLastElement();An(Nm,this).pop(),Sn(Om,this,"");for(let t=0,e=An(Nm,this).length;t<e;t++){const{line:e,points:n}=An(Nm,this)[t];Sn(Rm,this,e),Sn(Im,this,n),Sn(Fm,this,0),this.toSVGPath()}return{path:{d:An(Om,this)}}}toSVGPath(){const t=Pp.svgRound(An(Rm,this)[4]),e=Pp.svgRound(An(Rm,this)[5]);if(2===An(Im,this).length)return Sn(Om,this,"".concat(An(Om,this)," M ").concat(t," ").concat(e," Z")),An(Om,this);if(An(Im,this).length<=6){const n=An(Om,this).lastIndexOf("M");Sn(Om,this,"".concat(An(Om,this).slice(0,n)," M ").concat(t," ").concat(e)),Sn(Fm,this,6)}if(4===An(Im,this).length){const t=Pp.svgRound(An(Rm,this)[10]),e=Pp.svgRound(An(Rm,this)[11]);return Sn(Om,this,"".concat(An(Om,this)," L ").concat(t," ").concat(e)),Sn(Fm,this,12),An(Om,this)}const n=[];0===An(Fm,this)&&(n.push("M ".concat(t," ").concat(e)),Sn(Fm,this,6));for(let i=An(Fm,this),r=An(Rm,this).length;i<r;i+=6){const[t,e,r,s,a,o]=An(Rm,this).slice(i,i+6).map(Pp.svgRound);n.push("C".concat(t," ").concat(e," ").concat(r," ").concat(s," ").concat(a," ").concat(o))}return Sn(Om,this,An(Om,this)+n.join(" ")),Sn(Fm,this,An(Rm,this).length),An(Om,this)}getOutlines(t,e,n,i){const r=An(Nm,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),An(jm,this).build(An(Nm,this),t,e,n,An(Dm,this),An(Lm,this),i),Sn(Pm,this,null),Sn(Rm,this,null),Sn(Nm,this,null),Sn(Om,this,null),An(jm,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function Hm(t,e){return Pp._normalizePoint(t,e,An(Wm,this),An(zm,this),An(Dm,this))}var Vm=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Xm=new WeakMap,Km=new WeakMap,Ym=new WeakMap,Qm=new WeakMap,$m=new WeakMap,Jm=new WeakMap,Zm=new WeakSet;class tv extends Pp{constructor(){super(...arguments),wn(this,Zm),_n(this,Vm,void 0),_n(this,Gm,0),_n(this,qm,void 0),_n(this,Xm,void 0),_n(this,Km,void 0),_n(this,Ym,void 0),_n(this,Qm,void 0),_n(this,$m,void 0),_n(this,Jm,void 0)}build(t,e,n,i,r,s,a){Sn(Km,this,e),Sn(Ym,this,n),Sn(Qm,this,i),Sn($m,this,r),Sn(Jm,this,s),Sn(qm,this,null!==a&&void 0!==a?a:0),Sn(Xm,this,t),xn(Zm,this,iv).call(this)}get thickness(){return An(Jm,this)}setLastElement(t){return An(Xm,this).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return An(Xm,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of An(Xm,this))if(t.push("M".concat(Pp.svgRound(e[4])," ").concat(Pp.svgRound(e[5]))),6!==e.length)if(12===e.length&&isNaN(e[6]))t.push("L".concat(Pp.svgRound(e[10])," ").concat(Pp.svgRound(e[11])));else for(let n=6,i=e.length;n<i;n+=6){const[i,r,s,a,o,l]=e.subarray(n,n+6).map(Pp.svgRound);t.push("C".concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else t.push("Z");return t.join("")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=[],[l,c,u,h]=xn(Zm,this,nv).call(this);let d,f,p,g,m,v,b,y,w;switch(An($m,this)){case 0:w=Pp._rescale,d=n,f=i+s,p=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,b=n+(l+u)*r,y=i+(1-c)*s;break;case 90:w=Pp._rescaleAndSwap,d=n,f=i,p=r,g=s,m=n+c*r,v=i+l*s,b=n+(c+h)*r,y=i+(l+u)*s;break;case 180:w=Pp._rescale,d=n+r,f=i,p=-r,g=s,m=n+(1-l-u)*r,v=i+c*s,b=n+(1-l)*r,y=i+(c+h)*s;break;case 270:w=Pp._rescaleAndSwap,d=n+r,f=i+s,p=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-u)*s,b=n+(1-c)*r,y=i+(1-l)*s}for(const{line:_,points:x}of An(Xm,this))a.push(w(_,d,f,p,g,e?new Array(_.length):null)),o.push(w(x,d,f,p,g,e?new Array(x.length):null));return{lines:a,points:o,rect:[m,v,b,y]}}static deserialize(t,e,n,i,r,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const u=[];let h,d,f,p,g;switch(l){case 0:g=Pp._rescale,h=-t/n,d=e/i+1,f=1/n,p=-1/i;break;case 90:g=Pp._rescaleAndSwap,h=-e/i,d=-t/n,f=1/i,p=1/n;break;case 180:g=Pp._rescale,h=t/n+1,d=-e/i,f=-1/n,p=1/i;break;case 270:g=Pp._rescaleAndSwap,h=e/i+1,d=t/n+1,f=-1/i,p=-1/n}if(!a){a=[];for(const t of o){const e=t.length;if(2===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const n=new Float32Array(3*(e-2));a.push(n);let[i,r,s,o]=t.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let a=4;a<e;a+=2){const e=t[a],l=t[a+1];n.set(Pp.createBezierPoints(i,r,s,o,e,l),3*(a-2)),[i,r,s,o]=[s,o,e,l]}}}for(let v=0,b=a.length;v<b;v++)u.push({line:g(a[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,f,p),points:g(o[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,f,p)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}get box(){return An(Vm,this)}updateProperty(t,e){return"stroke-width"===t?xn(Zm,this,rv).call(this,e):null}updateParentDimensions(t,e){let[n,i]=t;const[r,s]=xn(Zm,this,ev).call(this);Sn(Km,this,n),Sn(Ym,this,i),Sn(Qm,this,e);const[a,o]=xn(Zm,this,ev).call(this),l=a-r,c=o-s,u=An(Vm,this);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return Sn(Gm,this,t),{path:{transform:this.rotationTransform}}}get viewBox(){return An(Vm,this).map(Pp.svgRound).join(" ")}get defaultProperties(){const[t,e]=An(Vm,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(t)," ").concat(Pp.svgRound(e))}}}get rotationTransform(){const[,,t,e]=An(Vm,this);let n=0,i=0,r=0,s=0,a=0,o=0;switch(An(Gm,this)){case 90:i=e/t,r=-t/e,a=t;break;case 180:n=-1,s=-1,a=t,o=e;break;case 270:i=-e/t,r=t/e,o=e;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(Pp.svgRound(a)," ").concat(Pp.svgRound(o),")")}getPathResizingSVGProperties(t){let[e,n,i,r]=t;const[s,a]=xn(Zm,this,ev).call(this),[o,l,c,u]=An(Vm,this);if(Math.abs(c-s)<=Pp.PRECISION||Math.abs(u-a)<=Pp.PRECISION){const t=e+i/2-(o+c/2),s=n+r/2-(l+u/2);return{path:{"transform-origin":"".concat(Pp.svgRound(e)," ").concat(Pp.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(t," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),d=(r-2*a)/(u-2*a),f=c/i,p=u/r;return{path:{"transform-origin":"".concat(Pp.svgRound(o)," ").concat(Pp.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(f," ").concat(p,") ")+"translate(".concat(Pp.svgRound(s)," ").concat(Pp.svgRound(a),") scale(").concat(h," ").concat(d,") ")+"translate(".concat(Pp.svgRound(-s)," ").concat(Pp.svgRound(-a),")")}}}getPathResizedSVGProperties(t){let[e,n,i,r]=t;const[s,a]=xn(Zm,this,ev).call(this),o=An(Vm,this),[l,c,u,h]=o;if(o[0]=e,o[1]=n,o[2]=i,o[3]=r,Math.abs(u-s)<=Pp.PRECISION||Math.abs(h-a)<=Pp.PRECISION){const t=e+i/2-(l+u/2),s=n+r/2-(c+h/2);for(const{line:e,points:n}of An(Xm,this))Pp._translate(e,t,s,e),Pp._translate(n,t,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(e)," ").concat(Pp.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(u-2*s),f=(r-2*a)/(h-2*a),p=-d*(l+s)+e+s,g=-f*(c+a)+n+a;if(1!==d||1!==f||0!==p||0!==g)for(const{line:m,points:v}of An(Xm,this))Pp._rescale(m,p,g,d,f,m),Pp._rescale(v,p,g,d,f,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Pp.svgRound(e)," ").concat(Pp.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(t,e){let[n,i]=t;const[r,s]=e,a=An(Vm,this),o=n-a[0],l=i-a[1];if(An(Km,this)===r&&An(Ym,this)===s)for(const{line:c,points:u}of An(Xm,this))Pp._translate(c,o,l,c),Pp._translate(u,o,l,u);else{const t=An(Km,this)/r,e=An(Ym,this)/s;Sn(Km,this,r),Sn(Ym,this,s);for(const{line:n,points:i}of An(Xm,this))Pp._rescale(n,o,l,t,e,n),Pp._rescale(i,o,l,t,e,i);a[2]*=t,a[3]*=e}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Pp.svgRound(n)," ").concat(Pp.svgRound(i))}}}get defaultSVGProperties(){const t=An(Vm,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Pp.svgRound(t[0])," ").concat(Pp.svgRound(t[1])),transform:this.rotationTransform||null},bbox:t}}}function ev(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An(Jm,this);const e=An(qm,this)+t/2*An(Qm,this);return An($m,this)%180===0?[e/An(Km,this),e/An(Ym,this)]:[e/An(Ym,this),e/An(Km,this)]}function nv(){const[t,e,n,i]=An(Vm,this),[r,s]=xn(Zm,this,ev).call(this,0);return[t+r,e+s,n-2*r,i-2*s]}function iv(){const t=Sn(Vm,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of An(Xm,this)){if(i.length<=12){for(let e=4,n=i.length;e<n;e+=6)Ci.pointBoundingBox(i[e],i[e+1],t);continue}let e=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,a,o,l,c,u]=i.subarray(r,r+6);Ci.bezierBoundingBox(e,n,s,a,o,l,c,u,t),e=c,n=u}}const[e,n]=xn(Zm,this,ev).call(this);t[0]=Li(t[0]-e,0,1),t[1]=Li(t[1]-n,0,1),t[2]=Li(t[2]+e,0,1),t[3]=Li(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}function rv(t){const[e,n]=xn(Zm,this,ev).call(this);Sn(Jm,this,t);const[i,r]=xn(Zm,this,ev).call(this),[s,a]=[i-e,r-n],o=An(Vm,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class sv extends um{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:bo._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(null!==e&&void 0!==e||(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new sv(this._viewParameters);return t.updateAll(this),t}}var av=new WeakSet;class ov extends pm{constructor(t){super(p(p({},t),{},{name:"inkEditor"})),wn(this,av),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){bo.initialize(t,e),this._defaultDrawingOptions=new sv(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return gi(this,"typesMap",new Map([[zn.INK_THICKNESS,"stroke-width"],[zn.INK_COLOR,"stroke"],[zn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,r){return new Um(t,e,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,r,s){return tv.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){let i=null;if(t instanceof Kf){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,contentsObj:u},parent:{page:{pageNumber:h}}}=t;i=t={annotationType:Wn.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:e},boxes:null,pageIndex:h-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,comment:(null===u||void 0===u?void 0:u.str)||null}}const r=await super.deserialize(t,e,n);return r._initialData=i,t.comment&&r.setCommentData(t.comment),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ad(this)),[["colorPicker",this._colorPicker]]}get colorType(){return zn.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(t){let{color:e,thickness:n,opacity:i}=t;this._drawingOptions=ov.getDefaultDrawingOptions({stroke:Ci.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,o={annotationType:Wn.INK,color:bo._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!xn(av,this,lv).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1),i={rect:n,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}}function lv(t){const{color:e,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((t,n)=>t!==e[n])||t.thickness!==n||t.opacity!==i||t.pageIndex!==r}d(ov,"_type","ink"),d(ov,"_editorType",Wn.INK),d(ov,"_defaultDrawingOptions",null);class cv extends tv{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}class uv{static extractContoursFromText(t,e,n,i,r,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=e,c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:d,actualBoundingBoxRight:f,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:b}=u.measureText(t),y=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(f)||0,b)*y),_=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*y);c=new OffscreenCanvas(w,_),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,w,_),u.fillStyle="black",u.fillText(t,.5*w/2,1.5*_/2);const x=xn(uv,this,yv).call(this,u.getImageData(0,0,w,_).data),k=xn(uv,this,bv).call(this,x),A=xn(uv,this,wv).call(this,k),S=xn(uv,this,pv).call(this,x,w,_,A);return this.processDrawnLines({lines:{curves:S,width:w,height:_},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[s,a,o]=xn(uv,this,_v).call(this,t),[l,c]=xn(uv,this,vv).call(this,s,a,o,Math.hypot(a,o)*xn(uv,this,xv)._.sigmaSFactor,xn(uv,this,xv)._.sigmaR,xn(uv,this,xv)._.kernelSize),u=xn(uv,this,wv).call(this,c),h=xn(uv,this,pv).call(this,l,a,o,u);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(t){var e;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=t;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:u,height:h}=n,d=null!==(e=n.thickness)&&void 0!==e?e:0,f=[],p=Math.min(i/u,r/h),g=p/i,m=p/r,v=[];for(const{points:y}of c){const t=o?xn(uv,this,mv).call(this,y):y;if(!t)continue;v.push(t);const e=t.length,n=new Float32Array(e),i=new Float32Array(3*(2===e?2:e-2));if(f.push({line:i,points:n}),2===e){n[0]=t[0]*g,n[1]=t[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,a,l]=t;r*=g,s*=m,a*=g,l*=m,n.set([r,s,a,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let o=4;o<e;o+=2){const e=n[o]=t[o]*g,c=n[o+1]=t[o+1]*m;i.set(Pp.createBezierPoints(r,s,a,l,e,c),3*(o-2)),[r,s,a,l]=[a,l,e,c]}}if(0===f.length)return null;const b=l?new cv:new tv;return b.build(f,i,r,1,s,l?0:d,a),{outline:b,newCurves:v,areContours:l,thickness:d,width:u,height:h}}static async compressSignature(t){let e,{outlines:n,areContours:i,thickness:r,width:s,height:a}=t,o=1/0,l=-1/0,c=0;for(const b of n){c+=b.length;for(let t=2,e=b.length;t<e;t++){const e=b[t]-b[t-2];o=Math.min(o,e),l=Math.max(l,e)}}e=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const u=n.length,h=8+3*u,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*e.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=s,d[f++]=a,d[f++]=i?0:1,d[f++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),d[f++]=u,d[f++]=e.BYTES_PER_ELEMENT;for(const b of n)d[f++]=b.length-2,d[f++]=b[0],d[f++]=b[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(d);const m=e.prototype.constructor;for(const b of n){const t=new m(b.length-2);for(let e=2,n=b.length;e<n;e++)t[e-2]=b[e]-b[e-2];g.write(t)}g.close();const v=await new Response(p.readable).arrayBuffer();return Ii(new Uint8Array(v))}static async decompressSignature(t){try{const l=(a=t,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Ai(atob(a))),{readable:c,writable:u}=new DecompressionStream("deflate-raw"),h=u.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,f=0;var e,n=!1,i=!1;try{for(var r,s=y(c);n=!(r=await s.next()).done;n=!1){const t=r.value;d||(d=new Uint8Array(new Uint32Array(t.buffer,0,4)[0])),d.set(t,f),f+=t.length}}catch(o){i=!0,e=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw e}}const p=new Uint32Array(d.buffer,0,d.length>>2),g=p[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=p[2],v=p[3],b=0===p[4],w=p[5],_=p[6],x=p[7],k=[],A=(8+3*_)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(x){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(d.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(d.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(d.buffer,A)}f=0;for(let t=0;t<_;t++){const e=p[3*t+8],n=new Float32Array(e+2);k.push(n);for(let i=0;i<2;i++)n[i]=p[3*t+8+i+1];for(let t=0;t<e;t++)n[t+2]=n[t]+S[f++]}return{areContours:b,thickness:w,outlines:k,width:m,height:v}}catch(l){return ui("decompressSignature: ".concat(l)),null}var a}}function hv(t,e,n,i){return i-=e,0===(n-=t)?i>0?0:4:1===n?i+6:2-i}function dv(t,e,n,i,r,s,a){const o=xn(gn,this,hv).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==t[(n+xn(gn,this,kv)._[2*r])*e+(i+xn(gn,this,kv)._[2*r+1])])return r}return-1}function fv(t,e,n,i,r,s,a){const o=xn(gn,this,hv).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==t[(n+xn(gn,this,kv)._[2*r])*e+(i+xn(gn,this,kv)._[2*r+1])])return r}return-1}function pv(t,e,n,i){const r=t.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=t[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*e]=s[c*e+e-1]=0;for(let c=0;c<e;c++)s[c]=s[e*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let t=1;t<e-1;t++){const n=c*e+t,i=s[n];if(0===i)continue;let r=c,u=t;if(1===i&&0===s[n-1])o+=1,u-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,u+=1,i>1&&(a=i)}const h=[t,c],d=u===t+1,f={isHole:d,points:h,id:o,parent:0};let p;l.push(f);for(const t of l)if(t.id===a){p=t;break}p?p.isHole?f.parent=d?p.parent:a:f.parent=d?a:p.parent:f.parent=d?a:0;const g=xn(gn,this,dv).call(this,s,e,c,t,r,u,0);if(-1===g){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let m=xn(gn,this,kv)._[2*g],v=xn(gn,this,kv)._[2*g+1];const b=c+m,y=t+v;r=b,u=y;let w=c,_=t;for(;;){const i=xn(gn,this,fv).call(this,s,e,w,_,r,u,1);m=xn(gn,this,kv)._[2*i],v=xn(gn,this,kv)._[2*i+1];const l=w+m,d=_+v;h.push(d,l);const f=w*e+_;if(0===s[f+1]?s[f]=-o:1===s[f]&&(s[f]=o),l===c&&d===t&&w===b&&_===y){1!==s[n]&&(a=Math.abs(s[n]));break}r=w,u=_,w=l,_=d}}}return l}function gv(t,e,n,i){if(n-e<=4){for(let r=e;r<n-2;r+=2)i.push(t[r],t[r+1]);return}const r=t[e],s=t[e+1],a=t[n-4]-r,o=t[n-3]-s,l=Math.hypot(a,o),c=a/l,u=o/l,h=c*s-u*r,d=o/a,f=1/l,p=Math.atan(d),g=Math.cos(p),m=Math.sin(p),v=f*(Math.abs(g)+Math.abs(m)),b=f*(1-v+v**2),y=Math.max(Math.atan(Math.abs(m+g)*b),Math.atan(Math.abs(m-g)*b));let w=0,_=e;for(let x=e+2;x<n-2;x+=2){const e=Math.abs(h-c*t[x+1]+u*t[x]);e>w&&(_=x,w=e)}w>(l*y)**2?(xn(gn,this,gv).call(this,t,e,_+2,i),xn(gn,this,gv).call(this,t,_,n,i)):i.push(r,s)}function mv(t){const e=[],n=t.length;return xn(gn,this,gv).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}function vv(t,e,n,i,r,s){const a=new Float32Array(s**2),o=-2*i**2,l=s>>1;for(let p=0;p<s;p++){const t=(p-l)**2;for(let e=0;e<s;e++)a[p*s+e]=Math.exp((t+(e-l)**2)/o)}const c=new Float32Array(256),u=-2*r**2;for(let p=0;p<256;p++)c[p]=Math.exp(p**2/u);const h=t.length,d=new Uint8Array(h),f=new Uint32Array(256);for(let p=0;p<n;p++)for(let i=0;i<e;i++){const r=p*e+i,o=t[r];let u=0,h=0;for(let d=0;d<s;d++){const r=p+d-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const f=i+n-l;if(f<0||f>=e)continue;const p=t[r*e+f],g=a[d*s+n]*c[Math.abs(p-o)];u+=p*g,h+=g}}f[d[r]=Math.round(u/h)]++}return[d,f]}function bv(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}function yv(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){const e=n[a]=t[a<<2];i=Math.max(i,e),r=Math.min(r,e)}const s=255/(i-r);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-r)*s;return n}function wv(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(t=>0!==t);let s=r,a=r;for(e=r;e<256;e++){const r=t[e];r>n&&(e-s>i&&(i=e-s,a=e-1),n=r,s=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}function _v(t){const e=t,{width:n,height:i}=t,{maxDim:r}=xn(gn,this,xv)._;let s=n,a=i;if(n>r||i>r){let o=n,l=i,c=Math.log2(Math.max(n,i)/r);const u=Math.floor(c);c=c===u?u-1:u;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(t,0,0,o,l,0,0,s,a),o=s,l=a,t!==e&&t.close(),t=n.transferToImageBitmap()}const h=Math.min(r/s,r/a);s=Math.round(s*h),a=Math.round(a*h)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(t,0,0,t.width,t.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[xn(gn,this,yv).call(this,l),s,a]}gn=uv;var xv={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},kv={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class Av extends um{constructor(){super(),super.updateProperties({fill:bo._defaultLineColor,"stroke-width":0})}clone(){const t=new Av;return t.updateAll(this),t}}class Sv extends sv{constructor(t){super(t),super.updateProperties({stroke:bo._defaultLineColor,"stroke-width":1})}clone(){const t=new Sv(this._viewParameters);return t.updateAll(this),t}}var Ev=new WeakMap,Cv=new WeakMap,Mv=new WeakMap,Tv=new WeakMap;class Pv extends pm{constructor(t){super(p(p({},t),{},{mustBeCommitted:!0,name:"signatureEditor"})),_n(this,Ev,!1),_n(this,Cv,null),_n(this,Mv,null),_n(this,Tv,null),this._willKeepAspectRatio=!0,Sn(Mv,this,t.signatureData||null),Sn(Cv,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){bo.initialize(t,e),this._defaultDrawingOptions=new Av,this._defaultDrawnSignatureOptions=new Sv(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return gi(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!An(Cv,this)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasDescription");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),null===this._drawId)if(An(Mv,this)){const{lines:t,mustSmooth:e,areContours:n,description:i,uuid:r,heightInPage:s}=An(Mv,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=uv.processDrawnLines({lines:t,pageWidth:a,pageHeight:o,rotation:l,innerMargin:Pv._INNER_MARGIN,mustSmooth:e,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:An(Cv,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){Sn(Tv,this,t),this.addEditToolbar()}getUuid(){return An(Tv,this)}get description(){return An(Cv,this)}set description(t){Sn(Cv,this,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{null===e||void 0===e||e.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:r}=An(Mv,this),s=Math.max(i,r);return{areContours:e,outline:uv.processDrawnLines({lines:{curves:t.map(t=>({points:t})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:r,y:s}=this,{outline:a}=Sn(Mv,this,t);let o;Sn(Ev,this,a instanceof cv),this.description=n,An(Ev,this)?o=Pv.getDefaultDrawingOptions():(o=Pv._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[l,c]=this.parentDimensions,[,u]=this.pageDimensions;let h=e/u;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(l*this.width,c*this.height),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return uv.process(t,e,n,i,Pv._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return uv.extractContoursFromText(t,e,n,i,r,Pv._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return uv.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:Pv._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(t){let{areContours:e,thickness:n}=t;e?this._drawingOptions=Pv.getDefaultDrawingOptions():(this._drawingOptions=Pv._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:e,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,s={annotationType:Wn.SIGNATURE,isSignature:!0,areContours:An(Ev,this),color:[0,0,0],thickness:An(Ev,this)?0:r,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),t?(s.paths={lines:e,points:n},s.uuid=An(Tv,this),s.isCopy=!0):s.lines=e,An(Cv,this)&&(s.accessibilityData={type:"Figure",alt:An(Cv,this)}),s}static deserializeDraw(t,e,n,i,r,s){return s.areContours?cv.deserialize(t,e,n,i,r,s):tv.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){var i;const r=await super.deserialize(t,e,n);return Sn(Ev,r,t.areContours),r.description=(null===(i=t.accessibilityData)||void 0===i?void 0:i.alt)||"",Sn(Tv,r,t.uuid),r}}d(Pv,"_type","signature"),d(Pv,"_editorType",Wn.SIGNATURE),d(Pv,"_defaultDrawingOptions",null);var Rv=new WeakMap,Nv=new WeakMap,Dv=new WeakMap,Lv=new WeakMap,Iv=new WeakMap,Ov=new WeakMap,Fv=new WeakMap,jv=new WeakMap,Wv=new WeakMap,zv=new WeakMap,Bv=new WeakMap,Uv=new WeakSet;class Hv extends bo{constructor(t){super(p(p({},t),{},{name:"stampEditor"})),wn(this,Uv),_n(this,Rv,null),_n(this,Nv,null),_n(this,Dv,null),_n(this,Lv,null),_n(this,Iv,null),_n(this,Ov,""),_n(this,Fv,null),_n(this,jv,!1),_n(this,Wv,null),_n(this,zv,!1),_n(this,Bv,!1),Sn(Lv,this,t.bitmapUrl),Sn(Iv,this,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){bo.initialize(t,e)}static isHandlingMimeForPasting(t){return tr.includes(t)}static paste(t,e){e.pasteEditor({mode:Wn.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!(null===(t=this.altTextData)||void 0===t||!t.altText)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasAltText");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=t||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var t;An(Nv,this)&&(Sn(Rv,this,null),this._uiManager.imageManager.deleteId(An(Nv,this)),null===(t=An(Fv,this))||void 0===t||t.remove(),Sn(Fv,this,null),An(Wv,this)&&(clearTimeout(An(Wv,this)),Sn(Wv,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(An(Nv,this)&&null===An(Fv,this)&&xn(Uv,this,qv).call(this),this.isAttachedToDOM||this.parent.add(this))):An(Nv,this)&&xn(Uv,this,qv).call(this)}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(An(Dv,this)||An(Rv,this)||An(Lv,this)||An(Iv,this)||An(Nv,this)||An(jv,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),An(jv,this)||(An(Rv,this)?xn(Uv,this,Xv).call(this):xn(Uv,this,qv).call(this)),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Sn(Nv,this,n),i&&Sn(Rv,this,i),Sn(jv,this,!1),xn(Uv,this,Xv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==An(Wv,this)&&clearTimeout(An(Wv,this));Sn(Wv,this,setTimeout(()=>{Sn(Wv,this,null),xn(Uv,this,Yv).call(this)},200))}copyCanvas(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=224);const{width:i,height:r}=An(Rv,this),s=new Zi;let a=An(Rv,this),o=i,l=r,c=null;if(e){var u,h;if(i>e||r>e){const t=Math.min(e/i,e/r);o=Math.floor(i*t),l=Math.floor(r*t)}c=document.createElement("canvas");const t=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);An(zv,this)||(a=xn(Uv,this,Kv).call(this,t,n));const d=c.getContext("2d");d.filter=this._uiManager.hcmFilter;let f="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":null!==(u=(h=window).matchMedia)&&void 0!==u&&u.call(h,"(prefers-color-scheme: dark)").matches&&(f="#8f8f9d",p="#42414d");const g=15,m=g*s.sx,v=g*s.sy,b=new OffscreenCanvas(2*m,2*v),y=b.getContext("2d");y.fillStyle=f,y.fillRect(0,0,2*m,2*v),y.fillStyle=p,y.fillRect(0,0,m,v),y.fillRect(m,v,m,v),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,t,n),d.drawImage(a,0,0,a.width,a.height,0,0,t,n)}let d=null;if(n){let e,n;if(s.symmetric&&a.width<t&&a.height<t)e=a.width,n=a.height;else if(a=An(Rv,this),i>t||r>t){const s=Math.min(t/i,t/r);e=Math.floor(i*s),n=Math.floor(r*s),An(zv,this)||(a=xn(Uv,this,Kv).call(this,e,n))}const o=new OffscreenCanvas(e,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,e,n),d={width:e,height:n,data:o.getImageData(0,0,e,n).data}}return{canvas:c,width:o,height:l,imageData:d}}static async deserialize(t,e,n){let i=null,r=!1;if(t instanceof tp){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:u,contentsObj:h},container:d,parent:{page:{pageNumber:f}},canvas:p}=t;let g,m;p?(delete t.canvas,({id:g,bitmap:m}=n.imageManager.getFromCanvas(d.id,p)),p.remove()):(r=!0,t._hasNoCanvas=!0);const v=(null===(s=await e._structTree.getAriaAttributes("".concat(Di).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=t={annotationType:Wn.STAMP,bitmapId:g,bitmap:m,pageIndex:f-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:v},isSvg:!1,structParent:c,popupRef:u,comment:(null===h||void 0===h?void 0:h.str)||null}}const a=await super.deserialize(t,e,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=t;r?(n.addMissingCanvas(t.id,a),Sn(jv,a,!0)):u&&n.imageManager.isValidId(u)?(Sn(Nv,a,u),l&&Sn(Rv,a,l)):Sn(Lv,a,c),Sn(zv,a,h);const[f,p]=a.pageDimensions;return a.width=(o[2]-o[0])/f,a.height=(o[3]-o[1])/p,d&&(a.altTextData=d),a._initialData=i,t.comment&&a.setCommentData(t.comment),Sn(Bv,a,!!i),a}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Wn.STAMP,bitmapId:An(Nv,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:An(zv,this),structTreeParentId:this._structTreeParentId};if(this.addComment(n),t)return n.bitmapUrl=xn(Uv,this,Qv).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const t=xn(Uv,this,$v).call(this,n);if(t.isSame)return null;var s;if(t.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1}if(n.id=this.annotationElementId,null===e)return n;e.stamps||(e.stamps=new Map);const a=An(zv,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(An(Nv,this))){if(An(zv,this)){const t=e.stamps.get(An(Nv,this));a>t.area&&(t.area=a,t.serialized.bitmap.close(),t.serialized.bitmap=xn(Uv,this,Qv).call(this,!1))}}else e.stamps.set(An(Nv,this),{area:a,serialized:n}),n.bitmap=xn(Uv,this,Qv).call(this,!1);return n}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}function Vv(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(Sn(Rv,this,t.bitmap),e||(Sn(Nv,this,t.id),Sn(zv,this,t.isSvg)),t.file&&Sn(Ov,this,t.file.name),xn(Uv,this,Xv).call(this)):this.remove()}function Gv(){if(Sn(Dv,this,null),this._uiManager.enableWaiting(!1),An(Fv,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&An(Rv,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&An(Rv,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(t){}}this.div.focus()}}function qv(){if(An(Nv,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(An(Nv,this)).then(t=>xn(Uv,this,Vv).call(this,t,!0)).finally(()=>xn(Uv,this,Gv).call(this));if(An(Lv,this)){const t=An(Lv,this);return Sn(Lv,this,null),this._uiManager.enableWaiting(!0),void Sn(Dv,this,this._uiManager.imageManager.getFromUrl(t).then(t=>xn(Uv,this,Vv).call(this,t)).finally(()=>xn(Uv,this,Gv).call(this)))}if(An(Iv,this)){const t=An(Iv,this);return Sn(Iv,this,null),this._uiManager.enableWaiting(!0),void Sn(Dv,this,this._uiManager.imageManager.getFromFile(t).then(t=>xn(Uv,this,Vv).call(this,t)).finally(()=>xn(Uv,this,Gv).call(this)))}const t=document.createElement("input");t.type="file",t.accept=tr.join(",");const e=this._uiManager._signal;Sn(Dv,this,new Promise(n=>{t.addEventListener("change",async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),xn(Uv,this,Vv).call(this,e)}else this.remove();n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>xn(Uv,this,Gv).call(this))),t.click()}function Xv(){var t;const{div:e}=this;let{width:n,height:i}=An(Rv,this);const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const t=Math.min(a*r/n,a*s/i);n*=t,i*=t}const[o,l]=this.parentDimensions;this.setDims(n*o/r,i*l/s),this._uiManager.enableWaiting(!1);const c=Sn(Fv,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/r,this.height=i/s,null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),xn(Uv,this,Yv).call(this),An(Bv,this)||(this.parent.addUndoableEditor(this),Sn(Bv,this,!0)),this._reportTelemetry({action:"inserted_image"}),An(Ov,this)&&this.div.setAttribute("aria-description",An(Ov,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function Kv(t,e){const{width:n,height:i}=An(Rv,this);let r=n,s=i,a=An(Rv,this);for(;r>2*t||s>2*e;){const n=r,i=s;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function Yv(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,r=new Zi,s=Math.ceil(n*t*r.sx),a=Math.ceil(i*e*r.sy),o=An(Fv,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=An(zv,this)?An(Rv,this):xn(Uv,this,Kv).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function Qv(t){if(t){if(An(zv,this)){const t=this._uiManager.imageManager.getSvgUrl(An(Nv,this));if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=An(Rv,this));return t.getContext("2d").drawImage(An(Rv,this),0,0),t.toDataURL()}if(An(zv,this)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*Fi.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*Fi.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(An(Rv,this),0,0,An(Rv,this).width,An(Rv,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(An(Rv,this))}function $v(t){var e;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===n,s=((null===(e=t.accessibilityData)||void 0===e?void 0:e.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}d(Hv,"_type","stamp"),d(Hv,"_editorType",Wn.STAMP);var Jv=new WeakMap,Zv=new WeakMap,tb=new WeakMap,eb=new WeakMap,nb=new WeakMap,ib=new WeakMap,rb=new WeakMap,sb=new WeakMap,ab=new WeakMap,ob=new WeakMap,lb=new WeakMap,cb=new WeakMap,ub=new WeakMap,hb=new WeakMap,db=new WeakMap,fb=new WeakMap,pb=new WeakSet;class gb{constructor(t){let{uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}=t;wn(this,pb),_n(this,Jv,void 0),_n(this,Zv,!1),_n(this,tb,null),_n(this,eb,null),_n(this,nb,null),_n(this,ib,new Map),_n(this,rb,!1),_n(this,sb,!1),_n(this,ab,!1),_n(this,ob,null),_n(this,lb,null),_n(this,cb,null),_n(this,ub,null),_n(this,hb,null),_n(this,db,-1),_n(this,fb,void 0);const h=[..._b._.values()];if(!gb._initialized){gb._initialized=!0;for(const t of h)t.initialize(u,e)}e.registerEditorTypes(h),Sn(fb,this,e),this.pageIndex=n,this.div=i,Sn(Jv,this,s),Sn(tb,this,a),this.viewport=c,Sn(cb,this,l),this.drawLayer=o,this._structTree=r,An(fb,this).addLayer(this)}get isEmpty(){return 0===An(ib,this).size}get isInvisible(){return this.isEmpty&&An(fb,this).getMode()===Wn.NONE}updateToolbar(t){An(fb,this).updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An(fb,this).getMode();switch(xn(pb,this,wb).call(this),t){case Wn.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Wn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of _b._.values())e.toggle("".concat(n._type,"Editing"),t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===(null===(e=An(cb,this))||void 0===e?void 0:e.div)}setEditingState(t){An(fb,this).setEditingState(t)}addCommands(t){An(fb,this).addCommands(t)}cleanUndoStack(t){An(fb,this).cleanUndoStack(t)}toggleDrawing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=An(tb,this))||void 0===t||t.div.classList.toggle("disabled",!e)}async enable(){var t;Sn(ab,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),null===(t=An(hb,this))||void 0===t||t.abort(),Sn(hb,this,null);const e=new Set;for(const i of An(ib,this).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(An(fb,this).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!An(tb,this))return void Sn(ab,this,!1);const n=An(tb,this).getEditableAnnotations();for(const i of n){if(i.hide(),An(fb,this).isDeletedAnnotationElement(i.data.id))continue;if(e.has(i.data.id))continue;const t=await this.deserialize(i);t&&(this.addOrRebuild(t),t.enableEditing())}Sn(ab,this,!1)}disable(){if(Sn(sb,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),An(cb,this)&&!An(hb,this)){Sn(hb,this,new AbortController);const t=An(fb,this).combinedSignal(An(hb,this));An(cb,this).div.addEventListener("pointerdown",t=>{const{clientX:e,clientY:n,timeStamp:i}=t;if(i-An(db,this)>500)return void Sn(db,this,i);Sn(db,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(e,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat(jn,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=An(ib,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(t.stopPropagation(),t.preventDefault(),l.dblclick())},{signal:t,capture:!0})}const t=new Map,e=new Map;for(const r of An(ib,this).values()){var n;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(e.set(r.annotationElementId,r),null===(n=this.getEditableAnnotation(r.annotationElementId))||void 0===n||n.show(),r.remove()):t.set(r.annotationElementId,r))}if(An(tb,this)){const n=An(tb,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(An(fb,this).isDeletedAnnotationElement(n)){i.updateEdited({deleted:!0});continue}let r=e.get(n);r?(r.resetAnnotationElement(i),r.show(!1),i.show()):(r=t.get(n),r&&(An(fb,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show())}}xn(pb,this,wb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of _b._.values())i.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Sn(sb,this,!1)}getEditableAnnotation(t){var e;return(null===(e=An(tb,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){An(fb,this).getActive()!==t&&An(fb,this).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,null!==(t=An(cb,this))&&void 0!==t&&t.div&&!An(ub,this)){Sn(ub,this,new AbortController);const t=An(fb,this).combinedSignal(An(ub,this));An(cb,this).div.addEventListener("pointerdown",xn(pb,this,mb).bind(this),{signal:t}),An(cb,this).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,null!==(t=An(cb,this))&&void 0!==t&&t.div&&An(ub,this)&&(An(ub,this).abort(),Sn(ub,this,null),An(cb,this).div.classList.remove("highlighting"))}enableClick(){if(An(eb,this))return;Sn(eb,this,new AbortController);const t=An(fb,this).combinedSignal(An(eb,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;null===(t=An(eb,this))||void 0===t||t.abort(),Sn(eb,this,null)}attach(t){An(ib,this).set(t.id,t);const{annotationElementId:e}=t;e&&An(fb,this).isDeletedAnnotationElement(e)&&An(fb,this).removeDeletedAnnotationElement(t)}detach(t){var e;An(ib,this).delete(t.id),null===(e=An(Jv,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!An(sb,this)&&t.annotationElementId&&An(fb,this).addDeletedAnnotationElement(t)}remove(t){this.detach(t),An(fb,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(An(fb,this).addDeletedAnnotationElement(t.annotationElementId),bo.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),An(fb,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!An(ab,this)),An(fb,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!An(nb,this)&&(t._focusEventsAllowed=!1,Sn(nb,this,setTimeout(()=>{Sn(nb,this,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:An(fb,this)._signal}),n.focus())},0))),t._structTreeParentId=null===(e=An(Jv,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return An(fb,this).getId()}combinedSignal(t){return An(fb,this).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return null===(t=kn(pb,this,vb))||void 0===t?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await An(fb,this).updateMode(t.mode);const{offsetX:n,offsetY:i}=xn(pb,this,yb).call(this),r=this.getNextId(),s=xn(pb,this,bb).call(this,p({parent:this,id:r,x:n,y:i,uiManager:An(fb,this),isCentered:!0},e));s&&this.add(s)}async deserialize(t){var e,n;return await(null===(e=_b._.get(null!==(n=t.annotationType)&&void 0!==n?n:t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,An(fb,this)))||null}createAndAddNewEditor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=xn(pb,this,bb).call(this,p({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:An(fb,this),isCentered:e},n));return r&&this.add(r),r}addNewEditor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(xn(pb,this,yb).call(this),!0,t)}setSelected(t){An(fb,this).setSelected(t)}toggleSelected(t){An(fb,this).toggleSelected(t)}unselect(t){An(fb,this).unselect(t)}pointerup(t){var e;const{isMac:n}=Si.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(!An(rb,this))return;if(Sn(rb,this,!1),null!==(e=kn(pb,this,vb))&&void 0!==e&&e.isDrawer&&kn(pb,this,vb).supportMultipleDrawings)return;if(!An(Zv,this))return void Sn(Zv,this,!0);const i=An(fb,this).getMode();i!==Wn.STAMP&&i!==Wn.SIGNATURE?this.createAndAddNewEditor(t,!1):An(fb,this).unselectAll()}pointerdown(t){var e;if(An(fb,this).getMode()===Wn.HIGHLIGHT&&this.enableTextSelection(),An(rb,this))return void Sn(rb,this,!1);const{isMac:n}=Si.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(Sn(rb,this,!0),null!==(e=kn(pb,this,vb))&&void 0!==e&&e.isDrawer)return void this.startDrawingSession(t);const i=An(fb,this).getActive();Sn(Zv,this,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),An(ob,this))return void kn(pb,this,vb).startDrawing(this,An(fb,this),!1,t);An(fb,this).setCurrentDrawingSession(this),Sn(ob,this,new AbortController);const e=An(fb,this).combinedSignal(An(ob,this));this.div.addEventListener("blur",t=>{let{relatedTarget:e}=t;e&&!this.div.contains(e)&&(Sn(lb,this,null),this.commitOrRemove())},{signal:e}),kn(pb,this,vb).startDrawing(this,An(fb,this),!1,t)}pause(t){if(t){const{activeElement:t}=document;return void(this.div.contains(t)&&Sn(lb,this,t))}An(lb,this)&&setTimeout(()=>{var t;null===(t=An(lb,this))||void 0===t||t.focus(),Sn(lb,this,null)},0)}endDrawingSession(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return An(ob,this)?(An(fb,this).setCurrentDrawingSession(null),An(ob,this).abort(),Sn(ob,this,null),Sn(lb,this,null),kn(pb,this,vb).endDrawing(t)):null}findNewParent(t,e,n){const i=An(fb,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}commitOrRemove(){return!!An(ob,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){An(ob,this)&&kn(pb,this,vb).onScaleChangingWhenDrawing(this)}destroy(){var t;this.commitOrRemove(),(null===(t=An(fb,this).getActive())||void 0===t?void 0:t.parent)===this&&(An(fb,this).commitOrRemove(),An(fb,this).setActiveEditor(null)),An(nb,this)&&(clearTimeout(An(nb,this)),Sn(nb,this,null));for(const n of An(ib,this).values()){var e;null===(e=An(Jv,this))||void 0===e||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,An(ib,this).clear(),An(fb,this).removeLayer(this)}render(t){let{viewport:e}=t;this.viewport=e,Ji(this.div,e);for(const n of An(fb,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(t){let{viewport:e}=t;An(fb,this).commitOrRemove(),xn(pb,this,wb).call(this);const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Ji(this.div,{rotation:i}),n!==i)for(const r of An(ib,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return An(fb,this).viewParameters.realScale}}function mb(t){An(fb,this).unselectAll();const{target:e}=t;if(e===An(cb,this).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&An(cb,this).div.contains(e)){const{isMac:e}=Si.platform;if(0!==t.button||t.ctrlKey&&e)return;An(fb,this).showAllEditors("highlight",!0,!0),An(cb,this).div.classList.add("free"),this.toggleDrawing(),qg.startHighlighting(this,"ltr"===An(fb,this).direction,{target:An(cb,this).div,x:t.x,y:t.y}),An(cb,this).div.addEventListener("pointerup",()=>{An(cb,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:An(fb,this)._signal}),t.preventDefault()}}function vb(t){return _b._.get(An(fb,t).getMode())}function bb(t){const e=kn(pb,this,vb);return e?new e.prototype.constructor(t):null}function yb(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),s=Math.max(0,e),a=(r+Math.min(window.innerWidth,t+n))/2-t,o=(s+Math.min(window.innerHeight,e+i))/2-e,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function wb(){for(const t of An(ib,this).values())t.isEmpty()&&t.remove()}d(gb,"_initialized",!1);var _b={_:new Map([wp,ov,Hv,qg,Pv].map(t=>[t._editorType,t]))},xb=new WeakMap,kb=new WeakMap,Ab=new WeakMap,Sb=new WeakSet;class Eb{constructor(t){let{pageIndex:e}=t;wn(this,Sb),_n(this,xb,null),_n(this,kb,new Map),_n(this,Ab,new Map),this.pageIndex=e}setParent(t){if(An(xb,this)){if(An(xb,this)!==t){if(An(kb,this).size>0)for(const e of An(kb,this).values())e.remove(),t.append(e);Sn(xb,this,t)}}else Sn(xb,this,t)}static get _svgFactory(){return gi(this,"_svgFactory",new Pd)}draw(t){var e,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(Rb._=(e=Rb._,n=e++,e),n),a=xn(Sb,this,Mb).call(this),o=Eb._svgFactory.createElement("defs");a.append(o);const l=Eb._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&An(Ab,this).set(s,l);const u=r?xn(Sb,this,Tb).call(this,o,c):null,h=Eb._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,t),An(kb,this).set(s,a),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(t,e){var n,i;const r=(Rb._=(n=Rb._,i=n++,n),i),s=xn(Sb,this,Mb).call(this),a=Eb._svgFactory.createElement("defs");s.append(a);const o=Eb._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e){const t=Eb._svgFactory.createElement("mask");a.append(t),c="mask_p".concat(this.pageIndex,"_").concat(r),t.setAttribute("id",c),t.setAttribute("maskUnits","objectBoundingBox");const e=Eb._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=Eb._svgFactory.createElement("use");t.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const u=Eb._svgFactory.createElement("use");s.append(u),u.setAttribute("href","#".concat(l)),c&&u.setAttribute("mask","url(#".concat(c,")"));const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),An(kb,this).set(r,s),r}finalizeDraw(t,e){An(Ab,this).delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:r,path:s}=e,a="number"===typeof t?An(kb,this).get(t):t;if(a){if(n&&xn(Sb,this,Pb).call(this,a,n),i&&Cb.call(Eb,a,i),r){const{classList:t}=a;for(const[e,n]of Object.entries(r))t.toggle(e,n)}if(s){const t=a.firstChild.firstChild;xn(Sb,this,Pb).call(this,t,s)}}}updateParent(t,e){if(e===this)return;const n=An(kb,this).get(t);n&&(An(xb,e).append(n),An(kb,this).delete(t),An(kb,e).set(t,n))}remove(t){An(Ab,this).delete(t),null!==An(xb,this)&&(An(kb,this).get(t).remove(),An(kb,this).delete(t))}destroy(){Sn(xb,this,null);for(const t of An(kb,this).values())t.remove();An(kb,this).clear(),An(Ab,this).clear()}}function Cb(t,e){let[n,i,r,s]=e;const{style:a}=t;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*s,"%")}function Mb(){const t=mn._svgFactory.create(1,1,!0);return An(xb,this).append(t),t.setAttribute("aria-hidden",!0),t}function Tb(t,e){const n=mn._svgFactory.createElement("clipPath");t.append(n);const i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=mn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(e)),r.classList.add("clip"),i}function Pb(t,e){for(const[n,i]of Object.entries(e))null===i?t.removeAttribute(n):t.setAttribute(n,i)}mn=Eb;var Rb={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:mg},globalThis.pdfjsLib={AbortException:xi,AnnotationEditorLayer:gb,AnnotationEditorParamsType:zn,AnnotationEditorType:Wn,AnnotationEditorUIManager:Is,AnnotationLayer:up,AnnotationMode:Fn,AnnotationType:Kn,build:"295fb3ec4",ColorPicker:fd,createValidAbsoluteUrl:fi,DOMSVGFactory:Pd,DrawLayer:Eb,FeatureTest:Si,fetchData:ji,getDocument:gh,getFilenameFromUrl:function(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(Bi(t))return ui('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(t=>{try{return new URL(t)}catch(e){try{return new URL(decodeURIComponent(t))}catch(n){try{return new URL(t,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(t),"https://foo.bar")}catch(r){return null}}}}})(t);if(!n)return e;const i=t=>{try{let e=decodeURIComponent(t);return e.includes("/")?(e=e.split("/").at(-1),e.test(/^\.pdf$/i)?e:t):e}catch(e){return t}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const t=Array.from(n.searchParams.values()).reverse();for(const n of t)if(r.test(n))return i(n);const e=Array.from(n.searchParams.keys()).reverse();for(const n of e)if(r.test(n))return i(n)}if(n.hash){const t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(t)return i(t[0])}return e},getRGB:Yi,getUuid:Ni,getXfaPageViewport:function(t,e){let{scale:n=1,rotation:i=0}=e;const{width:r,height:s}=t.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new Wi({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:Vc,ImageKind:Xn,InvalidPDFException:yi,isDataScheme:Bi,isPdfFile:Ui,isValidExplicitDest:il,MathClamp:Li,noContextMenu:Gi,normalizeUnicode:function(t){return Pi||(Pi=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Ri=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Pi,(t,e,n)=>e?e.normalize("NFKC"):Ri.get(n))},OPS:ei,OutputScale:Zi,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:kh,PDFDateString:Xi,PDFWorker:Lh,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Fi,RenderingCancelledException:zi,ResponseException:wi,setLayerDimensions:Ji,shadow:gi,SignatureExtractor:uv,stopEvent:qi,SupportedImageMimeTypes:tr,TextLayer:eh,TouchManager:Ba,updateUrlHash:pi,Util:Ci,VerbosityLevel:ti,version:"5.4.54",XfaLayer:Rd},Vc.workerSrc="".concat("/introduction-to-statistics","/pdf.worker.mjs");const Nb=new $e({baseUrl:"/introduction-to-statistics/webr/"});let Db;const Lb=()=>{const[t,e]=(0,i.useState)("x <- c(3, 2, 5, 8, 1)\nmean(x)"),[n,r]=(0,i.useState)(""),[a,o]=(0,i.useState)(!0),[c,u]=(0,i.useState)(!1),[h,d]=(0,i.useState)(null),f=(0,i.useRef)(null);(0,i.useEffect)(()=>((async()=>{try{await Nb.init(),Db=await new Nb.Shelter,r("WebR is ready. Try some R code!")}catch(t){console.error("Error initializing WebR:",t),d("Failed to initialize R. Please refresh the page.")}finally{o(!1)}})(),()=>{Db&&Db.purge()}),[]);const p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(!e.trim())return void r("Please enter some R code to run.");if(!Db)return void d("R is not initialized. Please wait or refresh the page.");u(!0),d(null),r("Running...");const n=/(plot|barplot|hist|ggplot|boxplot)/.test(e);let i=e;if(!n){const t=e.split("\n"),n=t[t.length-1].trim();n.length>0&&!n.startsWith("#")&&(t[t.length-1]="print(".concat(n,")"),i=t.join("\n"))}f.current.getContext("2d").clearRect(0,0,f.current.width,f.current.height);try{n&&await Db.captureR('\n          pdf("plot.pdf", width=7, height=5)\n          '.concat(i,"\n          dev.off()\n        "));const t=(await Db.captureR("\n        ".concat(i,"\n      "))).output.filter(t=>"stdout"===t.type||"stderr"===t.type).map(t=>t.data).join("\n");""===t.trim()?r("[no console output]"):r(t.replace(/\[\d+\]\s*/g,"").trim());const e=f.current;if(n)try{const t=await Nb.FS.readFile("/home/web_user/plot.pdf"),n=new Uint8Array(t),i=await gh({data:n}).promise,r=await i.getPage(1),s=r.getViewport({scale:1.5});e.width=s.width,e.height=s.height;const a={canvasContext:e.getContext("2d"),viewport:s};await r.render(a).promise}catch(s){console.error("Error rendering PDF plot:",s),d("An error occurred while rendering the plot. No plot was generated.")}else{e.getContext("2d").clearRect(0,0,e.width,e.height)}}catch(s){console.error("Error executing R code:",s),d("Error: ".concat(s.message)),r("")}finally{u(!1)}};return(0,s.jsx)(l,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 py-16 text-center",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto mb-8 animate-fade-in",children:[(0,s.jsx)("h1",{className:"text-5xl md:text-6xl font-bold mb-4 leading-tight bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 dark:from-blue-400 dark:via-purple-400 dark:to-blue-500 bg-clip-text text-transparent",children:"Introduction to R"}),(0,s.jsx)("p",{className:"text-xl md:text-2xl mb-8 leading-relaxed text-muted-text-color animate-fade-in-delay",children:"Learn the foundations of statistics through interactive R examples."})]}),(0,s.jsxs)("div",{className:"w-full max-w-6xl relative z-10 grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"md:col-span-2 relative z-10 p-6 sm:p-8 rounded-xl bg-card-bg-color border border-border-color shadow-xl animate-fade-in-delay-2 h-full",children:[(0,s.jsx)("h2",{className:"text-2xl md:text-3xl font-semibold mb-4 text-card-text-color text-left",children:"Try it yourself \ud83d\ude80"}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("textarea",{value:t,onChange:t=>e(t.target.value),rows:"10",className:"w-full p-4 rounded-lg font-mono text-sm bg-gray-100 dark:bg-gray-700 text-text-color dark:text-gray-100 placeholder-gray-400 border border-border-color focus:border-primary-color outline-none transition-colors",disabled:a||c,placeholder:"Enter your R code here"})}),(0,s.jsx)("button",{onClick:()=>p(),className:"w-full py-3 rounded-lg font-bold text-lg text-white bg-primary-color hover:bg-primary-hover transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:a||c,children:a?"Initializing R...":c?"Running...":"Run R"}),(0,s.jsxs)("div",{className:"mt-6 text-left",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-card-text-color mb-2",children:"Console Output"}),(0,s.jsx)("pre",{className:"p-4 rounded-lg bg-gray-100 dark:bg-gray-900 text-sm font-mono whitespace-pre-wrap overflow-x-auto border border-border-color text-text-color min-h-[5rem]",children:n}),h&&(0,s.jsx)("pre",{className:"mt-2 p-4 rounded-lg bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300 text-sm whitespace-pre-wrap overflow-x-auto",children:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-card-text-color mb-2",children:"Plot"}),(0,s.jsx)("div",{className:"relative p-2 bg-gray-100 dark:bg-gray-900 rounded-lg border border-border-color flex justify-center items-center",children:(0,s.jsx)("canvas",{ref:f,width:"640",height:"480",className:"rounded-md"})})]})]})]}),(0,s.jsxs)("div",{className:"relative z-10 p-6 sm:p-8 rounded-xl bg-card-bg-color border border-border-color shadow-xl animate-fade-in-delay-3 h-full",children:[(0,s.jsx)("h2",{className:"text-2xl md:text-3xl font-semibold mb-4 text-card-text-color text-left",children:"Explore Examples"}),(0,s.jsx)("div",{className:"space-y-4",children:[{title:"Basic Calculations",description:"Perform simple arithmetic and variable assignment.",code:"x <- c(3, 2, 5, 8, 1)\nmean(x)\nsum(x)"},{title:"Data Summary",description:"Summarize a built-in dataset.",code:"data(iris)\nsummary(iris)"},{title:"Creating a Bar Chart",description:"Visualize data with a simple bar chart.",code:"barplot(table(mtcars$cyl), main='Car Cylinders', xlab='Number of Cylinders', ylab='Count', col='skyblue')"},{title:"Creating a Scatter Plot",description:"Explore the relationship between two variables.",code:"plot(mtcars$wt, mtcars$mpg, main='Weight vs. MPG', xlab='Weight (1000 lbs)', ylab='Miles Per Gallon', pch=19, col='purple')"},{title:"Generating a Histogram",description:"Understand the distribution of a variable.",code:"hist(iris$Sepal.Length, main='Sepal Length Distribution', xlab='Sepal Length', col='lightgreen', border='darkgreen')"},{title:"Performing a T-test",description:"Conduct a statistical test to compare two groups.",code:"group_a <- c(25, 28, 30, 22, 27)\ngroup_b <- c(35, 38, 40, 32, 37)\nt.test(group_a, group_b)"}].map((t,n)=>(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer border border-border-color group",onClick:()=>{return n=t.code,e(n),void p(n);var n},children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-card-text-color group-hover:text-primary-color transition-colors",children:t.title}),(0,s.jsx)("p",{className:"text-sm text-muted-text-color mt-1",children:t.description})]},n))})]})]})]})})},Ib=t=>{let{navigateTo:e,currentPage:n}=t;const[r,o]=(0,i.useState)(!1),l=[{key:"home",label:"Home"},{key:"introduction",label:"Introduction"},{key:"research-questions",label:"Research Questions"},{key:"foundations",label:"Foundations"},{key:"probability",label:"Probability"},{key:"comparisons",label:"Comparisons"},{key:"relationships",label:"Relationships"},{key:"reporting",label:"Reporting"},{key:"exam-prep",label:"Exam Prep"}],c=t=>{let{pageKey:i,label:r}=t;return(0,s.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e(i),o(!1)},className:"block md:inline-block px-3 py-2 rounded-md text-sm font-medium ".concat(n===i?"bg-primary/20 text-primary":"text-muted hover:bg-card hover:text-primary"),children:r})};return(0,s.jsx)("header",{className:"bg-card shadow-md sticky top-0 z-50 border-b border-border",children:(0,s.jsxs)("nav",{className:"container mx-auto px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[" ",(0,s.jsx)(a,{}),(0,s.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e("home")},children:"Intro to Stats"})]}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:l.map(t=>(0,s.jsx)(c,{pageKey:t.key,label:t.label},t.key))}),(0,s.jsx)("button",{onClick:()=>o(!r),className:"md:hidden flex items-center",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]}),r&&(0,s.jsx)("div",{className:"md:hidden mt-4 space-y-1",children:l.map(t=>(0,s.jsx)(c,{pageKey:t.key,label:t.label},t.key))})]})})},Ob=()=>(0,s.jsxs)("footer",{className:"bg-gray-800 text-white dark:bg-gray-950 dark:text-gray-50 mt-16",children:[" ",(0,s.jsxs)("div",{className:"container mx-auto px-6 py-8 text-center",children:[(0,s.jsxs)("p",{children:["\xa9 2025 ",(0,s.jsx)("a",{href:"https://www.uv.uio.no/isp/",children:"Institute of Special Needs Education"}),", ",(0,s.jsx)("a",{href:"https://www.uv.uio.no/english/",children:"Faculty of Educational Sciences"}),", ",(0,s.jsx)("a",{href:"https://www.uio.no/english/",children:"University of Oslo"}),"."]}),(0,s.jsx)("p",{className:"text-gray-400 dark:text-gray-500 mt-2",children:"Developed by Charalambos Themistocleous"})," "]})]}),Fb=()=>(0,s.jsxs)(l,{title:"1. Formulation of Research Questions",children:[(0,s.jsx)("p",{children:"The starting point of any statistical inquiry is a well-defined research question. A good research question is specific, measurable, and identifies the key variables you are interested in. It guides your data collection and analysis plan."}),(0,s.jsx)("p",{children:'For example, instead of asking "Does teaching method affect learning?", a better question would be: "Do students taught with Method A have significantly higher test scores than students taught with Method B?". This specifies the variables (teaching method, test scores) and the comparison of interest.'}),(0,s.jsx)(qb,{}),(0,s.jsx)(Vb,{language:"r",code:'\n# Load a hypothetical dataset\nstudent_data <- data.frame(\n  student_id = 1:100,\n  teaching_method = factor(rep(c("Method A", "Method B"), each = 50)),\n  test_score = c(rnorm(50, 85, 5), rnorm(50, 88, 5))\n)\n# View the first few rows of the data\nhead(student_data)\n# Get a summary of the variables\nsummary(student_data)\n        '})]}),jb=()=>(0,s.jsxs)(l,{title:"2. Review of Measurement Scales, Averages, and Graphs",children:[(0,s.jsx)("h3",{className:"text-xl text-foreground font-semibold mt-6 mb-4",children:"Measurement Scales"}),(0,s.jsxs)("ul",{class:"text-foreground",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Nominal:"})," Categorical data without an intrinsic order (e.g., gender, teaching method)."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Ordinal:"})," Categorical data with a meaningful order but unequal intervals (e.g., satisfaction ratings from 'low' to 'high')."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Interval:"})," Numerical data with equal intervals but no true zero (e.g., temperature in Celsius)."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Ratio:"})," Numerical data with equal intervals and a true zero (e.g., height, weight, test scores)."]})]}),(0,s.jsx)("h3",{className:"text-xl font-semibold mt-6 mb-4 text-foreground",children:"Averages and Standard Deviations"}),(0,s.jsxs)("p",{class:"text-foreground",children:["The ",(0,s.jsx)("strong",{class:"text-foreground",children:"mean"})," (average) is the sum of all values divided by the number of values. The ",(0,s.jsx)("strong",{class:"text-foreground",children:"median"})," is the middle value. The ",(0,s.jsx)("strong",{class:"text-foreground",children:"mode"})," is the most frequent value. The ",(0,s.jsx)("strong",{class:"text-foreground",children:"standard deviation"})," measures the amount of variation or dispersion of a set of values."]}),(0,s.jsx)(Vb,{language:"r",code:'\n# Calculate mean and standard deviation for test scores\n# Assuming student_data from the previous section is loaded\nmean_score <- mean(student_data$test_score)\nsd_score <- sd(student_data$test_score)\n\nprint(paste("Mean Test Score:", round(mean_score, 2)))\nprint(paste("Standard Deviation:", round(sd_score, 2)))\n\n# Create a boxplot to visualize the distribution\nboxplot(test_score ~ teaching_method, data = student_data,\n        main = "Test Scores by Teaching Method",\n        xlab = "Teaching Method",\n        ylab = "Test Score",\n        col = c("lightblue", "lightgreen"))\n        '})]}),Wb=()=>(0,s.jsxs)(l,{title:"3. Probability and the Normal Distribution",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Probability"})," is the measure of the likelihood that an event will occur. The ",(0,s.jsx)("strong",{class:"text-foreground",children:"normal distribution"})," is a fundamental concept in statistics. It's a bell-shaped curve where most of the data clusters around the mean."]}),(0,s.jsxs)("p",{children:["Use the sliders below to see how changing the ",(0,s.jsx)("strong",{class:"text-foreground",children:"mean"})," (the center of the distribution) and the ",(0,s.jsx)("strong",{class:"text-foreground",children:"standard deviation"})," (the spread of the distribution) affects the shape of the normal curve."]}),(0,s.jsx)(Gb,{})]}),zb=()=>(0,s.jsxs)(l,{title:"5. Comparison of Groups or Time Points",children:[(0,s.jsxs)("p",{children:["A common task is to compare groups. For two groups, we often use a ",(0,s.jsx)("strong",{class:"text-foreground",children:"t-test"})," to determine if the difference between their means is statistically significant. For more than two groups, we use ",(0,s.jsx)("strong",{class:"text-foreground",children:"ANOVA (Analysis of Variance)"}),"."]}),(0,s.jsx)("h3",{className:"text-xl font-semibold mt-6 mb-4 text-foreground",children:"Example in R (T-test)"}),(0,s.jsx)(Vb,{language:"r",code:"\n# Perform an independent samples t-test\nttest_result <- t.test(test_score ~ teaching_method, data = student_data)\n\n# Print the results\nprint(ttest_result)\n        "}),(0,s.jsx)("p",{children:"The p-value in the result tells us the probability of observing the data (or more extreme data) if there were no real difference between the groups. A small p-value (typically < 0.05) suggests a significant difference."})]}),Bb=()=>(0,s.jsxs)(l,{title:"6. Relationships Between Numerical Variables: Correlation",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Correlation"})," measures the strength and direction of a linear relationship between two numerical variables. The correlation coefficient (r) ranges from -1 to +1. A value of +1 indicates a perfect positive linear relationship, -1 a perfect negative linear relationship, and 0 no linear relationship."]}),(0,s.jsx)(Vb,{language:"r",code:'\n# Let\'s add another variable: hours studied\nset.seed(42) # for reproducibility\nstudent_data$hours_studied <- student_data$test_score * 0.1 + rnorm(100, 2, 1)\n\n# Create a scatter plot\nplot(student_data$hours_studied, student_data$test_score,\n     main="Test Score vs. Hours Studied",\n     xlab="Hours Studied",\n     ylab="Test Score",\n     pch=19, col="blue")\n\n# Calculate the correlation\ncorrelation_result <- cor.test(student_data$hours_studied, student_data$test_score)\nprint(correlation_result)\n        '})]}),Ub=()=>(0,s.jsxs)(l,{title:"7. How to Recognize, Interpret, and Report Statistical Analyses",children:[(0,s.jsx)("p",{children:"Reporting statistical results clearly is a crucial skill. When reporting a t-test, for example, you should include the means and standard deviations for each group, the t-statistic, degrees of freedom, and the p-value."}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Example Report:"}),' "An independent-samples t-test was conducted to compare test scores for students taught with Method A and Method B. There was a significant difference in scores for Method A (M=85.1, SD=4.9) and Method B (M=88.2, SD=5.1); t(98) = -3.0, p < .01. These results suggest that students taught with Method B scored significantly higher than those taught with Method A."']}),(0,s.jsx)(Xb,{})]}),Hb=()=>(0,s.jsxs)(l,{title:"8. Important Points and Exam Preparation",children:[(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Understand the Concepts:"})," Don't just memorize R code. Understand the concepts behind the tests. Why a t-test? Why a correlation?"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Check Assumptions:"})," Many statistical tests have assumptions (e.g., normal distribution). Know what they are."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Correlation is Not Causation:"})," Just because two variables are correlated does not mean one causes the other."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{class:"text-foreground",children:"Practice:"})," The best way to learn is by doing. Work through problems, analyze datasets, and practice interpreting the output."]})]}),(0,s.jsx)("div",{className:"mt-6 p-4 border-l-4 rounded-md bg-blue-100 border-blue-500 text-blue-700 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-200",children:(0,s.jsx)("p",{className:"font-bold",children:"Good luck with your studies and the exam!"})})]}),Vb=t=>{let{language:e,code:n}=t;return(0,s.jsx)("div",{className:"my-6",children:(0,s.jsxs)("pre",{className:"bg-gray-800 text-white dark:bg-gray-900 dark:text-gray-50 p-4 rounded-lg overflow-x-auto",children:[" ",(0,s.jsx)("code",{className:"language-".concat(e),children:n.trim()})]})})},Gb=()=>{const t=(0,i.useRef)(null),[e,n]=(0,i.useState)(0),[r,a]=(0,i.useState)(1);return(0,i.useEffect)(()=>{if(t.current&&window.d3){const n=window.d3,i=n.select(t.current);i.selectAll("*").remove();const s={top:20,right:30,bottom:40,left:40},a=t.current.clientWidth-s.left-s.right,o=300-s.top-s.bottom,l=i.append("g").attr("transform","translate(".concat(s.left,",").concat(s.top,")")),c=n.scaleLinear().domain([-10,10]).range([0,a]),u=n.scaleLinear().domain([0,1]).range([o,0]);l.append("g").attr("transform","translate(0,".concat(o,")")).call(n.axisBottom(c)),l.append("text").attr("text-anchor","end").attr("x",a).attr("y",o+s.bottom-10).text("Value"),l.append("g").call(n.axisLeft(u)),l.append("text").attr("text-anchor","end").attr("transform","rotate(-90)").attr("y",15-s.left).attr("x",0).text("Density");const h=t=>1/(r*Math.sqrt(2*Math.PI))*Math.exp(-.5*Math.pow((t-e)/r,2)),d=c.ticks(100).map(t=>({x:t,y:h(t)})),f=n.line().x(t=>c(t.x)).y(t=>u(t.y)),p=getComputedStyle(document.documentElement).getPropertyValue("--primary-color").trim();l.append("path").datum(d).attr("fill","none").attr("stroke",p).attr("stroke-width",2.5).attr("d",f)}},[e,r]),(0,s.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-border dark:bg-gray-800 dark:border-gray-700",children:[" ",(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"mean-slider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Mean: ",e]}),(0,s.jsx)("input",{id:"mean-slider",type:"range",min:"-5",max:"5",step:"0.1",value:e,onChange:t=>n(parseFloat(t.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"sd-slider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Standard Deviation: ",r]}),(0,s.jsx)("input",{id:"sd-slider",type:"range",min:"0.5",max:"3",step:"0.1",value:r,onChange:t=>a(parseFloat(t.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]}),(0,s.jsx)("svg",{ref:t,className:"w-full h-[300px] rounded-lg bg-white border border-border dark:bg-gray-900 dark:border-gray-700"})]})},qb=()=>{const[t,e]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[a,o]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"mt-8 p-6 bg-indigo-50 rounded-lg border border-indigo-200 dark:bg-indigo-950/30 dark:border-indigo-700",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-indigo-800 dark:text-indigo-200 mb-4",children:"\u2728 Research Question Generator"}),(0,s.jsx)("p",{className:"text-indigo-700 dark:text-indigo-300 mb-4",children:"Enter a topic below, and our AI assistant will help you draft some testable research questions."}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("input",{type:"text",value:t,onChange:t=>e(t.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:border-gray-600 dark:focus:ring-indigo-400 dark:bg-gray-800 dark:text-gray-200",placeholder:"e.g., 'student anxiety and exam performance'"}),(0,s.jsx)("button",{onClick:async()=>{if(!t.trim())return void r('<p class="text-red-600 dark:text-red-400">Please enter a topic.</p>');if("function"!==typeof window.markdownit)return void r('<p class="text-red-600 dark:text-red-400">Error: Markdown library not loaded.</p>');const e=window.markdownit();o(!0),r("");const n='As an expert in educational and special needs statistics, generate 3-5 well-formed, testable research questions based on the following topic: "'.concat(t,'". The questions should be suitable for an introductory statistics course. For each question, briefly mention the key variables involved.');try{const t=await Kb(n);r(e.render(t))}catch(i){r('<p class="text-red-600 dark:text-red-400">Sorry, there was an error. Please try again.</p>')}finally{o(!1)}},disabled:a,className:"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-300 flex items-center justify-center disabled:bg-indigo-400 dark:bg-indigo-500 dark:hover:bg-indigo-400 dark:disabled:bg-indigo-600",children:a?"Generating...":"Generate Questions"})]}),a&&(0,s.jsx)("div",{className:"loader mx-auto my-4"}),n&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-white rounded-md border border-gray-200 dark:bg-gray-800 dark:border-gray-700 prose max-w-none",dangerouslySetInnerHTML:{__html:n}})]})},Xb=()=>{const[t,e]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[a,o]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"mt-8 p-6 bg-teal-50 rounded-lg border border-teal-200 dark:bg-teal-950/30 dark:border-teal-700",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-teal-800 dark:text-teal-200 mb-4",children:"\u2728 Statistical Output Interpreter"}),(0,s.jsx)("p",{className:"text-teal-700 dark:text-teal-300 mb-4",children:"Paste your statistical test results below to get a plain-language explanation."}),(0,s.jsx)("textarea",{value:t,onChange:t=>e(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md h-40 focus:ring-2 focus:ring-teal-500 focus:outline-none dark:border-gray-600 dark:focus:ring-teal-400 dark:bg-gray-800 dark:text-gray-200",placeholder:"Paste your R output here..."}),(0,s.jsx)("button",{onClick:async()=>{if(!t.trim())return void r('<p class="text-red-600 dark:text-red-400">Please paste your R output.</p>');if("function"!==typeof window.markdownit)return void r('<p class="text-red-600 dark:text-red-400">Error: Markdown library not loaded.</p>');const e=window.markdownit();o(!0),r("");const n="I am a student in an introductory statistics course for education. Please explain the following R statistical output in simple terms. Explain what the main values (like p-value, t-statistic, correlation coefficient, means) mean and what the overall conclusion is. Here is the output:\n\n```\n".concat(t,"\n```");try{const t=await Kb(n);r(e.render(t))}catch(i){r('<p class="text-red-600 dark:text-red-400">Sorry, there was an error. Please try again.</p>')}finally{o(!1)}},disabled:a,className:"mt-2 bg-teal-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-teal-700 transition duration-300 flex items-center justify-center disabled:bg-teal-400 dark:bg-teal-500 dark:hover:bg-teal-400 dark:disabled:bg-teal-600",children:a?"Interpreting...":"Interpret Results"}),a&&(0,s.jsx)("div",{className:"loader mx-auto my-4"}),n&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-white rounded-md border border-gray-200 dark:bg-gray-800 dark:border-gray-700 prose max-w-none",dangerouslySetInnerHTML:{__html:n}})]})};async function Kb(t){const e={contents:[{role:"user",parts:[{text:t}]}]},n="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=".concat(""),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok)throw new Error("API request failed with status ".concat(i.status));const r=await i.json();if(r.candidates&&r.candidates.length>0&&r.candidates[0].content&&r.candidates[0].content.parts&&r.candidates[0].content.parts.length>0)return r.candidates[0].content.parts[0].text;throw console.error("Unexpected API response structure:",r),new Error("Could not extract text from API response.")}const Yb=()=>{const[t,e]=(0,i.useState)("home"),n=t=>{e(t),window.scrollTo(0,0)};return(0,s.jsxs)("div",{className:"bg-background text-foreground min-h-screen",children:[(0,s.jsx)(Ib,{navigateTo:n,currentPage:t}),(0,s.jsx)("main",{className:"container mx-auto px-6 py-12",children:(()=>{switch(t){case"home":default:return(0,s.jsx)(c,{navigateTo:n});case"introduction":return(0,s.jsx)(Lb,{});case"research-questions":return(0,s.jsx)(Fb,{});case"foundations":return(0,s.jsx)(jb,{});case"probability":return(0,s.jsx)(Wb,{});case"comparisons":return(0,s.jsx)(zb,{});case"relationships":return(0,s.jsx)(Bb,{});case"reporting":return(0,s.jsx)(Ub,{});case"exam-prep":return(0,s.jsx)(Hb,{})}})()}),(0,s.jsx)(Ob,{})]})},Qb=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then(e=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=e;n(t),i(t),r(t),s(t),a(t)})};r.createRoot(document.getElementById("root")).render((0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(Yb,{})})),Qb()})();
//# sourceMappingURL=main.47673ba6.js.map